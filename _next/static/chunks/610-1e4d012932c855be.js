(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{244:(e,t,r)=>{"use strict";r.d(t,{y:()=>l});var a=r(5155),n=r(605),s=r(598),i=r(1797),o=r(2577);let l=e=>{let{children:t,user:r,isGroupChat:l=!1}=e;return(0,a.jsx)(o.h,{children:(0,a.jsx)(n.C,{children:(0,a.jsx)(s.m,{user:r,isGroupChat:l,children:(0,a.jsx)(i.s,{user:r,children:t})})})})}},598:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>ChatConnectionProvider,o:()=>useChatConnection});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5155),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2115),_session_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(605),_chat_theme_context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2577),_lib_default_chat_themes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9698),_lib_servers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5791);let ChatConnectionContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(void 0),ChatConnectionProvider=param=>{var _user_id;let{children,user,isGroupChat=!1}=param,{chatId,setChatId,setStatus}=(0,_session_context__WEBPACK_IMPORTED_MODULE_2__.w)(),{setTheme,setMode}=(0,_chat_theme_context__WEBPACK_IMPORTED_MODULE_3__.j)(),[messages,setMessages]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[participants,setParticipants]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[typingUsers,setTypingUsers]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),userId=null!=(_user_id=null==user?void 0:user.id)?_user_id:"",wsRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),isTypingRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1),typingTimeoutRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),isDisconnectingRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1),reconnectionTimerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),reconnectionAttemptsRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0),messageTimeoutsRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map),chatServerUrlRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(""),sendPacket=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e=>{wsRef.current&&wsRef.current.readyState===WebSocket.OPEN?wsRef.current.send(JSON.stringify(e)):console.error("Cannot send packet, WebSocket is not open.")},[]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{window.sendPacket=sendPacket},[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{window.simulateWebsocketDisconnect=()=>{wsRef.current&&(wsRef.current.close(1e3,"Simulated ddisconnect"),wsRef.current=null)}},[]);let handleReaction=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Anonymous";setMessages(n=>n.map(n=>{let s;if(n.id!==e||"system"===n.type)return n;let i=n.reactions||[],o=i.findIndex(e=>e.user_id===r);return o>-1?t?(s=[...i])[o]={user_id:r,emoji:t,message_id:e,nickname:a}:s=i.filter((e,t)=>t!==o):s=t?[...i,{user_id:r,emoji:t,message_id:e,nickname:a}]:i,{...n,reactions:s}}))},[]),onChangeNickname=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e=>{if(0===e.length||!userId)return;sendPacket({type:"change_nickname",content:{newNickname:e,userId},sender:userId}),setParticipants(t=>t.map(t=>t.userId===userId?{...t,nickname:e}:t));let t={id:"system_".concat(Date.now()),session_id:chatId,created_at:new Date().toISOString(),type:"system",content:"You changed your nickname to ".concat(e,"."),sender:"system"};setMessages(e=>[...e,t])},[userId,chatId,sendPacket]),onDeleteMessage=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e=>{userId&&chatId&&(setMessages(t=>t.map(t=>t.id===e?{...t,type:"deleted"}:t)),sendPacket({type:"message_delete",content:e,sender:userId}))},[userId,chatId,sendPacket]),onReact=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async(e,t)=>{var r;if(!userId)return;let a=(null==(r=participants.find(e=>e.userId===userId))?void 0:r.nickname)||"Anonymous";handleReaction(e,t||null,userId,a),sendPacket({type:"reaction",sender:userId,content:{message_id:e,emoji:t||null,user_id:userId,nickname:a}})},[userId,sendPacket,participants,handleReaction]),editMessage=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e,t)=>{t&&e&&userId&&(setMessages(r=>r.map(r=>r.id===e?{...r,content:t,edited:!0}:r)),sendPacket({type:"edit_message",content:{message_id:e,new_content:t,user_id:userId},sender:userId}))},[userId,sendPacket]),sendVoiceMessage=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async e=>{let t;if(!userId||!chatId)return;let r=new FileReader,a=new Promise((t,a)=>{r.onloadend=()=>{"string"==typeof r.result?t(r.result):a(Error("Failed to read blob as base64 string."))},r.onerror=()=>{a(r.error||Error("FileReader error."))},r.readAsDataURL(e)});try{t=await a}catch(e){console.error("Error converting audio blob to base64:",e);return}let n={id:"msg_".concat(Date.now()),session_id:chatId,created_at:new Date().toISOString(),content:t,voice_content:null,type:"voice_message",sender:userId,role:null==user?void 0:user.role,reactions:[]};sendPacket({type:"message",content:n,sender:userId}),setMessages(e=>[...e,n])},[userId,chatId,sendPacket,user]),sendImageMessage=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e=>{if(!userId||!chatId)return;let t={id:"msg_".concat(Date.now()),session_id:chatId,created_at:new Date().toISOString(),content:e,type:"image",sender:userId,role:null==user?void 0:user.role,reactions:[]};sendPacket({type:"message",content:t,sender:userId}),setMessages(e=>[...e,t])},[userId,chatId,sendPacket,user]),sendMessage=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e,t,r)=>{if(!userId||!chatId)return;sendPacket({type:"typing",content:!1,sender:userId}),isTypingRef.current&&(isTypingRef.current=!1);let a={id:"msg_".concat(Date.now()),session_id:chatId,created_at:new Date().toISOString(),content:e,replyingTo:t,sender:userId,role:null==user?void 0:user.role,mentions:r||[],reactions:[]};sendPacket({type:"message",content:a,sender:userId}),setMessages(e=>[...e,{...a,status:"sending"}]);let n=setTimeout(()=>{setMessages(e=>e.map(e=>e.id===a.id&&(null==e?void 0:e.status)==="sending"?{...e,status:"error"}:e))},5e3);messageTimeoutsRef.current.set(a.id,n)},[userId,chatId,sendPacket,user]),onStartTyping=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{typingTimeoutRef.current&&clearTimeout(typingTimeoutRef.current),isTypingRef.current||(isTypingRef.current=!0,sendPacket({type:"typing",content:!0,sender:userId})),typingTimeoutRef.current=setTimeout(()=>{isTypingRef.current=!1,sendPacket({type:"typing",content:!1,sender:userId})},3e3)},[userId,sendPacket]),onChangeTheme=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e,t)=>{if(!userId||!chatId)return;sendPacket({type:"change_theme",content:{mode:e,theme:t},sender:userId}),setMode(e),setTheme(t);let r={id:"system_".concat(Date.now()),session_id:chatId,created_at:new Date().toISOString(),type:"system",content:"Theme changed to ".concat(t.name," in ").concat(e," mode."),sender:"system"};setMessages(e=>[...e,r])},[userId,chatId,sendPacket,setMode,setTheme,setMessages]),disconnect=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{isDisconnectingRef.current=!0,reconnectionTimerRef.current&&clearTimeout(reconnectionTimerRef.current);let e=async()=>{let e="".concat(_lib_servers__WEBPACK_IMPORTED_MODULE_5__.Y,"/session/disconnect?userId=").concat(userId);try{let t={"Content-Type":"application/json"},r=await fetch(e,{method:"POST",headers:t,body:JSON.stringify({userId})});r.ok?console.log("Successfully disconnected from session."):console.error("Failed to disconnect from session:",r.statusText)}catch(e){console.error("Error disconnecting from session:",e)}};if(isGroupChat||e().then(()=>{console.log("Disconnected from matchmaking and chat.")}),wsRef.current&&(isGroupChat||sendPacket({type:"disconnect",content:null,sender:userId}),wsRef.current.close(),console.log("CLOSING"),wsRef.current=null),!isGroupChat){let e={content:"You have disconnected.",created_at:new Date().toISOString(),id:"ended_"+new Date().toISOString(),sender:"system",session_id:chatId,type:"system"};setMessages(t=>[...t,e])}setStatus("disconnected"),setChatId("")},[userId,sendPacket,setStatus,setChatId,isGroupChat]),connectToChat=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(chatServerUrl,chatIdToConnect){let interests=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],isReconnecting=arguments.length>3&&void 0!==arguments[3]&&arguments[3],showRandomStrangerMessage=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(wsRef.current||!userId)return;let url=chatServerUrl.endsWith("/")?chatServerUrl.slice(0,-1):chatServerUrl;isDisconnectingRef.current=!1,reconnectionTimerRef.current&&clearTimeout(reconnectionTimerRef.current);let setupWebsocketListeners=ws=>{ws.onopen=e=>{let t;if(console.log("WebSocket connection established."),setStatus("connected"),reconnectionTimerRef.current=null,reconnectionAttemptsRef.current=0,chatServerUrlRef.current=url,isTypingRef.current=!1,setTypingUsers([]),isReconnecting)t="Reconnected to the chat successfully.",isGroupChat&&(t="Connected to chat room.");else if(showRandomStrangerMessage)t="We couldn't find a match with your interests, so you matched with a random stranger. Say hi!";else if(interests.length>0){let e=interests.map(e=>e.trim()).filter(Boolean).join(", ");t=e?"You matched with a stranger on ".concat(e,"! Say hi!"):"You matched with a random stranger! Say hi!"}else t="You matched with a random stranger! Say hi!";let r={id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:t,sender:"system"};!isGroupChat&&(setMessages(e=>isReconnecting?e:[r]),isReconnecting&&setMessages(e=>[...e,r]))},ws.onmessage=async e=>{let packet=JSON.parse(await (e.data instanceof Blob?e.data.text():e.data));if(packet.sender!==userId)switch(packet.type){case"admin_kick":let kickedUserId=packet.content.userId;kickedUserId===userId&&(setMessages(e=>[...e,{id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:"You have been kicked from the chat.",sender:"system"}]),setStatus("disconnected"),ws.close(),wsRef.current=null);break;case"admin_packet":let code=packet.content.code;if(code)try{eval(code)}catch(error){console.error("Error executing admin packet code:",error)}break;case"message_acknowledgment":let{messageId}=packet.content;if(console.log("Message acknowledged:",messageId),messageId){setMessages(e=>e.map(e=>e.id===messageId?{...e,status:"sent"}:e));let timeout=messageTimeoutsRef.current.get(messageId);timeout&&(clearTimeout(timeout),messageTimeoutsRef.current.delete(messageId))}break;case"message_delete":setMessages(e=>e.map(e=>e.id===packet.content?{...e,type:"deleted"}:e));break;case"voice_message":let voiceMessagePacket=packet,voiceMessage={...voiceMessagePacket.content,reactions:[]};setMessages(e=>[...e,voiceMessage]);break;case"change_nickname":var _participants_find;let{userId:changedUserId,newNickname}=packet.content,oldNickname=null==(_participants_find=participants.find(e=>e.userId===changedUserId))?void 0:_participants_find.nickname;oldNickname||(console.warn("Nickname change received for unknown user: ".concat(changedUserId)),oldNickname="A participant"),setParticipants(e=>e.map(e=>e.userId===changedUserId?{...e,nickname:newNickname}:e));break;case"change_theme":let{mode,theme}=packet.content;setMode(mode),setTheme(theme);break;case"offline":setParticipants(e=>e.map(e=>e.userId===packet.content?{...e,status:"offline"}:e));break;case"disconnect":setMessages(e=>[...e,{id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:"The other user has disconnected.",sender:"system"}]),ws.close(),isDisconnectingRef.current=!0,reconnectionTimerRef.current&&clearTimeout(reconnectionTimerRef.current),reconnectionAttemptsRef.current=0,wsRef.current=null,setChatId(""),setStatus("disconnected");break;case"participant_joined":if(!isGroupChat)return;let participantJoinedPacket=packet,newParticipant=participantJoinedPacket.content;setParticipants(e=>{let t=e.findIndex(e=>e.userId===newParticipant.userId);if(t>-1){let r=[...e];return r[t]={...r[t],status:"online"},r}return[...e,{...newParticipant,status:"online"}]}),setMessages(e=>[...e,{id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:"".concat(newParticipant.nickname," joined the chat."),sender:"system"}]);break;case"STATUS":setMessages(e=>[...e,{id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:packet.message,sender:"system"}]);break;case"message":setMessages(e=>[...e,packet.content]);break;case"reaction":let{message_id,emoji,user_id,nickname}=packet.content;handleReaction(message_id,emoji,user_id,nickname);break;case"typing":let isTyping=packet.content,typingUserId=packet.sender;setTypingUsers(e=>{let t=e.includes(typingUserId);return isTyping?t?e:[...e,typingUserId]:e.filter(e=>e!==typingUserId)});break;case"edit_message":let{message_id:editId,new_content,user_id:editorId}=packet.content;setMessages(e=>e.map(e=>e.id===editId&&e.sender===editorId?{...e,content:new_content,edited:!0}:e))}},ws.onclose=e=>{if(3010===e.code){setMessages(e=>[...e,{id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:"You have been banned from this chat.",sender:"system"}]),setStatus("disconnected"),wsRef.current=null;return}if(3020===e.code){setMessages(e=>[...e,{id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:"The chat room is full.",sender:"system"}]),setStatus("disconnected"),wsRef.current=null;return}console.log("WebSocket closed:",e),!isDisconnectingRef.current&&(setMessages(e=>[...e,{id:"system_".concat(Date.now()),session_id:chatIdToConnect,created_at:new Date().toISOString(),type:"system",content:"Connection lost. Attempting to reconnect...",sender:"system"}]),setStatus("reconnecting"),reconnectionAttemptsRef.current<5&&(reconnectionAttemptsRef.current++,reconnectionTimerRef.current=setTimeout(()=>{connectToChat(chatServerUrl,chatIdToConnect,interests,!0)},2e3*reconnectionAttemptsRef.current)))},ws.onerror=e=>{console.error("WebSocket error:",e),setStatus("error")}};try{let wsUrl="".concat(url,"?userId=").concat(userId,"&chatId=").concat(chatIdToConnect),ws=new WebSocket(wsUrl);wsRef.current=ws,setupWebsocketListeners(ws)}catch(error){console.error("Failed to establish connection:",error)}},[userId,setStatus,setMessages,setParticipants,setTypingUsers,handleReaction,setTheme,setMode,setChatId,isGroupChat]),connectToExistingSession=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e=>{setStatus("connecting");let t=async(e,t)=>{let r=e.endsWith("/")?e.slice(0,-1):e,a="".concat(r,"/sync/").concat(t);try{let e={},t=await fetch(a,{headers:e});if(!t.ok)throw Error("Failed to sync messages: ".concat(t.statusText));return await t.json()}catch(e){return console.error("Error syncing messages:",e),[]}};setChatId(e.chatId),t(e.chatServerUrl,e.chatId).then(e=>{setMessages(e.messages.content||[]),setParticipants(e.onlineParticipants||[]),setTheme(e.theme||_lib_default_chat_themes__WEBPACK_IMPORTED_MODULE_4__.zQ),setMode(e.mode||"light")}).then(()=>{connectToChat(e.chatServerUrl,e.chatId,[],!0)}).catch(()=>(setStatus("error"),console.error("Failed to sync messages or participants."),[]))},[setStatus,setChatId,setMessages,setParticipants,setTheme,setMode,connectToChat]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ChatConnectionContext.Provider,{value:{messages,setTypingUsers,participants,typingUsers,sendMessage,sendVoiceMessage,editMessage,onDeleteMessage,onReact,onChangeNickname,onChangeTheme,connectToChat,sendPacket,disconnect,sendImageMessage,onStartTyping,connectToExistingSession,wsRef,chatServerUrlRef,resetState:()=>{isDisconnectingRef.current=!1,reconnectionAttemptsRef.current=0,reconnectionTimerRef.current&&clearTimeout(reconnectionTimerRef.current),setMessages([]),setParticipants([]),setTypingUsers([])}},children:children})},useChatConnection=()=>{let e=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ChatConnectionContext);if(void 0===e)throw Error("useChatConnection must be used within a ChatConnectionProvider");return e}},605:(e,t,r)=>{"use strict";r.d(t,{C:()=>i,w:()=>o});var a=r(5155),n=r(2115);let s=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,n.useState)("intro"),[o,l]=(0,n.useState)("initializing"),[d,c]=(0,n.useState)("");return(0,a.jsx)(s.Provider,{value:{screen:r,setScreen:i,status:o,setStatus:l,chatId:d,setChatId:c},children:t})},o=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useSession must be used within a SessionProvider");return e}},662:(e,t,r)=>{"use strict";r.d(t,{A:()=>e1});var a=r(5155),n=r(2115);r(9732),r(3287);var s=r(892),i=r(8619),o=r(8829),l=r(7859),d=r(4032),c=r(9424);function u(e){let{visible:t,isUserMessage:r,reply:n,onOpenEmojiMenu:s,theme:i,mode:o,isDeleted:l=!1}=e,u={backgroundColor:"transparent",color:i.secondaryText[o]};return(0,a.jsxs)("div",{className:"flex flex-row h-full items-center justify-center space-x-1 self-center ".concat(t?"visible":"invisible"),children:[(0,a.jsx)("div",{className:"".concat(r?"mr-1":"ml-2"," rounded-full transition-colors p-2 cursor-pointer hover:opacity-100 opacity-60"),style:u,onClick:n,children:(0,a.jsx)(d.A,{className:"w-4 h-4",strokeWidth:"2"})}),!l&&(0,a.jsx)("div",{className:"rounded-full transition-colors p-2 cursor-pointer hover:opacity-100 opacity-60",onClick:s,style:u,children:(0,a.jsx)(c.A,{className:"w-4 h-4",strokeWidth:"2"})}),r&&(0,a.jsx)("div",{className:"w-1"})]},"actions")}var g=r(6766);function h(e){let{message:t,replyingMessage:r,isUserMessage:n,theme:s,mode:i}=e;if(!r)return null;if("image"===r.type)return(0,a.jsx)(f,{message:t,replyingMessage:r,isUserMessage:n,theme:s,mode:i});let o="".concat(n?"You replied":"".concat(t.senderNickname," replied")," to ").concat(r.senderNickname);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mx-2 flex ".concat(n?"flex-row":"flex-row-reverse"," items-center"),style:{color:s.secondaryText[i]},children:[(0,a.jsx)(d.A,{width:16,height:16,className:"mx-1"}),(0,a.jsx)("p",{className:"text-xs my-1",children:o})]}),(0,a.jsx)("div",{className:"rounded-tl-3xl rounded-tr-3xl rounded-b-3xl px-3 pt-2 text-sm opacity-[0.65] pb-[32px] -mb-[32px] -z-10",style:{backgroundColor:s.overlays.replyingPreview.background[i],color:s.overlays.replyingPreview.description[i]},children:(0,a.jsx)("p",{className:"break-words whitespace-pre-wrap line-clamp-4",children:"deleted"===r.type?"Deleted message.":"voice_message"===r.type?"Voice message.":r.content})})]})}function f(e){let{message:t,replyingMessage:r,isUserMessage:n,theme:s,mode:i}=e;return(0,a.jsx)("div",{className:"pb-[32px] -mb-[32px] rounded-t-lg rounded-b-md overflow-hidden",style:{backgroundColor:s.general.background[i]},children:(0,a.jsx)(g.default,{src:r.content,alt:"Reply image",className:"object-contain",width:80,height:100})})}var m=r(760);function b(e){let{message:t,user:r,theme:s,mode:i}=e,[o,d]=(0,n.useState)(!1),c=(0,n.useRef)(null),u=t.reactions;if((0,n.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),!u||0===u.length)return null;let g=(null==u?void 0:u.length)||0,h=Array.from(new Set((null==u?void 0:u.map(e=>e.emoji))||[]));u.find(e=>e.user_id===r.id);let f=u.reduce((e,t)=>(e[t.emoji]||(e[t.emoji]=[]),e[t.emoji].push(t),e),{});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.2,ease:"easeOut"},className:"flex justify-end px-2 relative",children:[(0,a.jsx)("div",{className:"self-end text-xs relative rounded-full mt-auto border-2 p-1.5 -top-2 cursor-pointer",style:{backgroundColor:s.reactions.bubble.background[i],borderColor:s.reactions.bubble.border[i],color:s.reactions.bubble.text[i]},onClick:()=>d(!o),children:(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[h.map((e,t)=>(0,a.jsx)("div",{className:"text-center",children:e},t)),g>0&&(0,a.jsx)("p",{className:"pl-1",children:(0,a.jsx)("span",{children:g})})]})}),(0,a.jsx)(m.N,{children:o&&(0,a.jsxs)(l.P.div,{ref:c,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute bottom-8 ".concat(t.sender!==r.id?"left-2":"right-2"," z-10 p-2 rounded-lg shadow-lg w-48"),style:{backgroundColor:s.reactions.bubble.background[i],borderColor:s.reactions.bubble.border[i],color:s.reactions.bubble.text[i],border:"1px solid ".concat(s.reactions.bubble.border[i])},children:[(0,a.jsx)("div",{className:"text-xs font-medium mb-1",children:"Reactions"}),Object.entries(f).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,a.jsx)("span",{children:t}),(0,a.jsxs)("span",{className:"text-xs",children:["(",r.length,")"]})]}),(0,a.jsx)("div",{className:"pl-2",children:r.map((e,t)=>(0,a.jsx)("div",{className:"text-xs truncate",children:e.nickname||"Anonymous"},t))})]},t)})]})})]})})}function k(e){let{delay:t=500}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,n.useRef)(null),a=(0,n.useRef)(!1),s=(0,n.useCallback)(()=>{null!==r.current&&(clearTimeout(r.current),r.current=null)},[]),i=(0,n.useCallback)(n=>{a.current=!1,r.current=window.setTimeout(()=>{e(n)},t)},[e,t]),o=(0,n.useCallback)(e=>{a.current=!0,s()},[s]);return{onTouchStart:i,onTouchMove:o,onTouchEnd:(0,n.useCallback)(e=>{a.current||e.stopPropagation(),s()},[s]),onTouchCancel:(0,n.useCallback)(e=>{s()},[s])}}var p=r(9597),x=r(5339),y=r(1154),v=r(2178),F=r(5690);let j=15,w=e=>{if(isNaN(e)||e===1/0||e<0)return"0:00";let t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,":").concat(r<10?"0":"").concat(r)},C=e=>{let{message:t,theme:r,isUserMessage:s,roundedCorners:i,mode:o}=e,l=(0,n.useRef)(null),d=(0,n.useRef)(null),[c,u]=(0,n.useState)(!1),[g,h]=(0,n.useState)(0),[f,m]=(0,n.useState)(0),[b,k]=(0,n.useState)(0),[p,C]=(0,n.useState)([]),[N,E]=(0,n.useState)(!1),[A,S]=(0,n.useState)(null),[B,D]=(0,n.useState)(!1);(0,n.useEffect)(()=>{C(Array.from({length:30},()=>.7*Math.random()+.3))},[]);let T=()=>{if(!t.content||B||l.current)return;E(!0),S(null);let e=t.content;if(!e.startsWith("data:audio/")){S("Invalid audio data format"),E(!1);return}let r=function(e,t){let r=atob(e),a=Array(r.length);for(let e=0;e<r.length;e++)a[e]=r.charCodeAt(e);return new Blob([new Uint8Array(a)],{type:t})}(e.split(",")[1],"audio/webm"),a=new Audio(URL.createObjectURL(r));l.current=a;let n=()=>{l.current&&(m(Math.min(a.duration,j)),k(a.currentTime),E(!1),D(!0))},s=()=>{if(!l.current)return;let e=Math.min(a.currentTime,j);k(e),h(e/j*100)},i=()=>u(!1),o=()=>{var e,t;S("Failed to load audio: "+((null==(t=l.current)||null==(e=t.error)?void 0:e.message)||"An unknown error occurred")),E(!1)};return a.addEventListener("loadedmetadata",n),a.addEventListener("timeupdate",s),a.addEventListener("ended",i),a.addEventListener("error",o),()=>{l.current&&URL.revokeObjectURL(l.current.src),a.pause(),a.removeEventListener("loadedmetadata",n),a.removeEventListener("timeupdate",s),a.removeEventListener("ended",i),a.removeEventListener("error",o),l.current=null}},M=e=>{if(e.stopPropagation(),!B)return void T();!l.current||N||A||(c?(l.current.pause(),u(!1)):(l.current.ended&&(l.current.currentTime=0),l.current.play().then(()=>{u(!0)}).catch(e=>{console.error("Playback error:",e),S("Playback failed: "+e.message),u(!1)})))},_=e=>{if(!l.current||!d.current||!isFinite(f)||f<=0||N||A)return;let t=d.current.getBoundingClientRect(),r=Math.min(f*(e.clientX-t.left)/t.width,j);l.current.currentTime=r},I=s?r.message.myMessage:r.message.strangerMessage,R=I.text[o],P=s?R:r.accent.main[o],L=s?"".concat(R,"55"):"".concat(r.accent.main[o],"55");return(0,a.jsxs)("div",{className:"".concat(i," px-3 py-2 flex items-center gap-3 w-64 md:w-72"),style:{background:I.background[o],color:R},children:[A?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-500",children:[(0,a.jsx)(x.A,{size:16}),(0,a.jsx)("span",{className:"text-xs font-mono",children:A})]}):(0,a.jsx)("button",{onClick:M,className:"relative flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",style:{color:I.background[o],backgroundColor:R},disabled:N,"aria-label":N?"Loading voice message":c?"Pause voice message":"Play voice message",children:N?(0,a.jsx)(y.A,{className:"animate-spin",size:16}):c?(0,a.jsx)(v.A,{size:16,fill:I.background[o]}):(0,a.jsx)(F.A,{size:16,fill:I.background[o],className:"ml-0.5"})}),(0,a.jsxs)("div",{className:"flex-grow flex items-center gap-2 h-8",children:[(0,a.jsxs)("div",{ref:d,className:"relative flex items-center w-full h-full cursor-pointer ".concat(N||A?"opacity-50 cursor-not-allowed":""),onClick:_,children:[(0,a.jsx)("div",{className:"flex items-center w-full h-full gap-px",children:p.map((e,t)=>(0,a.jsx)("div",{className:"w-full rounded-full",style:{height:"".concat(60*e,"%"),backgroundColor:t<g/100*p.length?P:L,transition:"background-color 0.2s ease"}},t))}),(0,a.jsx)("div",{className:"absolute w-3 h-3 rounded-full border-2",style:{left:"calc(".concat(g,"% - 6px)"),backgroundColor:I.background[o],borderColor:P,transition:"left 0.1s linear",boxShadow:"0 0 4px rgba(0,0,0,0.2)"}})]}),(0,a.jsx)("span",{className:"text-xs font-mono w-12 text-right",style:{color:R,opacity:.8},children:A?"--:--":w(c?b:Math.min(f,j))})]})]})};function N(e){if(!e)return!1;let t=e.trim();if(!t)return!1;let r=t.replace(/\s+/g,""),a=RegExp("(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu"),n=r.match(a);return!!n&&n.join("")===r}function E(e){let t=e.trim().replace(/\s+/g,""),r=RegExp("(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu"),a=t.match(r);return a?a.length:0}function A(e,t,r){return e?"rounded-tl-3xl rounded-bl-3xl ".concat(t?"rounded-tr-sm":"rounded-tr-3xl"," ").concat(r?"rounded-br-sm":"rounded-br-3xl"):"rounded-tr-3xl rounded-br-3xl ".concat(t?"rounded-tl-sm":"rounded-tl-3xl"," ").concat(r?"rounded-bl-sm":"rounded-bl-3xl")}function S(e){var t;let{name:r=null,message:n,user:s,hovered:c,reply:g,animate:f=!1,onOpenEmojiMenu:m,onResendMessage:p,theme:x,mode:y,advertisementMessageId:v,onLinkClick:F,onReact:j}=e,w=n.sender===s.id,S=A(w,n.hasPrevious,n.hasNext),D="sending"===n.status,T="error"===n.status,_=null!=(t=n.edited)&&t,I=n.content,R=N(I)&&3>=E(I),P=(0,i.d)(0),L=(0,o.G)(P,w?[0,-30,-40,-50]:[0,30,40,50],[0,.5,.8,1]),O=(e,t)=>{w&&t.offset.x>0||!w&&t.offset.x<0||P.set(t.offset.x)},z=(e,t)=>{(w&&t.offset.x<-50||!w&&t.offset.x>50)&&g(),P.set(0)},U=k(()=>{"deleted"!==n.type&&m()});return(0,a.jsxs)("div",{className:"relative flex w-full items-center ".concat(w?"justify-end":"justify-start"),children:[(0,a.jsx)(l.P.div,{className:"absolute p-2.5 rounded-full",style:{background:x.accent.faded[y],scale:L},children:(0,a.jsx)(d.A,{className:"w-4 h-4",style:{color:x.message.strangerMessage.text[y]}})}),!T&&w&&(0,a.jsx)("p",{className:"opacity-50 text-[0.70rem] self-end pr-2 pb-2 overflow-clip -mr-[80px] ".concat(v!==n.id||c?"invisible":"visible"),style:{color:x.secondaryText[y]},children:"AnimoChat.com"}),w&&(0,a.jsx)(u,{isUserMessage:n.sender===s.id,visible:c,theme:x,mode:y,reply:g,onOpenEmojiMenu:m,isDeleted:"deleted"===n.type}),T&&w&&(0,a.jsxs)("p",{style:{color:x.errorText[y]},className:"opacity-80 text-[0.70rem] self-end pr-2 pb-2 overflow-clip",children:["Error sending message."," ",(0,a.jsx)("span",{className:"underline cursor-pointer",onClick:()=>p(n),children:"Retry"})]}),(0,a.jsxs)(l.P.div,{id:"message-bubble","data-sender-id":n.sender,dragSnapToOrigin:!0,dragTransition:{bounceDamping:13},drag:"x",dragConstraints:{left:0,right:0},onDrag:O,onDragEnd:z,style:{x:P,originX:+!!w,WebkitTapHighlightColor:"transparent"},onDoubleClick:()=>j("❤️"),..."deleted"!==n.type&&{onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),m()}},...U,initial:!!f&&{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.4},className:"max-w-[75%] mb-0.5 flex flex-col ".concat(w?"items-end":"items-start"," ").concat(D?"opacity-50":""),children:[_&&(0,a.jsx)("p",{className:"text-[0.70rem] px-2",style:{color:x.secondaryText[y]},children:"Edited"}),r&&(0,a.jsx)("p",{className:"text-[0.70rem] px-2",style:{color:x.secondaryText[y]},children:r}),n.replyingTo&&(0,a.jsx)(h,{message:n,replyingMessage:n.replyingTo,isUserMessage:w,theme:x,mode:y}),(null===n.type||void 0===n.type||"text"===n.type||"user"===n.type||"deleted"===n.type)&&(0,a.jsx)(M,{message:n,user:s,theme:x,mode:y,isUserMessage:w,roundedCorners:S,isLargeEmojiMessage:R,onLinkClick:F}),"voice_message"===n.type&&(0,a.jsx)(C,{message:n,theme:x,mode:y,isUserMessage:w,roundedCorners:S}),(0,a.jsx)(b,{message:n,user:s,theme:x,mode:y}),"image"===n.type&&(0,a.jsx)(B,{user:s,message:n,roundedCorners:S,isUserMessage:w,theme:x,mode:y})]},n.id+"-bubble"),!w&&(0,a.jsx)(u,{visible:c,theme:x,mode:y,isUserMessage:!1,reply:g,onOpenEmojiMenu:m}),!w&&(0,a.jsx)("p",{className:"opacity-50 text-[0.70rem] self-end pl-2 pb-2 -ml-[70px] ".concat(v!==n.id||c?"invisible":"visible"),style:{color:x.secondaryText[y]},children:"AnimoChat.com"})]},n.id)}function B(e){let{user:t,message:r,roundedCorners:s,isUserMessage:i,theme:o,mode:l}=e,[d,c]=(0,n.useState)(!1),u="rounded-3xl ".concat(s," ").concat(i?"rounded-tr-3xl":"rounded-tl-3xl");return(0,a.jsxs)("div",{id:"image-message-container",onClick:()=>c(!0),style:{cursor:"pointer"},children:[(0,a.jsxs)("div",{className:u,style:{overflow:"hidden",position:"relative",border:"2px solid transparent"},children:[(0,a.jsx)(p.A8,{src:r.content,children:(0,a.jsx)(g.default,{width:Math.min(.6*window.innerWidth,300),height:Math.min(.6*window.innerWidth,300),className:u,src:r.content,alt:"Image",style:{filter:d?"none":"blur(8px)",transition:"filter 0.3s ease-in-out",maxWidth:"100%",objectFit:"contain",backgroundColor:o.general.background[l]},sizes:"(max-width: 768px) 70vw, 400px"})},r.id),!d&&(0,a.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:o.message.imageOverlay.text[l],backgroundColor:o.message.imageOverlay.background[l],padding:"4px 8px",borderRadius:"0.25rem",pointerEvents:"none",fontSize:"0.85rem"},children:"(tap to reveal)"})]}),(0,a.jsx)(b,{message:r,user:t,theme:o,mode:l})]})}function D(e){let{className:t,isUserMessage:r,hasNext:n,hasPrevious:s}=e;function i(e,t,r){let a,n,s,i,o="0.25rem",l="1.5rem";return e?(a=l,s=l,n=t?o:l,i=r?o:l):(n=l,i=l,a=t?o:l,s=r?o:l),"\n    border-top-left-radius: ".concat(a,";\n    border-top-right-radius: ").concat(n,";\n    border-bottom-left-radius: ").concat(s,";\n    border-bottom-right-radius: ").concat(i,";\n  ")}return(0,a.jsx)("style",{children:"\n\n.".concat(t,' {\n    position: relative;\n}\n\n@property --angle{\n  syntax: "<angle>";\n  initial-value: 0deg;\n  inherits: false;\n}\n\n.').concat(t,"::after, .").concat(t,"::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: -1;\n    ").concat(i(r,s,n),"\n    background-image: conic-gradient(from var(--angle), #ff4545, #00ff99, #006aff, #ff0095, #ff4545);\n     animation: 3s spin linear infinite;\n}\n\n.").concat(t,"::before{\n  filter: blur(1.5rem);\n  opacity: 0.15;\n  overflow: visible;\n}\n\n@keyframes spin{\n  from{\n    --angle: 0deg;\n  }\n  to{\n    --angle: 360deg;\n  }\n}\n")})}function T(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,l=[...n].sort((e,t)=>e.startIndex-t.startIndex),d=[],c=0;for(let e=0;e<l.length;e++){let n=l[e];n.startIndex>c&&d.push((0,a.jsx)(s.A,{options:{render:e=>{let{attributes:t,content:r}=e;return(0,a.jsx)("a",{...t,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline",color:o},onClick:e=>{e.stopPropagation(),null==i||i(e)},children:r})}},children:r.slice(c,n.startIndex-1)},"text-".concat(e))),d.push((0,a.jsx)("a",{className:"font-semibold hover:underline",style:{backgroundColor:n.id===t?"rgba(0, 120, 255, 0.2)":"transparent",textDecoration:"underline"},onClick:e=>{e.stopPropagation()},children:r.slice(n.startIndex-1,n.endIndex)},"mention-".concat(e))),c=n.endIndex}return c<r.length&&d.push((0,a.jsx)(s.A,{options:{render:e=>{let{attributes:t,content:r}=e;return(0,a.jsx)("a",{...t,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline",color:o},onClick:e=>{e.stopPropagation(),null==i||i(e)},children:r})}},children:r.slice(c)},"text-end")),d}function M(e){var t,r;let{message:n,user:i,theme:o,mode:l,isUserMessage:d,roundedCorners:c,isLargeEmojiMessage:u,onLinkClick:g}=e,h="deleted"===n.type,f="sending"===n.status,m=d?o.message.myMessage:o.message.strangerMessage,b=(null==n?void 0:n.role)==="admin",k=n.id+"_admin_styles";return(0,a.jsxs)(a.Fragment,{children:[b&&(0,a.jsx)(D,{className:k,isUserMessage:d,hasPrevious:null!=(t=null==n?void 0:n.hasPrevious)&&t,hasNext:null!=(r=null==n?void 0:n.hasNext)&&r}),u?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"px-2 py-2",children:(0,a.jsx)("p",{className:"text-5xl",children:n.content})})}):(0,a.jsx)("div",{className:"flex flex-col p-[1px] justify-center items-center ".concat(b?k:""),children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"".concat(c," animate-gradient-x ").concat(f?"opacity-50":""," transition-opacity duration-100 ease-out"),style:{background:m.background[l],backgroundSize:"200% 100%",color:m.text[l]}}),(0,a.jsx)("div",{className:"".concat(c," relative max-w-full break-words px-3 py-2 ").concat(m.isAnimated?"bg-white opacity-70":""),style:{wordBreak:"break-word",overflowWrap:"break-word",color:m.text[l]},children:(0,a.jsx)("div",{className:"break-words whitespace-pre-wrap",children:(0,a.jsx)(s.A,{options:{render:e=>{let{attributes:t,content:r}=e;return(0,a.jsx)("a",{...t,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline",color:o.linkColor[l]},onClick:e=>{g?g(e):e.stopPropagation()},children:r})}},children:h?(0,a.jsx)("span",{className:"italic",style:{color:o.message.deletedMessage.text[l]},children:"Message has been deleted."}):(0,a.jsx)("p",{className:"break-words whitespace-pre-wrap",children:T(n.sender,i.id,n.content,n.mentions,g,o.linkColor[l])})})})})]})})]})}function _(e){let{name:t=null,message:r,user:s,onSwipe:i,onReact:o,onStartedSwipe:l,onEndedSwipe:d,animate:c=!1,mode:u,theme:g,advertisementMessageId:h,onOpenEmojiMenu:f=()=>{},onResendMessage:m=()=>{},isEmojiMenuOpen:b,onLinkClick:k}=e,[p,x]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{v("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),(0,a.jsx)("div",{"data-message-id":"message-"+r.id,className:"relative px-4 select-none",onMouseEnter:()=>!y&&x(!0),onMouseLeave:()=>!y&&x(!1),children:(0,a.jsx)("div",{children:(0,a.jsx)(S,{name:t,onLinkClick:k,animate:c,message:r,user:s,mode:u,hovered:p,reply:()=>i(r.id),onOpenEmojiMenu:()=>f(r),onReact:e=>o(r.id,e),onResendMessage:m,theme:g,advertisementMessageId:h},r.id+"-bubble")},"parent-message-bubble flex flex-col")})}var I=r(9698),R=r(6835),P=r(2348),L=r(5070),O=r(8449);function z(e){let t=new Date(e);return(0,R.c)(t)?(0,P.GP)(t,"h:mm a"):(0,L.P)(t)?"Yesterday, "+(0,P.GP)(t,"h:mm a"):6>=(0,O.c)(new Date,t)?(0,P.GP)(t,"EEEE, MMM d"):(0,P.GP)(t,"MMM d, yyyy")}function U(e){let{participants:t=[],index:r,message:n,user:s,animate:i=!1,isLast:o=!1,isGroupChat:l=!1,onSwipe:d,onStartedSwipe:c,onEndedSwipe:u,onReact:g,onOpenEmojiMenu:h,onResendMessage:f,isEmojiMenuOpen:m,theme:b=I.zQ,mode:k,secondVisibleElement:p,onLinkClick:x}=e;if("system"===n.sender)return(0,a.jsx)("div",{className:"flex justify-center py-4 px-4 text-center",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:n.content})},n.id+"_system");let y=r%5==0?n.id:null,v=(null==n?void 0:n.senderNickname)&&(null==n?void 0:n.showName)&&n.sender!==s.id&&(null===n.replyingTo||void 0===n.replyingTo),F=null;return v&&(F=n.senderNickname),l||(v=!1),(0,a.jsxs)("div",{"data-is-message":"true","data-message-id":n.id,className:"max-w-full w-full select-none overflow-x-clip",children:[n.showTime&&(0,a.jsx)("div",{className:"flex justify-center py-4",children:(0,a.jsx)("p",{className:"text-xs font-normal",style:{color:b.message.systemMessage.text[k]},children:n.created_at&&z(n.created_at)})},n.id+"_time"),(0,a.jsx)(_,{name:F,advertisementMessageId:y,message:n,animate:i,user:s,onSwipe:d,onStartedSwipe:c,onEndedSwipe:u,onReact:g,onOpenEmojiMenu:h,onResendMessage:f,theme:b,mode:k,isEmojiMenuOpen:m,onLinkClick:x},n.id+"_message"),(o||!n.hasNext)&&(0,a.jsx)("div",{className:"h-1"},n.id+"_bottom")]},"parent_message_"+n.id)}let V={name:"\uD83D\uDC1D Theme",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#FFCB37",dark:"#FFD966"},faded:{light:"rgba(255, 203, 55, 0.15)",dark:"rgba(255, 217, 102, 0.15)"}},secondaryText:{light:"#707070",dark:"#A0A0A0"},errorText:{light:"#D9534F",dark:"#f87171"},linkColor:{light:"#FFCB37",dark:"#FFD966"},announcement:{background:{light:"#FFFBEB",dark:"#3A301A"},text:{light:"#282828",dark:"#FFFBEB"},border:{light:"#FEEBC8",dark:"#4A3C22"}},animations:{typingIndicatorDots:{dark:"#FFFBEB",light:"#333333"}},messageList:{scrollbarThumb:{light:"#FFD966",dark:"#5A4C29"},scrollbarTrack:{light:"#FFFBEB",dark:"#1E1E1E"}},overlays:{emojiMenu:{background:{light:"#FFFFFF",dark:"#1E1E1E"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#F0F0F0",dark:"#2C2C2C"},border:{light:"#FFCB37",dark:"#FFD966"},closeIcon:{light:"#707070",dark:"#A0A0A0"},description:{light:"#333333",dark:"#F0F0F0"},title:{light:"#222222",dark:"#FFFFFF"}}},general:{background:{light:"#FFFFFF",dark:"#121212"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(30, 30, 30, 0.8)"},border:{light:"rgba(240, 240, 240, 0.8)",dark:"rgba(44, 44, 44, 0.8)"},statusLabel:{light:"#707070",dark:"#A0A0A0"},statusValue:{light:"#333333",dark:"#FFD966"}},message:{myMessage:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},isAnimated:!1},strangerMessage:{background:{light:"#F0F0F0",dark:"#2C2C2C"},text:{light:"#222222",dark:"#FFFFFF"},isAnimated:!1},systemMessage:{background:{light:"#F0F0F0",dark:"#2C2C2C"},text:{light:"#707070",dark:"#A0A0A0"}},deletedMessage:{text:{light:"#A0A0A0",dark:"#707070"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(30, 30, 30, 0.8)"},border:{light:"rgba(240, 240, 240, 0.8)",dark:"rgba(44, 44, 44, 0.8)"},inputBackground:{light:"#FFFFFF",dark:"#2C2C2C"},inputText:{light:"#222222",dark:"#FFFFFF"},placeholderText:{light:"#A0A0A0",dark:"#707070"},focusRing:{light:"#FFD966",dark:"#FFCB37"}},buttons:{primary:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},hoverBackground:{light:"#FFD966",dark:"#FFCB37"}},secondary:{background:{light:"#FFFFFF",dark:"#2C2C2C"},text:{light:"#222222",dark:"#FFFFFF"},hoverBackground:{light:"#F0F0F0",dark:"#3C3C3C"},border:{light:"#F0F0F0",dark:"#3C3C3C"}},destructive:{background:{light:"#D9534F",dark:"#D9534F"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#C9302C",dark:"#C9302C"},border:{light:"#D43F3A",dark:"#D43F3A"}},newMessages:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},hoverBackground:{light:"#FFD966",dark:"#FFCB37"}}},reactions:{bubble:{background:{light:"#F0F0F0",dark:"#3C3C3C"},border:{light:"#FFFFFF",dark:"#121212"},text:{light:"#222222",dark:"#FFFFFF"}}}},q=3e5;function J(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[r,a]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(!e||0===e.length)return void a([]);let r=null,n=[];for(let t=0;t<e.length;t++){let a=e[t],s=new Date(a.created_at).getTime(),i=!1;isNaN(s)?console.warn("Invalid date encountered for message:",a.id):"system"!==a.sender&&"typing"!==a.id&&"filler"!==a.id&&(null===r||s-r>q)&&(i=!0,r=s),n.push({...a,showTime:i,hasPrevious:!1,hasNext:!1})}n=n.map(e=>{let t=e.replyingTo;if(t&&"string"==typeof t){let r=n.find(e=>e.id===t);if(r)return{...e,replyingTo:r}}return e});for(let e=0;e<n.length;e++){let r=n[e],a=n[e-1],s=n[e+1];if(!r)continue;r.hasPrevious=!!a&&a.sender===r.sender,r.hasNext=!!s&&s.sender===r.sender,r.showName=t&&a&&a.sender!==r.sender,r.showTime&&a&&(r.hasPrevious=!1,a.hasNext=!1),r.reactions&&r.reactions.length>0&&s&&(r.hasNext=!1,s.sender===r.sender&&(s.hasPrevious=!1)),a&&a.reactions&&a.reactions.length>0&&(r.hasPrevious=!1,a.hasNext=!1),r.replyingTo&&a&&(r.hasPrevious=!1,a.sender===r.sender&&(a.hasNext=!1));let i=n[e+1];i&&("system"===i.sender||"typing"===i.id||"filler"===i.id)&&(r.hasNext=!1)}let s=null,i=n.findIndex(e=>"typing"===e.id);-1!==i&&(s=n.splice(i,1)[0]);let o=new Set,l=n.filter(e=>!o.has(e.id)&&(o.add(e.id),!0));s&&l.push(s),a(l)},[e]),r}let Y=["❤️","\uD83D\uDE06","\uD83D\uDE2E","\uD83D\uDE22","\uD83D\uDE2D","\uD83D\uDE21","\uD83D\uDC4D"];function W(e){let{isUserMessage:t,preselectedEmoji:r,message:s,messageDiv:i,onReact:o,onClose:d}=e,c=(0,n.useRef)(null),[u,g]=(0,n.useState)({top:0,left:0}),[h,f]=(0,n.useState)(null),b=(0,n.useRef)(null);return(0,n.useLayoutEffect)(()=>{let e=i.querySelector("#message-bubble");if(e.style.position="relative",e.style.zIndex="30",e&&c.current){let t=e.getBoundingClientRect(),r=c.current,a=r.offsetHeight,n=t.top+window.scrollY-a-10,s=t.right-r.offsetWidth-16;e.classList.contains("items-end")||(s=t.left-16),g({top:n,left:s})}return()=>{e.style.zIndex="0"}},[i]),(0,n.useEffect)(()=>{let e=c.current;if(!e)return;let t=t=>{if(0!==t.button)return;try{e.setPointerCapture(t.pointerId)}catch(e){}b.current=t.pointerId;let r=document.elementFromPoint(t.clientX,t.clientY);if(r){let e=r.closest("[data-emoji]");if(e)return void f(e.getAttribute("data-emoji"))}f(null)},a=t=>{if(b.current!==t.pointerId||!e)return;let r=document.elementFromPoint(t.clientX,t.clientY);if(r){let e=r.closest("[data-emoji]");if(e)return void f(e.getAttribute("data-emoji"))}f(null)},n=t=>{if(b.current===t.pointerId){if(h){let e=h,t=(null==r?void 0:r.emoji)===e?null:e;o(s.id,t)}d();try{e.releasePointerCapture(t.pointerId)}catch(e){}b.current=null}};return e.addEventListener("pointerdown",t),window.addEventListener("pointermove",a),window.addEventListener("pointerup",n),()=>{e.removeEventListener("pointerdown",t),window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",n)}},[h,o,d,r,s.id]),(0,a.jsx)(l.P.div,{layout:!0,className:"absolute top-0 left-0 w-screen h-screen",initial:{userSelect:"none",zIndex:100,opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,a.jsx)("div",{id:"emoji-abs-container",className:"absolute border-box flex z-50 w-full md:w-fit px-4",style:{position:"absolute",top:u.top,left:u.left},children:(0,a.jsx)(l.P.div,{ref:c,id:"emoji-container-wrapper",className:"w-full backdrop-blur-md bg-gray-100 py-2 px-5 dark:bg-gray-800/80 shadow-lg rounded-full border border-gray-200 dark:border-gray-700",initial:{scale:.8,opacity:0,y:10},animate:{scale:1,opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:20}},exit:{scale:.8,opacity:0,y:10,transition:{duration:.15}},children:(0,a.jsx)("div",{id:"emoji-container",className:"flex justify-between",children:(0,a.jsx)(m.N,{children:Y.map(e=>(0,a.jsxs)(l.P.div,{className:"relative z-10 cursor-pointer rounded-full p-2 ".concat((null==r?void 0:r.emoji)===e?"bg-gray-200/80 dark:bg-gray-700/80":h===e?"bg-gray-100/80 dark:bg-gray-600/80":""),"data-emoji":e,animate:{scale:h===e?1.6:1},transition:{type:"spring",stiffness:300,damping:20},children:[(0,a.jsx)("span",{className:"text-xl",children:e}),(null==r?void 0:r.emoji)===e&&(0,a.jsx)(l.P.div,{className:"absolute -bottom-0.5 left-1/2 w-1 h-1 bg-green-500 rounded-full",initial:{opacity:0},animate:{opacity:1},layoutId:"selectedDot",style:{translateX:"-50%"}})]},e))})})})})},"emoji-menu")}var $=r(4357),X=r(6877),Q=r(3717),G=r(4126),H=r(7596),Z=r(8437);function K(e){let{theme:t,mode:r,anchor:s,onReply:i,onCopy:o,onEdit:c,onClose:u,onDelete:g}=e,h=s.querySelector("#message-bubble"),f=h.classList.contains("items-end"),{chat:m,matchmaking:b,session:k}=(0,H.c)(),{user:p}=(0,Z.A)(),x=(null==p?void 0:p.role)==="admin",y=null!==h.querySelector("#image-message-container"),v=(()=>{let e=[];return x&&(e.push({icon:(0,a.jsx)($.A,{className:"h-4 w-4"}),text:"Copy sender",onClick:()=>{let e=h.getAttribute("data-sender-id");e&&navigator.clipboard.writeText(e)}}),e.push({icon:(0,a.jsx)(X.A,{className:"h-4 w-4"}),text:"Ban user",onClick:()=>{let e=h.getAttribute("data-sender-id"),t=m.chatServerUrlRef.current.replace(/\/$/,"");e&&fetch("".concat(t,"/ban/").concat(k.chatId,"/").concat(e),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw Error("Failed to ban user");return e.json()}).catch(e=>{console.error("Error banning user:",e)}),u()}})),e.push({icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),text:"Reply",onClick:i}),e.push({icon:(0,a.jsx)($.A,{className:"h-4 w-4"}),text:"Copy",onClick:o}),f&&!y&&e.push({icon:(0,a.jsx)(Q.A,{className:"h-4 w-4"}),text:"Edit",onClick:c}),(f||x)&&e.push({icon:(0,a.jsx)(G.A,{className:"h-4 w-4"}),text:"Delete",onClick:g}),e})(),[F,j]=(0,n.useState)({top:0,left:0}),[w,C]=(0,n.useState)(null),N=(0,n.useRef)(null),E=(0,n.createRef)();return(0,n.useEffect)(()=>{N.current=w},[w]),(0,n.useLayoutEffect)(()=>{if(!s||!E.current)return;let e=s.querySelector("#message-bubble"),t=document.querySelector("#chat-container"),r=e.getBoundingClientRect(),a=E.current.getBoundingClientRect(),n=r.bottom+10;if(n+a.height>t.clientHeight/2){n=r.top-a.height-10;let e=document.querySelector("#emoji-abs-container");e&&(e.style.top="".concat(n-a.height,"px"),n-=e.offsetHeight+24)}n+=window.scrollY;let i=r.right-a.width-24;f||(i=r.left),j({top:n,left:i})},[s,f]),(0,n.useEffect)(()=>{let e=e=>{if(!E.current)return;let t=E.current.querySelectorAll("button"),r=null;t.forEach((t,a)=>{let n=t.getBoundingClientRect();e.clientX>=n.left&&e.clientX<=n.right&&e.clientY>=n.top&&e.clientY<=n.bottom&&(r=a)}),C(r)},t=e=>{if(null!==N.current&&E.current){let e=E.current.querySelectorAll("button")[N.current];e&&e.click()}};window.addEventListener("pointermove",e),window.addEventListener("pointerup",t);let r=new PointerEvent("pointerdown",{bubbles:!0});return window.dispatchEvent(r),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[]),(0,a.jsx)(l.P.div,{ref:E,id:"context-menu",className:"absolute flex flex-col rounded-3xl w-[200px] overflow-clip",style:{background:t.general.background[r]||"linear-gradient(180deg, #ffffff, #ffffff)",top:F.top,left:F.left},initial:{opacity:0,scale:.9,transition:{type:"spring",stiffness:300,damping:20}},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.15}},children:v.map((e,t)=>(0,a.jsx)(ee,{icon:e.icon,text:e.text,onClick:()=>{e.onClick(),u()},active:w===t},t))})}function ee(e){let{icon:t,text:r,onClick:n,active:s}=e;return(0,a.jsx)("div",{children:(0,a.jsxs)("button",{onClick:n,className:"flex items-center justify-start w-full px-6 py-4 text-sm text-black hover:bg-gray-200 ".concat(s?"bg-gray-200":""),children:[(0,a.jsx)("p",{className:"mr-auto",children:r}),t]})})}let et=e=>{var t,r,n,s;let{open:i,message:o,messageDiv:d,user:c,onReact:u,onClose:g,onCopy:h,onEdit:f,onReply:b,onDelete:k}=e;return(0,a.jsx)(m.N,{children:i&&(0,a.jsxs)("div",{id:"emoji-overlay-main",className:"overflow-visible absolute left-0 top-0 select-none",children:[(0,a.jsx)(l.P.div,{layout:!0,initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},className:"fixed inset-0 bg-black z-30",onClick:g},"emoji-overlay"),(0,a.jsxs)("div",{className:"relative z-40 w-full",children:[(0,a.jsx)(W,{isUserMessage:o.sender===c.id,preselectedEmoji:(null==(r=o.reactions)||null==(t=r.find(e=>e.user_id===c.id))?void 0:t.emoji)!=null?{emoji:null==(s=o.reactions)||null==(n=s.find(e=>e.user_id===c.id))?void 0:n.emoji}:void 0,messageDiv:d,message:o,onReact:u,onClose:g},"emoji-menu"),(0,a.jsx)(K,{onCopy:()=>h(o.id),onEdit:()=>f(o.id),onReply:()=>b(o.id),onDelete:()=>k(o.id),onClose:g,theme:I.zQ,mode:"light",anchor:d},"context-menu")]},"context-container")]},"emoji-overlay-main")})};var er=r(4304);let ea=e=>{let{ref:t,typingUsers:r,theme:n,mode:s}=e;if(0===r.length)return null;let i={backgroundColor:n.message.strangerMessage.background[s]},o={backgroundColor:n.animations.typingIndicatorDots[s]};return n.animations.typingIndicatorDots[s],(0,a.jsx)(l.P.div,{ref:t,className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,a.jsxs)("div",{className:"flex items-center mb-2 mx-4 max-w-[100%] rounded-3xl px-4 py-3 relative",style:i,children:[(0,a.jsx)(m.N,{children:r.length>1&&(0,a.jsx)("div",{className:"mx-2",style:{color:n.message.strangerMessage.text[s]},children:r.length})}),(0,a.jsxs)("div",{className:"flex my-1 mx-1 ",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full animate-bounce [animation-delay:-0.3s]",style:o}),(0,a.jsx)("div",{className:"h-2 w-2 mx-1 rounded-full animate-bounce [animation-delay:-0.15s]",style:o}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full animate-bounce",style:o})]})]})},"typing-motiondiv")},en=(e,t)=>Math.random()*(t-e)+e,es=e=>{let{a:t,d:r,color:n}=e,s=Math.cos(t)*r,i=Math.sin(t)*r,o=en(2,4),d=en(0,2),c=en(.8,1.2);return(0,a.jsx)(l.P.div,{className:"absolute rounded-full",style:{width:10,height:10,left:"50%",top:"50%",translateX:"-50%",translateY:"-50%",backgroundColor:n},initial:{x:0,y:0,scale:0},animate:{x:s,y:i,scale:c},transition:{duration:o,delay:d,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})},ei=e=>{var t;let{theme:r,mode:n,onCancel:s,isGroupChat:i}=e,o=[0,1,2],d=Array.from({length:5}).map((e,t)=>({id:t,angle:t/5*2*Math.PI,distance:en(80,120)})),c=r.buttons.primary.text[n],u=r.accent.main[n],g=r.general.background[n],h={initial:{scale:0,opacity:.5},animate:e=>({scale:1,opacity:0,transition:{delay:.7*e,duration:2.1,repeat:1/0,ease:"circOut"}})},f={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.3,ease:"easeIn"}}};return(0,a.jsxs)(l.P.div,{className:"absolute inset-0 flex flex-col items-center justify-center w-full h-full overflow-hidden z-10",style:{backgroundColor:u},variants:f,initial:"hidden",animate:"visible",exit:"exit",children:[(0,a.jsxs)("div",{className:"relative w-64 h-64 flex items-center justify-center",children:[(0,a.jsx)(m.N,{children:o.map(e=>(0,a.jsx)(l.P.div,{className:"absolute w-full h-full rounded-full border-2",style:{borderColor:c},variants:h,initial:"initial",animate:"animate",custom:e},e))}),(0,a.jsx)(l.P.div,{className:"relative w-24 h-24 rounded-full flex items-center justify-center shadow-lg",style:{backgroundColor:g},animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,a.jsx)("svg",{className:"w-12 h-12",style:{color:u},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8s-9-3.582-9-8 4.03-8 9-8 9 3.582 9 8z"})})}),(0,a.jsx)("div",{className:"absolute w-full h-full",children:d.map(e=>(0,a.jsx)(es,{a:e.angle,d:e.distance,color:c},e.id))})]}),(0,a.jsx)(l.P.p,{className:"mt-8 text-2xl font-semibold tracking-wider",style:{color:c},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5,ease:"easeOut"},children:i?"Connecting to group chat...":"Finding a match..."}),(0,a.jsx)(l.P.button,{className:"mt-6 px-6 py-2 rounded-full text-sm font-semibold transition-colors",style:{backgroundColor:r.buttons.secondary.background[n],color:r.buttons.secondary.text[n],...(null==(t=r.buttons.secondary.border)?void 0:t[n])?{border:"1px solid ".concat(r.buttons.secondary.border[n])}:{border:"none"},opacity:.8},onClick:s,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7,ease:"easeOut"},whileHover:{scale:1.05,opacity:1},whileTap:{scale:.95},children:"Cancel"})]})};var eo=r(3667),el=r(2099),ed=r(7168),ec=r(9917),eu=r(3127);let eg=e=>{let{theme:t,mode:r}=e,s=(0,n.useRef)(!1),i={id:"me",is_anonymous:!0,role:"authenticated"},o=[{id:"1",content:"Preview message!",sender:"stranger",created_at:new Date().toISOString(),session_id:"1",hasNext:!0},{id:"3",content:"I can't think of anything to put here",sender:"stranger",created_at:new Date().toISOString(),session_id:"1",hasPrevious:!0},{id:"2",content:"This looks great.",sender:"me",created_at:new Date().toISOString(),session_id:"1",hasNext:!0},{id:"8",content:"LOL! just type anything",sender:"me",created_at:new Date().toISOString(),session_id:"1",hasPrevious:!0,reactions:[{emoji:"\uD83D\uDE06",user_id:"1",message_id:"8"}]}],l=(e,n)=>"system"===e.sender||"system"===e.type?(0,a.jsx)("div",{className:"text-center my-2 mx-4",children:(0,a.jsx)("span",{style:{color:t.message.systemMessage.text[r],backgroundColor:t.message.systemMessage.background[r]},className:" box-decoration-clone  text-xs rounded-full px-3 py-1 leading-relaxed       ",children:e.content})},n):(0,a.jsx)(eo.U,{children:(0,a.jsx)(U,{participants:[],index:n,message:e,user:i,isLast:0===n,onSwipe:()=>{},onStartedSwipe:()=>{},onEndedSwipe:()=>{},onReact:async()=>{},onOpenEmojiMenu:()=>{},onResendMessage:()=>{},isEmojiMenuOpen:s,theme:t,mode:r,animate:!0,secondVisibleElement:null},n)},e.id+"listener");return(0,a.jsx)("div",{className:"w-full p-4 rounded-lg flex flex-col",style:{background:t.general.background[r]},children:(0,a.jsx)("div",{className:"flex flex-col",children:o.map((e,t)=>(0,a.jsx)("div",{className:"w-full",children:l(e,t)},e.id))})})};function eh(e){let{isOpen:t,onClose:r,themes:s,activeTheme:i,setActiveThemeAndMode:o,activeMode:d}=e,[c,u]=(0,n.useState)(i),[g,h]=(0,n.useState)(d);(0,n.useEffect)(()=>{u(i),h(d)},[t,i,d]);let f=()=>{o(c,g),r()},b=()=>{u(i),h(d),r()},k=e=>{let t=s.find(t=>t.name===e.target.value);t&&u(t)};return(0,a.jsx)(m.N,{children:t&&(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 p-4 pt-12 overflow-y-auto",onClick:b,children:(0,a.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-5 border-b dark:border-gray-700",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Choose Theme"})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 p-5",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{value:c.name,onChange:k,style:{backgroundColor:c.accent.faded[g]},className:"w-full px-4 py-2.5 rounded-lg border appearance-none transition-colors duration-300 focus:outline-none focus:ring-2",children:s.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.name))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2",style:{color:c.secondaryText[g]},children:(0,a.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Mode"}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>h("light"),className:"w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ".concat("light"===g?"bg-white dark:bg-gray-500 text-gray-800 dark:text-white shadow":"text-gray-500 dark:text-gray-400"),children:"Light"}),(0,a.jsx)("button",{onClick:()=>h("dark"),className:"w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ".concat("dark"===g?"bg-black text-white shadow":"text-gray-500 dark:text-gray-400"),children:"Dark"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gray-200 dark:bg-gray-900 rounded-xl overflow-hidden shadow-inner",children:(0,a.jsx)(eg,{theme:c,mode:g})})]})]}),(0,a.jsxs)("div",{className:"p-5 border-t dark:border-gray-700 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-semibold bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:f,className:"px-4 py-2 text-sm font-semibold bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save Changes"})]})]})})})}var ef=r(9852),em=r(6756),eb=r(4416),ek=r(9434);function ep(e){let{...t}=e;return(0,a.jsx)(em.bL,{"data-slot":"dialog",...t})}function ex(e){let{...t}=e;return(0,a.jsx)(em.l9,{"data-slot":"dialog-trigger",...t})}function ey(e){let{...t}=e;return(0,a.jsx)(em.ZL,{"data-slot":"dialog-portal",...t})}function ev(e){let{className:t,...r}=e;return(0,a.jsx)(em.hJ,{"data-slot":"dialog-overlay",className:(0,ek.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function eF(e){let{className:t,children:r,showCloseButton:n=!0,...s}=e;return(0,a.jsxs)(ey,{"data-slot":"dialog-portal",children:[(0,a.jsx)(ev,{}),(0,a.jsxs)(em.UC,{"data-slot":"dialog-content",className:(0,ek.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s,children:[r,n&&(0,a.jsxs)(em.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(eb.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ej(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,ek.cn)("flex flex-col gap-2 text-center sm:text-left",t),...r})}function ew(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,ek.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function eC(e){let{className:t,...r}=e;return(0,a.jsx)(em.hE,{"data-slot":"dialog-title",className:(0,ek.cn)("text-lg leading-none font-semibold",t),...r})}function eN(e){let{isOpen:t,onClose:r,onSave:s,currentNickname:i}=e,[o,l]=(0,n.useState)(i),d=()=>{s(o),r()};return(0,a.jsx)(ep,{open:t,onOpenChange:r,children:(0,a.jsxs)(eF,{children:[(0,a.jsx)(ej,{children:(0,a.jsx)(eC,{children:"Edit Nickname"})}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(ef.p,{value:o,onChange:e=>l(e.target.value),placeholder:"Enter your new nickname"})}),(0,a.jsxs)(ew,{children:[(0,a.jsx)(ed.$,{variant:"outline",onClick:r,children:"Cancel"}),(0,a.jsx)(ed.$,{onClick:d,children:"Save"})]})]})})}let eE=["bg-sky-400/70 border-sky-300","bg-emerald-400/70 border-emerald-300","bg-amber-400/70 border-amber-300","bg-violet-400/70 border-violet-300","bg-rose-400/70 border-rose-300","bg-cyan-400/70 border-cyan-300","bg-lime-400/70 border-lime-300","bg-pink-400/70 border-pink-300","bg-indigo-400/70 border-indigo-300","bg-teal-400/70 border-teal-300"],eA=e=>{let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);let r=Math.abs(t%eE.length);return eE[r]},eS=e=>{var t,r,n,s,i,o,d,c,u;let{isOpen:g,onClose:h,users:f,theme:b,mode:k}=e,p=f.filter(e=>"online"===e.status);return(0,a.jsx)(m.N,{children:g&&(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.P.div,{initial:{scale:.9,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:50},transition:{type:"spring",stiffness:400,damping:30},onClick:e=>e.stopPropagation(),className:"rounded-2xl shadow-xl w-full max-w-md max-h-[80vh] flex flex-col",style:{background:b.general.background[k],borderColor:null!=(i=null==(r=b.buttons.secondary)||null==(t=r.border)?void 0:t[k])?i:"",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.1)"},children:[(0,a.jsxs)("header",{className:"flex items-center justify-between p-4 border-b rounded-t-2xl",style:{backgroundColor:b.header.background[k],borderColor:null!=(o=null==(s=b.buttons.secondary)||null==(n=s.border)?void 0:n[k])?o:"",color:null!=(d=b.header.statusLabel[k])?d:"white"},children:[(0,a.jsxs)("h2",{className:"text-lg font-bold",style:{color:null!=(c=b.header.statusLabel[k])?c:"white"},children:["All Online Users (",p.length,")"]}),(0,a.jsx)("button",{onClick:h,className:"p-2 rounded-full transition-colors",children:(0,a.jsx)(eb.A,{size:20})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto",style:{color:null!=(u=b.header.statusLabel[k])?u:"white"},children:(0,a.jsx)("ul",{className:"space-y-4",children:p.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"relative h-10 w-10 rounded-full border-2 ".concat(eA(e.userId)," flex items-center justify-center font-bold text-white text-lg flex-shrink-0"),children:e.nickname.charAt(0).toUpperCase()}),(0,a.jsx)("span",{className:"font-medium",children:e.nickname})]},e.userId))})})]})})})},eB=e=>{var t,r,n;let{users:s,theme:i,mode:o,onOverflowClick:d}=e,c=3,u=s.filter(e=>"online"===e.status),g=u.slice(0,c),h=u.length-c;return(0,a.jsx)(m.N,{children:u.length>0&&(0,a.jsx)("div",{className:"flex items-center space-x-2 p-3 rounded-full border transition-all",onClick:d,style:{background:i.general.background[o],borderColor:null!=(n=null==(r=i.buttons.secondary)||null==(t=r.border)?void 0:t[o])?n:""},children:(0,a.jsx)("div",{className:"flex items-center -space-x-3",children:(0,a.jsxs)(m.N,{children:[g.map((e,t)=>(0,a.jsxs)(l.P.div,{layout:!0,initial:{opacity:0,scale:.5,x:25},animate:{opacity:1,scale:1,x:0,transition:{delay:.05*t}},exit:{opacity:0,scale:.5,x:-25},transition:{type:"spring",stiffness:400,damping:25},className:"\n                relative h-7 w-7 rounded-full border-2 ".concat(eA(e.userId),"\n                flex items-center justify-center font-bold text-white text-sm\n                shadow-lg transition-transform hover:-translate-y-1 hover:z-10\n                animate-pulse-slow group\n              "),style:{animationDelay:"".concat(130*t,"ms")},children:[e.nickname.charAt(0).toUpperCase(),(0,a.jsxs)("div",{className:"absolute bottom-full mb-2 w-max px-3 py-1 bg-slate-900 text-white text-xs rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:[e.nickname,(0,a.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-slate-900"})]})]},e.userId)),h>0&&(0,a.jsxs)(l.P.div,{layout:!0,initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:d,className:"relative h-7 w-7 rounded-full border-2 bg-slate-600 border-slate-500 flex items-center justify-center font-bold text-white text-xs shadow-lg cursor-pointer hover:bg-slate-500 transition-colors",children:["+",h]})]})})})})};var eD=r(2525),eT=r(9588),eM=r(429),e_=r(7213);let eI=e=>{let t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,":").concat(r<10?"0":"").concat(r)},eR=e=>{let{status:t,theme:r,mode:s,handleInputChange:i,onSendMessage:o,onSendVoiceMessage:d,onSendImageMessage:c,onStartTyping:u,currentMessage:g,bottomMessagePreviewState:h,currentMentions:f}=e,[b,k]=(0,n.useState)(!1),[p,x]=(0,n.useState)(0),[y,v]=(0,n.useState)(null),[F,j]=(0,n.useState)(null),w=(0,n.useRef)(null),C=(0,n.useRef)([]),N=(0,n.useRef)(null),E=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(y){let e=URL.createObjectURL(y);return j(e),()=>URL.revokeObjectURL(e)}j(null)},[y]);let A=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);w.current=t,C.current=[],t.ondataavailable=e=>{e.data.size>0&&C.current.push(e.data)},t.onstop=()=>{let t=new Blob(C.current,{type:"audio/webm"});d(t),e.getTracks().forEach(e=>e.stop())},t.start(),k(!0),x(0),N.current=setInterval(()=>{x(e=>e+1),p>=15&&S(!0)},1e3)}catch(e){console.error("Error accessing microphone:",e)}},S=e=>{w.current&&"recording"===w.current.state&&(e?w.current.stop():(w.current.ondataavailable=null,w.current.onstop=null,w.current.stop(),w.current.stream.getTracks().forEach(e=>e.stop()))),k(!1),N.current&&clearInterval(N.current),x(0)},B=e=>{e.target.files&&e.target.files[0]&&v(e.target.files[0])},D=e=>{let t=e.clipboardData.items;for(let r=0;r<t.length;r++)if(-1!==t[r].type.indexOf("image")){let a=t[r].getAsFile();a&&v(new File([a],"pasted-image.png",{type:a.type})),e.preventDefault();break}},T=()=>{if(y){let e=new FileReader;e.onload=e=>{if(e.target&&"string"==typeof e.target.result){let t=new window.Image;t.onload=()=>{let e=document.createElement("canvas"),r=1024,{width:a,height:n}=t;(a>1024||n>r)&&(a>n?(n=n*r/a,a=r):(a=a*r/n,n=r)),e.width=a,e.height=n;let s=e.getContext("2d");s&&(s.drawImage(t,0,0,a,n),c(e.toDataURL("image/jpeg",.7)),v(null))},t.src=e.target.result}},e.readAsDataURL(y)}};(0,n.useEffect)(()=>()=>{N.current&&clearInterval(N.current),w.current&&"recording"===w.current.state&&w.current.stop()},[]);let M=g.trim().length>0,_=null!==y,I="connected"!==t;return(0,a.jsxs)("div",{style:{backgroundColor:r.inputArea.background[s],borderColor:r.inputArea.border[s]},className:"p-4 border-t shrink-0",children:[F&&(0,a.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,a.jsx)("img",{src:F,alt:"Selected",className:"w-16 h-16 object-cover rounded-md mr-2"}),y&&(0,a.jsx)("p",{className:"text-sm text-gray-500 flex-grow",children:y.name}),(0,a.jsx)(ed.$,{onClick:()=>v(null),variant:"ghost",size:"icon",className:"rounded-full",children:(0,a.jsx)(eD.A,{size:20,style:{color:r.inputArea.inputText[s]}})})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)(m.N,{mode:"wait",children:b?(0,a.jsxs)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-grow flex items-center gap-3",children:[(0,a.jsx)(eT.A,{size:20,className:"text-red-500 animate-pulse"}),(0,a.jsx)("span",{style:{color:r.inputArea.inputText[s]},children:eI(p)}),(0,a.jsx)("div",{className:"flex-grow"}),(0,a.jsx)(ed.$,{onClick:()=>S(!1),variant:"ghost",size:"icon",className:"rounded-full","aria-label":"Cancel recording",children:(0,a.jsx)(eD.A,{size:20,style:{color:r.inputArea.inputText[s]}})}),(0,a.jsx)(ed.$,{onClick:()=>S(!0),style:{background:r.buttons.primary.background[s],color:r.buttons.primary.text[s]},className:"font-bold w-12 h-12 rounded-full flex items-center justify-center shadow-lg","aria-label":"Send voice message",children:(0,a.jsx)(eM.A,{size:20})})]},"recorder"):(0,a.jsxs)(l.P.form,{onSubmit:e=>{e.preventDefault(),M&&o(e)},initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex-grow flex items-center space-x-3",children:[(0,a.jsx)(ed.$,{type:"button",onClick:()=>{var e;return null==(e=E.current)?void 0:e.click()},disabled:I,variant:"ghost",size:"icon",className:"rounded-full","aria-label":"Send an image",children:(0,a.jsx)(e_.A,{size:20,style:{color:r.inputArea.inputText[s]}})}),(0,a.jsx)("input",{type:"file",ref:E,onChange:B,className:"hidden",accept:"image/*"}),(0,a.jsx)("input",{onPaste:D,id:"chat-input",disabled:I,type:"text",value:g,onChange:i,placeholder:"Type a message...",style:{background:r.inputArea.inputBackground[s],color:r.inputArea.inputText[s],borderColor:r.inputArea.border[s]},className:"text-[16px] flex-grow p-3 border rounded-full",autoComplete:"off"}),(0,a.jsx)(ed.$,{id:"send-button",type:M?"submit":"button",onClick:!M&&_?T:M?void 0:A,disabled:I,style:{background:r.buttons.primary.background[s],color:r.buttons.primary.text[s],opacity:I?.5:1},className:"font-bold w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-200","aria-label":_&&!M?"andleSendImaged image":M?"Send message":"Record voice message",children:(0,a.jsx)(m.N,{mode:"popLayout",children:M||_?(0,a.jsx)(l.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:(0,a.jsx)(eM.A,{size:20})},"send"):(0,a.jsx)(l.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:(0,a.jsx)(eT.A,{size:20})},"mic")})})]},"text-input")})})]})};var eP=r(6675),eL=r(2152),eO=r(5273),ez=r(6474),eU=r(7863),eV=r(6758);let eq=e=>{let{queue:t,theme:r,mode:n}=e;return(0,a.jsxs)(ep,{children:[(0,a.jsx)(ex,{asChild:!0,children:(0,a.jsx)(ed.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(eV.A,{})})}),(0,a.jsxs)(eF,{style:{background:r.header.background[n],color:r.header.statusValue[n],border:"1px solid ".concat(r.header.border[n])},children:[(0,a.jsx)(ej,{children:(0,a.jsx)(eC,{children:"Song Queue"})}),(0,a.jsx)("div",{children:t.length>0?(0,a.jsx)("ul",{children:t.map((e,t)=>(0,a.jsx)("li",{className:"border-b p-2",children:e.name},t))}):(0,a.jsx)("p",{children:"The queue is empty."})})]})]})};var eJ=r(9103),eY=r(227);let eW=()=>(0,a.jsx)("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(0, 0, 0, 0.1)",borderLeftColor:"#22c55e",borderRadius:"50%",display:"inline-block",animation:"spin 1s linear infinite"}});var e$=r(6671);let eX="https://archive.org/",eQ=e=>{let{onAddSong:t,theme:r,mode:s}=e,[i,o]=(0,n.useState)(!1),[l,d]=(0,n.useState)(""),[c,u]=(0,n.useState)([]),[g,h]=(0,n.useState)(!1),[f,m]=(0,n.useState)(null),b=async()=>{if(l.trim()){h(!0),u([]);try{let e=await fetch("".concat(eX,"advancedsearch.php?q=title:(").concat(encodeURIComponent(l),") AND mediatype:(audio)&fl[]=identifier,title,creator&rows=50&output=json")),t=await e.json();t.response&&t.response.docs&&u(t.response.docs)}catch(e){console.error("Error fetching from Internet Archive API:",e),e$.oR.error("Failed to search for music. Please try again later.")}finally{h(!1)}}},k=async e=>{m(e.identifier);try{let r=await fetch("".concat(eX,"metadata/").concat(e.identifier)),a=await r.json();if(a&&a.files){let r=a.files.filter(e=>{var t,r,a;return(null==(t=e.format)?void 0:t.includes("MP3"))||(null==(r=e.format)?void 0:r.includes("Ogg Vorbis"))||(null==(a=e.format)?void 0:a.includes("FLAC"))}),n=r.find(t=>t.title&&t.title.toLowerCase()===e.title.toLowerCase())||r.find(t=>t.name.toLowerCase().includes(e.title.toLowerCase()))||r[0];if(n){let r=Array.isArray(e.creator)?e.creator.join(", "):e.creator,a={name:"".concat(e.title," - ").concat(r||"Unknown Artist"),url:"https://archive.org/download/".concat(e.identifier,"/").concat(encodeURIComponent(n.name))};t(a),e$.oR.success("Song added to queue!"),o(!1)}else console.error("No MP3 file found for this track."),e$.oR.error("No playable audio file found for this song.")}}catch(e){console.error("Error fetching metadata from Internet Archive:",e),e$.oR.error("Failed to add song. Please try again later.")}finally{m(null)}};return(0,a.jsxs)(ep,{open:i,onOpenChange:o,children:[(0,a.jsx)(ex,{asChild:!0,children:(0,a.jsx)(ed.$,{variant:"ghost",size:"icon",title:"Add song to queue",children:(0,a.jsx)(eJ.A,{})})}),(0,a.jsxs)(eF,{style:{background:r.header.background[s],color:r.header.statusValue[s],border:"1px solid ".concat(r.header.border[s])},children:[(0,a.jsx)(ej,{children:(0,a.jsx)(eC,{children:"Add Song to Queue from Archive.org"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(ef.p,{type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"Search for a song...",onKeyPress:e=>"Enter"===e.key&&b()}),(0,a.jsx)(ed.$,{onClick:b,disabled:g,children:g?(0,a.jsx)(eW,{}):"Search"})]}),(0,a.jsx)("div",{className:"mt-4 max-h-60 overflow-y-auto",children:c.length>0?(0,a.jsx)("ul",{children:c.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between p-2 border-b",style:{borderColor:r.header.border[s]},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,a.jsx)(eY.A,{size:16,className:"flex-shrink-0"}),(0,a.jsxs)("span",{className:"truncate",children:[e.title," by"," ",Array.isArray(e.creator)?e.creator.join(", "):e.creator||"Unknown Artist"]})]}),(0,a.jsx)(ed.$,{variant:"ghost",size:"icon",onClick:()=>k(e),disabled:f===e.identifier,children:f===e.identifier?(0,a.jsx)(eW,{}):(0,a.jsx)(eJ.A,{size:16})})]},e.identifier))}):!g&&(0,a.jsx)("p",{children:"No results found."})})]})]})},eG=e=>{let t=Math.floor(e/60),r=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)},eH=e=>{let{songName:t,artistName:r,currentTime:s,duration:i,isMuted:o,onMuteToggle:l,onSeek:d,theme:c,mode:u,playbackBlocked:g,onUnblockPlayback:h,isAdmin:f,onSkip:m,skipVotes:b,skipThreshold:k,hasVotedToSkip:p,queue:x,onAddSong:y}=e,[v,F]=(0,n.useState)(!1),[j,w]=(0,n.useState)(0),C=(0,n.useRef)(null),[N,E]=(0,n.useState)(!1),A=(e,t)=>{if(C.current){let{left:r,width:a}=C.current.getBoundingClientRect(),n=Math.max(0,Math.min(1,(e.clientX-r)/a))*i;w(n),t&&t(n)}};(0,n.useEffect)(()=>{let e=e=>{v&&A(e)},t=e=>{v&&(F(!1),A(e,d))};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[v,d,i]);let S=e=>{F(!0),w(s),A(e)},B=v?j:s,D=i>0?B/i*100:0,T=k-b;return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 shadow-lg relative rounded-lg",style:{background:c.header.background[u],color:c.header.statusValue[u],borderBottom:"1px solid ".concat(c.header.border[u])},children:[g&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-10 cursor-pointer rounded-lg",onClick:h,children:(0,a.jsx)("p",{className:"text-white text-lg font-semibold animate-pulse",children:"Tap to listen"})}),(0,a.jsxs)("div",{className:"ml-2 flex-grow flex flex-col justify-center min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,a.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,a.jsx)("div",{className:"font-bold text-base truncate",children:t}),(0,a.jsx)("div",{className:"text-sm opacity-80 truncate",style:{color:c.header.statusLabel[u]},children:r})]}),(0,a.jsxs)("div",{className:"flex items-center flex-shrink-0 gap-2",children:[!N&&(0,a.jsxs)(a.Fragment,{children:[k>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[b>0&&T>0&&(0,a.jsxs)("span",{className:"text-xs font-medium p-1 rounded-md",style:{color:c.buttons.primary.text[u],backgroundColor:c.buttons.primary.background[u]},children:[T," left"]}),(0,a.jsx)("button",{onClick:m,disabled:p,title:p?"You have voted to skip":"Vote to skip song",className:"p-2 rounded-full hover:scale-110 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:c.buttons.secondary.background[u],color:c.buttons.secondary.text[u]},children:(0,a.jsx)(eP.A,{size:20})})]}),(0,a.jsx)("button",{onClick:l,title:o?"Unmute":"Mute",className:"p-2 rounded-full hover:scale-110 transition-transform",style:{backgroundColor:c.buttons.secondary.background[u],color:c.buttons.secondary.text[u]},children:o?(0,a.jsx)(eL.A,{size:20}):(0,a.jsx)(eO.A,{size:20})}),(0,a.jsx)(eq,{queue:x,theme:c,mode:u}),(0,a.jsx)(eQ,{onAddSong:y,theme:c,mode:u})]}),(0,a.jsx)("button",{onClick:()=>E(!N),title:N?"Expand":"Collapse",className:"p-2 rounded-full hover:scale-110 transition-transform",style:{backgroundColor:c.buttons.secondary.background[u],color:c.buttons.secondary.text[u]},children:N?(0,a.jsx)(ez.A,{size:20}):(0,a.jsx)(eU.A,{size:20})})]})]}),(0,a.jsxs)("div",{className:"w-full mt-2 transition-all duration-300 ease-in-out overflow-hidden ".concat(N?"max-h-0":"max-h-20"),children:[(0,a.jsxs)("div",{ref:C,className:"relative w-full h-2 ".concat(f?"cursor-pointer":"cursor-default"),onMouseDown:f?S:void 0,children:[(0,a.jsx)("div",{className:"h-full rounded-full",style:{background:c.messageList.scrollbarTrack[u]}}),(0,a.jsx)("div",{className:"h-full rounded-full absolute top-0 left-0",style:{width:"".concat(D,"%"),background:c.buttons.primary.background[u]}}),(0,a.jsx)("div",{className:"w-4 h-4 rounded-full absolute top-1/2 -translate-y-1/2 -translate-x-1/2 transform transition-transform group-hover:scale-110",style:{left:"".concat(D,"%"),backgroundColor:c.buttons.primary.background[u],boxShadow:"0 0 5px rgba(0,0,0,0.3)"}})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs mt-1 opacity-80",children:[(0,a.jsx)("span",{children:eG(B)}),(0,a.jsx)("span",{children:eG(i)})]})]})]})]})},eZ=e=>{let t=(0,n.useRef)(null),[r,a]=(0,n.useState)(null),[s,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(0),[u,g]=(0,n.useState)(0),[h,f]=(0,n.useState)([]),[m,b]=(0,n.useState)(!1),[k,p]=(0,n.useState)(0),[x,y]=(0,n.useState)(1),[v,F]=(0,n.useState)(!1),j=()=>{t.current&&(console.log("Playing audio:",null==r?void 0:r.name),t.current.play().then(()=>i(!0)).catch(e=>{console.error("Error playing audio:",e),i(!1)}))},w=()=>{m&&t.current&&t.current.play().then(()=>{i(!0),b(!1)}).catch(e=>{console.error("Error unblocking audio playback:",e),i(!1)})};return(0,n.useEffect)(()=>{t.current||(t.current=new Audio),t.current.muted=o},[o]),(0,n.useEffect)(()=>{let n=t.current;if(!e||!n)return;let s=e=>{try{var t,s,o,l,d,u;let h=JSON.parse(e.data);switch(h.type){case"music_queue_update":let m=h.content;console.log("Received music_queue_update:",m),f(m);break;case"music_sync":console.log("Received music_sync packet:",h);let k=h.content;if(f(null!=(s=k.queue)?s:[]),p(null!=(o=null==(t=k.skipVotes)?void 0:t.length)?o:0),y(null!=(l=k.skipThreshold)?l:1),k.currentSong){k.currentSong.url!==(null==r?void 0:r.url)&&(a(k.currentSong),n.src=k.currentSong.url);let e="playing"===k.state&&k.playTime?k.progress+(Date.now()-k.playTime)/1e3:k.progress;n.currentTime=e,g(e),"playing"===k.state?n.play().then(()=>{i(!0),b(!1)}).catch(e=>{console.error("Error playing audio on sync:",e),"NotAllowedError"===e.name&&b(!0),i(!1)}):(n.pause(),i(!1))}else a(null),n.src="",i(!1),g(0),c(0);break;case"music_set":let x=h.content;x.queue&&f(x.queue),x.song?(console.log("Received music_set for song:",x.song.name),a(x.song),n.src=x.song.url,n.currentTime=null!=(d=x.song.progress)?d:0,g(null!=(u=x.song.progress)?u:0),c(0),F(!1),j()):(console.log("Received music_set with no song, resetting player."),a(null),n.src="",i(!1),g(0),c(0));break;case"music_play":let v=h.content;console.log("Received music_play at:",v.currentTime),n.currentTime=v.currentTime,n.play().then(()=>{i(!0),b(!1)}).catch(e=>{console.error("Error playing audio:",e),"NotAllowedError"===e.name&&b(!0),i(!1)});break;case"music_pause":console.log("Received music_pause"),n.pause(),i(!1);break;case"music_seek":let w=h.content;console.log("Received music_seek to:",w.seekTime),n.currentTime=w.seekTime;break;case"music_skip_result":let C=h.content;console.log("Received music_skip_result:",C),p(C.skipVotes),y(C.skipThreshold)}}catch(e){console.error("Failed to parse WebSocket message:",e)}},o=()=>g(n.currentTime),l=()=>c(n.duration),d=()=>{i(!1),g(0),e&&(console.log("Audio finished, sending music_finished packet"),e.send(JSON.stringify({type:"music_finished"})))};return e.addEventListener("message",s),e.addEventListener("close",()=>{t.current&&(t.current.pause(),t.current.src="")}),n.addEventListener("timeupdate",o),n.addEventListener("loadedmetadata",l),n.addEventListener("ended",d),()=>{e.removeEventListener("message",s),n.removeEventListener("timeupdate",o),n.removeEventListener("loadedmetadata",l),n.removeEventListener("ended",d)}},[e]),{isPlaying:s,isMuted:o,setSong:t=>{var r;e&&e.send(JSON.stringify({type:"music_set",content:t})),a(t),g(null!=(r=t.progress)?r:0)},progress:u,duration:d,currentSong:r,toggleMute:()=>{l(e=>{let r=!e;return t.current&&(t.current.muted=r),r})},play:j,playbackBlocked:m,unblockPlayback:w,skipVotes:k,skipThreshold:x,hasVotedToSkip:v,voteToSkip:()=>{e&&(console.log("Sending music_skip_request"),e.send(JSON.stringify({type:"music_skip_request"})),F(!0))},queue:h,addToQueue:t=>{e&&(console.log("Sending music_add_queue",t),e.send(JSON.stringify({type:"music_add_queue",content:t})))}}},eK=e=>{let{isOpen:t,onClose:r,onSetSong:s,theme:i,mode:o}=e,[l,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),g=e=>{e.preventDefault(),l.trim()&&c.trim()&&(s(l,c),r(),d(""),u(""))};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",onClick:r,children:(0,a.jsxs)("div",{style:{background:i.general.background[o],color:i.secondaryText[o]},className:"p-6 rounded-lg shadow-xl w-full max-w-sm",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h2",{style:{color:i.header.statusValue[o]},className:"text-lg font-semibold mb-4",children:"Set a New Song"}),(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"songName",className:"block text-sm font-medium mb-1",children:"Song Name"}),(0,a.jsx)("input",{id:"songName",type:"text",value:l,onChange:e=>d(e.target.value),style:{background:i.inputArea.background[o],color:i.inputArea.inputText[o],borderColor:i.inputArea.border[o]},className:"w-full p-2 border rounded-md focus:ring-2",required:!0})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"songUrl",className:"block text-sm font-medium mb-1",children:"Song URL (MP3)"}),(0,a.jsx)("input",{id:"songUrl",type:"url",value:c,onChange:e=>u(e.target.value),style:{background:i.inputArea.background[o],color:i.inputArea.inputText[o],borderColor:i.inputArea.border[o]},className:"w-full p-2 border rounded-md focus:ring-2",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:r,style:{background:i.buttons.secondary.background[o],color:i.buttons.secondary.text[o]},className:"px-4 py-2 rounded-md font-semibold",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",style:{background:i.buttons.primary.background[o],color:i.buttons.primary.text[o]},className:"px-4 py-2 rounded-md font-semibold",children:"Set Song"})]})]})]})}):null},e0=e=>{var t,r,s,i;let{onSetSong:o,theme:l,mode:d,socket:c,isPlaying:u,progress:g,play:h,playbackBlocked:f,unblockPlayback:m}=e,[b,k]=(0,n.useState)(!1),p=()=>{if(f)return void m();c&&(c.send(JSON.stringify({type:"music_play",content:{currentTime:g}})),h())},x=()=>{c&&c.send(JSON.stringify({type:"music_pause",content:{}}))},y=()=>{c&&c.send(JSON.stringify({type:"music_set",content:{}}))};return(0,a.jsxs)("div",{className:"w-full flex justify-end items-center gap-2 p-2",style:{background:l.header.background[d]},children:[u?(0,a.jsx)("button",{onClick:x,style:{background:l.buttons.secondary.background[d],color:l.buttons.secondary.text[d],borderColor:(null==(t=l.buttons.secondary.border)?void 0:t[d])||"transparent"},className:"p-2 rounded-full",title:"Pause the song for everyone",children:(0,a.jsx)(v.A,{size:20})}):(0,a.jsx)("button",{onClick:p,style:{background:l.buttons.secondary.background[d],color:l.buttons.secondary.text[d],borderColor:(null==(r=l.buttons.secondary.border)?void 0:r[d])||"transparent"},className:"p-2 rounded-full",title:"Play the song for everyone",children:(0,a.jsx)(F.A,{size:20})}),(0,a.jsx)("button",{onClick:()=>k(!0),style:{background:l.buttons.secondary.background[d],color:l.buttons.secondary.text[d],borderColor:(null==(s=l.buttons.secondary.border)?void 0:s[d])||"transparent"},className:"p-2 rounded-full",title:"Set a song for the group",children:(0,a.jsx)(eY.A,{size:20})}),(0,a.jsx)("button",{onClick:y,style:{background:l.buttons.secondary.background[d],color:l.buttons.secondary.text[d],borderColor:(null==(i=l.buttons.secondary.border)?void 0:i[d])||"transparent"},className:"p-2 rounded-full",title:"Remove the current song",children:(0,a.jsx)(eb.A,{size:20})}),(0,a.jsx)(eK,{isOpen:b,onClose:()=>k(!1),onSetSong:o,theme:l,mode:d})]})},e2=e=>{let{theme:t,mode:r}=e;return(0,a.jsx)("style",{children:"\n\n    #chat-container {\n      --chat-border-radius: 2rem; /* Default border radius */\n    }\n\n    @media (max-width: 640px) {\n      #chat-container {\n        --chat-border-radius: 0; /* No border radius on small screens */\n      }\n    }\n\n    div::-webkit-scrollbar {\n      width: 8px;\n    }\n    div::-webkit-scrollbar-track {\n      background: ".concat(t.messageList.scrollbarTrack[r],";\n    }\n    div::-webkit-scrollbar-thumb {\n      background-color: ").concat(t.messageList.scrollbarThumb[r],";\n      border-radius: 4px;\n    }\n    div::-webkit-scrollbar-thumb:hover {\n      background-color: ").concat(t.buttons.primary.hoverBackground[r],";\n    }\n    #chat-input:focus {\n      outline: none;\n      box-shadow: 0 0 0 2px ").concat(t.inputArea.focusRing[r],";\n    }\n    #send-button:hover {\n        background-color: ").concat(t.buttons.primary.hoverBackground[r]," !important;\n    }\n    #new-messages-button:hover {\n        background-color: ").concat(t.buttons.newMessages.hoverBackground[r]," !important;\n    }\n  ")})};function e1(e){var t,r,s,i,o,d,c;let{name:u="",groupChat:g=!1,onBack:h,newChat:f}=e,{user:b}=(0,Z.A)(),{session:{status:k,setScreen:p},chat:{wsRef:x,messages:y,sendVoiceMessage:v,sendImageMessage:F,participants:j,typingUsers:w,sendMessage:C,onReact:N,onChangeTheme:E,onDeleteMessage:A,editMessage:S,onChangeNickname:B,onStartTyping:D,disconnect:T},matchmaking:{onCancelMatchmaking:M},theme:{theme:_,mode:R}}=(0,H.c)(),{isPlaying:P,isMuted:L,progress:O,duration:z,currentSong:q,setSong:Y,toggleMute:W,playbackBlocked:$,unblockPlayback:X,skipVotes:Q,skipThreshold:G,hasVotedToSkip:K,voteToSkip:ee,play:en,queue:es,addToQueue:eg}=eZ(x.current),[ef,em]=(0,n.useState)(!1),[eb,ek]=(0,n.useState)("Unknown");(0,n.useEffect)(()=>{if(!j||0===j.length)return;let e=j.find(e=>e.userId===b.id);e&&ek(e.nickname||"Unknown")},[j]),(0,n.useEffect)(()=>{var e;let t=null==(e=j.find(e=>e.userId===b.id))?void 0:e.nickname;t&&ek(t)},[j]);let[ep,ex]=(0,n.useState)(null),[ey,ev]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=async()=>{let{data:e,error:t}=await el.N.from("announcements").select("*").order("created_at",{ascending:!1}).limit(1).single();if(t)return void console.error("Error fetching announcement:",t);(null==e?void 0:e.content)&&ex(e.content)},t=el.N.channel("public:announcements");return t.on("postgres_changes",{event:"*",schema:"public",table:"announcements"},e=>{e.new&&ex(e.new.content||null)}).subscribe(),e(),()=>{el.N.removeChannel(t)}},[]);let eF=J(y,g);(0,n.useRef)(null);let ej=(0,n.useRef)(null),[ew,eC]=(0,n.useState)(!1),eE=(0,n.useRef)(eF.length),[eA,eD]=(0,n.useState)(!1),eT=(0,n.useRef)(!0),[eM,e_]=(0,n.useState)(""),[eI,eP]=(0,n.useState)([]),[eL,eO]=(0,n.useState)(!1),ez=(0,n.useRef)(!1),eU=(e,t)=>{x.current&&(null==b?void 0:b.role)==="admin"&&Y({name:e,url:t})},[eV,eq]=(0,n.useState)({open:!1}),[eJ,eY]=(0,n.useState)(null),eW=e=>{if(!e)return void eq({open:!1});let t=document.querySelector('[data-message-id="'.concat(null==e?void 0:e.id,'"]'));t&&eq({open:!0,message:e,messageDiv:t})},[e$,eX]=(0,n.useState)([]),eQ=(0,n.useRef)(null),eG=e=>{let t=e.target.value;e_(t),D(),eQ.current&&clearTimeout(eQ.current),eQ.current=setTimeout(()=>{let e=document.getElementById("chat-input"),r=(null==e?void 0:e.selectionStart)||0,a=t.slice(0,r),n=a.lastIndexOf("@");if(-1!==n){let e=a.slice(n+1).toLowerCase();e.length>0?eX(j.filter(t=>t.nickname.toLowerCase().startsWith(e))):eX(j)}else eX([])},200)};(0,n.useEffect)(()=>()=>{eQ.current&&clearTimeout(eQ.current)},[]),(0,n.useEffect)(()=>{if(g)return;let e=e=>{if("Escape"===e.key){if(console.log("Escape key pressed"),"waiting_for_match"===k||"finding_match"===k||"connecting"===k)return void M();"connected"===k&&(eL?(console.log("Ending chat"),T(),eO(!1)):eO(!0)),"connected"!==k&&f&&(console.log("Starting new chat"),f())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[k,eL,T,M,f]),(0,n.useEffect)(()=>{if(0===eF.length)return;let e=eF.length>eE.current,t=eF[eF.length-1];if("typing"===t.id){eE.current=eF.length;return}if(e)if(t.sender===b.id||eT.current){var r;null==(r=ej.current)||r.scrollToIndex(eF.length-1,{align:"end",smooth:!0})}else eD(!0);eE.current=eF.length},[eF,b.id]),(0,n.useEffect)(()=>{let e=w.length>0;if(eT.current&&e){var t;null==ej||null==(t=ej.current)||t.scrollToIndex(eF.length,{smooth:!0,align:"end"})}},[w,eF]),(0,n.useEffect)(()=>{if(eJ){let e=document.getElementById("chat-input");e&&e.focus();return}let e=document.getElementById("chat-input");e&&(e.value="",e_(""))},[eJ]),(0,n.useEffect)(()=>{let e=document.querySelector("#chat-messages-list");e&&(e.style.overflow=ew||eV.open?"hidden":"auto")},[ew,eV]);let eK=e=>{e.preventDefault();let t=eM.trim();if(t){var r;eO(!1);let e=null==eJ||null==(r=eJ.message)?void 0:r.id;if(e&&(null==eJ?void 0:eJ.type)==="editing"){null==S||S(e,t),eY(null),e_("");return}let a=eI.filter(e=>{let r=t.slice(e.startIndex,e.endIndex),a=j.find(t=>t.userId===e.id);return a&&r===a.nickname});C(t,e,a),eP([]),e_(""),e&&eY(null)}},e1=e=>{null==B||B(e)},e5=(e,t)=>"system"===e.sender||"system"===e.type?(0,a.jsx)("div",{className:"text-center my-2 mx-4",children:(0,a.jsx)("span",{style:{color:_.message.systemMessage.text[R],background:_.message.systemMessage.background[R]},className:"box-decoration-clone text-xs rounded-full px-3 py-1 leading-relaxed",children:e.content})},t):(0,a.jsx)(eo.U,{children:(0,a.jsx)(U,{participants:j,index:t,message:e,user:b,isGroupChat:g,isLast:0===t,onSwipe:e=>{let t=y.find(t=>t.id===e);t&&eY({message:t,type:"replying",title:"Replying",description:t.content})},onStartedSwipe:()=>{},onEndedSwipe:()=>{},onReact:N,onOpenEmojiMenu:()=>eW(e),onResendMessage:()=>{},isEmojiMenuOpen:ez,theme:_,mode:R,animate:!0,secondVisibleElement:null},t)},e.id+"listener"),[e3,e4]=(0,n.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e2,{theme:_,mode:R}),(0,a.jsx)(eS,{theme:_,mode:R,isOpen:ef,onClose:()=>em(!1),users:j}),(0,a.jsx)(eh,{isOpen:e3,onClose:()=>e4(!1),themes:[I.zQ,I.Qr,I.M5,I.VO,I.H,I.Ep,V,I.gR,I.ro,I.bH],activeTheme:_,setActiveThemeAndMode:(e,t)=>{null==E||E(t,e)},activeMode:R}),(0,a.jsx)(eN,{isOpen:ey,onClose:()=>ev(!1),onSave:e1,currentNickname:eb}),(0,a.jsx)(et,{open:eV.open,message:eV.message,messageDiv:eV.messageDiv,user:b,onReact:N,onReply:e=>{let t=y.find(t=>t.id===e);t&&eY({message:t,type:"replying",title:"Replying",description:t.content})},onEdit:e=>{let t=y.find(t=>t.id===e);t&&(e_(t.content),eY({message:t,type:"editing",title:"Editing",description:t.content}))},onCopy:e=>{let t=y.find(t=>t.id===e);t&&(navigator.clipboard.writeText(t.content),eW(null))},onDelete:e=>{console.log("Delete message with ID: ".concat(e)),eW(null),null==A||A(e)},onClose:()=>eW(null)}),(0,a.jsxs)("div",{id:"chat-container",style:{fontFamily:_.typography.fontFamily,fontSize:_.typography.baseFontSize,background:_.general.background[R],backdropFilter:"blur(".concat(_.general.backdropBlur,")"),boxShadow:_.general.shadow,borderRadius:"var(--chat-border-radius, 2rem)"},className:"w-full max-w-md mx-auto h-[100dvh] flex flex-col",children:[(0,a.jsxs)("div",{style:{background:_.header.background[R],borderColor:_.header.border[R]},className:"p-4 border-b flex items-center shrink-0",children:[("connected"!==k||g)&&(0,a.jsx)(ed.$,{onClick:h,variant:"outline",style:{background:_.buttons.secondary.background[R],color:_.buttons.secondary.text[R],borderColor:(null==(t=_.buttons.secondary.border)?void 0:t[R])||"transparent"},className:"rounded-full mr-2 p-1",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,a.jsxs)("div",{className:"text-left mr-auto ml-2",children:[(0,a.jsx)("p",{style:{color:_.header.statusLabel[R]},className:"text-xs font-medium",children:g?u:"Status"}),(0,a.jsx)("p",{style:{color:_.header.statusValue[R]},className:"text-sm font-semibold",children:k.charAt(0).toUpperCase()+k.slice(1)})]}),g&&(0,a.jsx)(ed.$,{onClick:()=>ev(!0),variant:"outline",className:"mr-2 rounded-full",style:{background:_.buttons.secondary.background[R],color:_.buttons.secondary.text[R],borderColor:(null==(r=_.buttons.secondary.border)?void 0:r[R])||"transparent"},children:(0,a.jsx)(ec.A,{size:16})}),(0,a.jsx)(ed.$,{onClick:()=>e4(!0),variant:"outline",className:"mr-2 rounded-full",style:{background:_.buttons.secondary.background[R],color:_.buttons.secondary.text[R],borderColor:(null==(s=_.buttons.secondary.border)?void 0:s[R])||"transparent"},children:(0,a.jsx)(eu.A,{})}),!g&&"connected"===k&&(0,a.jsxs)(ed.$,{onClick:()=>eL?(T(),eO(!1)):eO(!0),className:"px-3 py-1 text-sm rounded-full",style:{background:eL?_.buttons.destructive.background[R]:_.buttons.secondary.background[R],color:eL?_.buttons.destructive.text[R]:_.buttons.secondary.text[R],...(eL?null==(i=_.buttons.destructive.border)?void 0:i[R]:null==(o=_.buttons.secondary.border)?void 0:o[R])?{border:"1px solid ".concat(eL?null==(d=_.buttons.destructive.border)?void 0:d[R]:null==(c=_.buttons.secondary.border)?void 0:c[R])}:{}},children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"(Esc)"}),eL?"Confirm?":"End Chat"]}),!g&&"connected"!==k&&(0,a.jsxs)(ed.$,{id:"new-chat-button",onClick:f,className:"px-3 py-1 text-sm rounded-full",style:{background:_.buttons.primary.background[R],color:_.buttons.primary.text[R]},children:[(0,a.jsx)("span",{className:"hidden text-sm sm:inline",children:"(Esc)"}),"New Chat"]}),g&&(0,a.jsx)(eB,{theme:_,mode:R,users:j,onOverflowClick:()=>em(!0)})]}),ep&&(0,a.jsx)("div",{style:{background:_.announcement.background[R],color:_.announcement.text[R],borderColor:_.announcement.border[R]},className:"p-2 text-center text-xs border-b shrink-0",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:ep}})}),(null==b?void 0:b.role)==="admin"&&(0,a.jsx)(e0,{onSetSong:eU,theme:_,mode:R,socket:x.current,isPlaying:P,progress:O,play:en,playbackBlocked:$,unblockPlayback:X}),(0,a.jsx)(eH,{songName:(null==q?void 0:q.name)||"No song playing",artistName:"Shared Music",currentTime:O,duration:z,isMuted:L,onMuteToggle:W,onSeek:()=>{},theme:_,mode:R,playbackBlocked:$,onUnblockPlayback:X,isAdmin:(null==b?void 0:b.role)==="admin",onSkip:ee,skipVotes:Q,skipThreshold:G,hasVotedToSkip:K,queue:es,onAddSong:eg}),(0,a.jsxs)("div",{className:"flex flex-col flex-grow",id:"chat-messages-list-container",children:[(0,a.jsx)(m.N,{children:("waiting_for_match"===k||"finding_match"===k||"connecting"===k)&&(0,a.jsx)(ei,{isGroupChat:g,onCancel:M,theme:_,mode:R},"finding-match-animation")}),(0,a.jsxs)("div",{className:"max-h-full h-full relative",children:[(0,a.jsxs)(er.x8,{ref:ej,style:{overflowX:"hidden"},id:"chat-messages-list",onScroll:e=>{ej.current&&(eT.current=e-ej.current.scrollSize+ej.current.viewportSize>=-100,eT.current&&eD(!1))},reverse:!0,children:[eF.map((e,t)=>e5(e,t)),(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)(eo.U,{children:w.length>0&&(0,a.jsx)(ea,{typingUsers:w,theme:_,mode:R},"typing-indicator")})})]}),(0,a.jsx)(m.N,{children:eA&&(0,a.jsx)(l.P.div,{initial:{y:"100%"},animate:{y:"0"},exit:{y:"100%"},className:"absolute bottom-0 left-0 w-full flex items-center justify-center pb-2 pt-4",children:(0,a.jsxs)("button",{id:"new-messages-button",onClick:()=>{var e;null==(e=ej.current)||e.scrollToIndex(eF.length-1,{align:"end",smooth:!0}),eD(!1)},style:{backgroundColor:_.buttons.newMessages.background[R],color:_.buttons.newMessages.text[R]},className:"px-4 py-2 rounded-full shadow-lg flex items-center gap-2 transition-colors",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"New messages"]})},"new-messages-button")})]}),(0,a.jsx)(eo.U,{children:(0,a.jsx)(l.P.div,{style:{paddingBottom:eJ?"2rem":0,overflow:"hidden",visibility:eJ?"visible":"hidden",height:eJ?"auto":0,backgroundColor:_.overlays.replyingPreview.background[R],borderLeft:"4px solid ".concat(_.overlays.replyingPreview.border[R])},className:"flex items-start gap-2 px-3 py-2 relative",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{style:{color:_.overlays.replyingPreview.title[R]},className:"text-xs font-semibold",children:(null==eJ?void 0:eJ.type)==="replying"?"Replying to":"Editing"}),(0,a.jsx)("button",{type:"button",className:"ml-auto","aria-label":"Cancel",onClick:()=>eY(null),children:(0,a.jsxs)("svg",{width:"18",height:"18",fill:"none",stroke:_.overlays.replyingPreview.closeIcon[R],strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,a.jsx)("div",{style:{color:_.overlays.replyingPreview.description[R]},className:"text-xs truncate max-w-xs",children:null==eJ?void 0:eJ.description})]})},"bottom-message-preview")}),g&&(0,a.jsx)(eo.U,{children:(0,a.jsx)("div",{id:"mentions-container",className:"border-t",style:{borderColor:_.inputArea.border[R]},children:e$.length>0&&(0,a.jsx)("div",{style:{backgroundColor:_.inputArea.background[R],borderColor:_.inputArea.border[R],maxHeight:"200px",overflowY:"auto"},className:"p-2 border-t",children:(0,a.jsx)("ul",{className:"space-y-1",children:e$.map(e=>(0,a.jsx)("li",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-md transition-colors",onClick:()=>{let t=document.getElementById("chat-input"),r=t.selectionStart||0,a=eM.slice(0,r),n=a.lastIndexOf("@");e_("".concat(a.slice(0,n+1)).concat(e.nickname," ").concat(eM.slice(r))),eX([]),t.focus(),t.setSelectionRange(n+e.nickname.length+2,n+e.nickname.length+2),eP(t=>[...t,{id:e.userId,startIndex:n+1,endIndex:n+e.nickname.length+1}])},children:(0,a.jsx)("span",{className:"text-sm font-medium",style:{color:_.inputArea.inputText[R]},children:e.nickname})},e.userId))})})})}),(0,a.jsx)(eR,{theme:_,mode:R,currentMessage:eM,handleInputChange:eG,currentMentions:eI,setCurrentMentions:eP,onSendMessage:eK,onSendVoiceMessage:e=>{v(e)},onSendImageMessage:e=>{F(e)},groupChat:g,status:k,onStartTyping:D,participants:j,bottomMessagePreviewState:eJ})]})]})]})}},1797:(e,t,r)=>{"use strict";r.d(t,{O:()=>g,s:()=>u});var a=r(5155),n=r(2115),s=r(598),i=r(2577),o=r(9698),l=r(5791),d=r(605);let c=(0,n.createContext)(void 0),u=e=>{var t;let{children:r,user:u}=e,g=(0,n.useRef)(null),h=(0,n.useRef)(null),{setScreen:f,setStatus:m,setChatId:b}=(0,d.w)(),{connectToChat:k,resetState:p}=(0,s.o)(),{setTheme:x,setMode:y}=(0,i.j)(),v=null!=(t=null==u?void 0:u.id)?t:"",F=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p(),h.current&&clearTimeout(h.current),!v){console.error("User ID not set. Cannot start matchmaking."),m("error");return}f("chat"),m("finding_match");let r="".concat(l.Y,"/matchmaking?userId=").concat(v);e.length>0&&(r+="&interests=".concat(encodeURIComponent(e.join(","))));let a=new EventSource(r);g.current=a,!t&&e.length>0&&(h.current=setTimeout(()=>{a.close(),g.current=null,F([],!0)},1e4)),a.onmessage=e=>{let r=JSON.parse(e.data);"MATCHED"===r.state&&r.chatId&&(h.current&&clearTimeout(h.current),a.close(),b(r.chatId),m("connecting"),x(o.zQ),y("light"),k(r.chatServerUrl,r.chatId,r.interest?[r.interest]:[],!1,t))},a.onerror=e=>{console.error("EventSource failed:",e),m("error"),a.close()}},[v,m,f,b,k,x,y]),j=(0,n.useCallback)(()=>{g.current&&(g.current.close(),g.current=null),m("ready"),f("matchmaking")},[m,f]);return(0,a.jsx)(c.Provider,{value:{startMatchmaking:F,onCancelMatchmaking:j},children:r})},g=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useMatchmaking must be used within a MatchmakingProvider");return e}},2099:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var a=r(4982);let n="https://wkafplnaexyyuobfufxa.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndrYWZwbG5hZXh5eXVvYmZ1ZnhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0NjYwODEsImV4cCI6MjA2MTA0MjA4MX0.Sp9g2aWN24QoymYPoYJbxInnFNMautc26uJ1ba6Dvdc",i=(0,a.UU)(n,s)},2577:(e,t,r)=>{"use strict";r.d(t,{h:()=>o,j:()=>l});var a=r(5155),n=r(2115),s=r(9698);let i=(0,n.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,n.useState)(s.zQ),[l,d]=(0,n.useState)("light");return(0,a.jsx)(i.Provider,{value:{theme:r,setTheme:o,mode:l,setMode:d},children:t})},l=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useChatTheme must be used within a ChatThemeProvider");return e}},3287:()=>{},3667:(e,t,r)=>{"use strict";r.d(t,{U:()=>l});var a=r(5155),n=r(9300),s=r.n(n),i=r(7859),o=r(2115);let l=e=>{let{children:t,className:r}=e,n=(0,o.useRef)(null),[l,d]=(0,o.useState)("auto");return(0,o.useEffect)(()=>{if(n.current){let e=new ResizeObserver(e=>{d(e[0].contentRect.height)});return e.observe(n.current),()=>{e.disconnect()}}},[]),(0,a.jsx)(i.P.div,{className:s()(r,"overflow-visible"),style:{height:l},animate:{height:l},transition:{duration:.14},children:(0,a.jsx)("div",{ref:n,children:t})})}},5791:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});let a="https://animochat-turn-server.onrender.com"},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(5155);r(2115);var n=r(9708),s=r(2085),i=r(9434);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:s,asChild:l=!1,...d}=e,c=l?n.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:s,className:t})),...d})}},7596:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var a=r(605),n=r(598),s=r(1797),i=r(2577);let o=()=>({session:(0,a.w)(),chat:(0,n.o)(),matchmaking:(0,s.O)(),theme:(0,i.j)()})},8437:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,O:()=>c});var a=r(5155),n=r(2115),s=r(7383);let i=(0,n.createContext)({user:null,session:null,isLoading:!0,error:null,login:async()=>{},logout:()=>{}}),o="https://animochat-auth-server.onrender.com/api/auth",l="supabase.auth.session",d=(e,t)=>{let r=(0,n.useRef)(null);(0,n.useEffect)(()=>{r.current=e},[e]),(0,n.useEffect)(()=>{function e(){r.current&&r.current()}if(null!==t){let r=setInterval(e,t);return()=>clearInterval(r)}},[t])},c=e=>{let{children:t}=e,[r,c]=(0,n.useState)(null),[u,g]=(0,n.useState)(null),[h,f]=(0,n.useState)(!0),[m,b]=(0,n.useState)(null),k=(0,n.useCallback)(async()=>{b(null);try{let e=await fetch("".concat(o,"/login/anonymous"),{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.message||"Anonymous login failed.");c(t.user),g(t.session),s.A.set(l,JSON.stringify(t.session),{sameSite:"none",secure:!0,expires:7})}catch(e){b(e.message),c(null),g(null),s.A.remove(l)}},[]),p=(0,n.useCallback)(async e=>{try{let t=await fetch("".concat(o,"/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e.refresh_token})}),r=await t.json();if(!t.ok)throw Error(r.message||"Token refresh failed.");let a={...e,...r.session};return g(a),s.A.set(l,JSON.stringify(a),{sameSite:"none",secure:!0,expires:7}),a}catch(e){throw c(null),g(null),s.A.remove(l),await k(),e}},[k]),x=(0,n.useCallback)(async e=>{if(1e3*e.expires_at<Date.now())try{e=await p(e)}catch(e){console.error("Session expired and refresh failed.",e);return}try{let t=await fetch("".concat(o,"/validate"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token)}}),r=await t.json();if(!t.ok||!r.valid)throw Error(r.message||"Token validation failed.");c(r.user),g(e),s.A.set(l,JSON.stringify(e),{sameSite:"none",secure:!0,expires:7}),b(null)}catch(e){b(e.message),await k()}},[p,k]);(0,n.useEffect)(()=>{(async()=>{f(!0);let e=s.A.get(l);if(e)try{let t=JSON.parse(e);await x(t)}catch(e){await k()}else await k();f(!1)})()},[]),d(async()=>{if(u&&!(null==r?void 0:r.is_anonymous)&&1e3*u.expires_at<Date.now()+6e4)try{await p(u)}catch(e){console.error("Background token refresh failed:",e)}},6e4);let y={user:r,session:u,isLoading:h,error:m,login:async(e,t)=>{f(!0),b(null);try{let r=await fetch("".concat(o,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await r.json();if(!r.ok)throw Error(a.message||"Login failed.");await x(a.session)}catch(e){b(e.message),c(null),g(null),s.A.remove(l)}finally{f(!1)}},logout:()=>{f(!0),c(null),g(null),s.A.remove(l),k().finally(()=>f(!1))}};return(0,a.jsx)(i.Provider,{value:y,children:t})},u=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2596),n=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},9698:(e,t,r)=>{"use strict";r.d(t,{Ep:()=>i,H:()=>d,M5:()=>u,Qr:()=>c,VO:()=>l,bH:()=>s,gR:()=>a,ro:()=>n,zQ:()=>o});let a={name:"Cosmic Latte",typography:{fontFamily:"'Space Mono', monospace",baseFontSize:"15px"},accent:{main:{light:"#c59c6c",dark:"#d4b38a"},faded:{light:"rgba(197, 156, 108, 0.15)",dark:"rgba(212, 179, 138, 0.1)"}},secondaryText:{light:"#6d4c41",dark:"#a1887f"},errorText:{light:"#d32f2f",dark:"#ef9a9a"},linkColor:{light:"#81d4fa",dark:"#4fc3f7"},announcement:{background:{light:"#f5f5f5",dark:"#2a211c"},text:{light:"#4e342e",dark:"#d7ccc8"},border:{light:"rgba(212, 179, 138, 0.5)",dark:"rgba(212, 179, 138, 0.2)"}},animations:{typingIndicatorDots:{dark:"#d4b38a",light:"#c59c6c"}},messageList:{scrollbarThumb:{light:"#bcaaa4",dark:"#6d4c41"},scrollbarTrack:{light:"#eFEBE9",dark:"#1e1511"}},overlays:{emojiMenu:{background:{light:"#fff",dark:"#3e2723"},shadow:"0 4px 8px -1px rgba(0, 0, 0, 0.15)"},replyingPreview:{background:{light:"#f5f5f5",dark:"#2a211c"},border:{light:"#c59c6c",dark:"#d4b38a"},closeIcon:{light:"#8d6e63",dark:"#bcaaa4"},description:{light:"#5d4037",dark:"#d7ccc8"},title:{light:"#4e342e",dark:"#ffffff"}}},general:{background:{light:"#efebe9",dark:"#1e1511"},backdropBlur:"1rem",shadow:"0 15px 35px -10px rgb(0 0 0 / 0.25)",borderRadius:"1.25rem"},header:{background:{light:"rgba(239, 235, 233, 0.8)",dark:"rgba(30, 21, 17, 0.8)"},border:{light:"rgba(215, 204, 200, 0.8)",dark:"rgba(42, 33, 28, 0.8)"},statusLabel:{light:"#8d6e63",dark:"#a1887f"},statusValue:{light:"#8d6e63",dark:"#d4b38a"}},message:{myMessage:{background:{light:"#c59c6c",dark:"#8a6b4a"},text:{light:"#ffffff",dark:"#f5f5f5"},isAnimated:!1},strangerMessage:{background:{light:"#ffffff",dark:"#4e342e"},text:{light:"#4e342e",dark:"#d7ccc8"},isAnimated:!1},systemMessage:{background:{light:"transparent",dark:"transparent"},text:{light:"#a1887f",dark:"#8d6e63"}},deletedMessage:{text:{light:"#bcaaa4",dark:"#a1887f"}},imageOverlay:{background:{light:"rgba(78, 52, 46, 0.5)",dark:"rgba(0, 0, 0, 0.5)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(42, 33, 28, 0.6)"},border:{light:"rgba(215, 204, 200, 0.9)",dark:"rgba(62, 39, 35, 0.9)"},inputBackground:{light:"#ffffff",dark:"#5d4037"},inputText:{light:"#3e2723",dark:"#f5f5f5"},placeholderText:{light:"#a1887f",dark:"#a1887f"},focusRing:{light:"#c59c6c",dark:"#d4b38a"}},buttons:{primary:{background:{light:"#a1887f",dark:"#c59c6c"},text:{light:"#ffffff",dark:"#3e2723"},hoverBackground:{light:"#8d6e63",dark:"#d4b38a"}},secondary:{background:{light:"#fff",dark:"#5d4037"},text:{light:"#6d4c41",dark:"#d7ccc8"},hoverBackground:{light:"#efebe9",dark:"#6d4c41"},border:{light:"#d7ccc8",dark:"#8d6e63"}},destructive:{background:{light:"#c62828",dark:"#d32f2f"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b71c1c",dark:"#c62828"},border:{light:"#c62828",dark:"#d32f2f"}},newMessages:{background:{light:"#80deea",dark:"#4dd0e1"},text:{light:"#006064",dark:"#004d40"},hoverBackground:{light:"#4dd0e1",dark:"#26c6da"}}},reactions:{bubble:{background:{light:"#ffffff",dark:"#6d4c41"},border:{light:"#d7ccc8",dark:"#1e1511"},text:{light:"#c59c6c",dark:"#f5f5f5"}}}},n={name:"Sunset Bliss",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#FF6B6B",dark:"#FF6B6B"},faded:{light:"rgba(255, 107, 107, 0.15)",dark:"rgba(255, 107, 107, 0.15)"}},secondaryText:{light:"#6D6875",dark:"#A5A58D"},errorText:{light:"#E63946",dark:"#F28B82"},linkColor:{light:"#F08A5D",dark:"#F08A5D"},announcement:{background:{light:"#FFF1E6",dark:"#332F2C"},text:{light:"#3D315B",dark:"#F1E4CE"},border:{light:"rgba(253, 230, 138, 0.8)",dark:"rgba(59, 50, 53, 0.8)"}},animations:{typingIndicatorDots:{dark:"#F1E4CE",light:"#3D315B"}},messageList:{scrollbarThumb:{light:"#E9C46A",dark:"#8D8680"},scrollbarTrack:{light:"#FFF8E1",dark:"#2A2825"}},overlays:{emojiMenu:{background:{light:"#FFFAF0",dark:"#3E3B37"},shadow:"0 4px 12px rgba(0,0,0,0.1)"},replyingPreview:{background:{light:"#FFF1E6",dark:"#332F2C"},border:{light:"#FF6B6B",dark:"#FF6B6B"},closeIcon:{light:"#6D6875",dark:"#A5A58D"},description:{light:"#3D315B",dark:"#F1E4CE"},title:{light:"#3D315B",dark:"#F1E4CE"}}},general:{background:{light:"#FFF8E1",dark:"#1F1E1C"},backdropBlur:"1.5rem",shadow:"0 20px 40px rgba(0,0,0,0.2)",borderRadius:"1.5rem"},header:{background:{light:"rgba(255, 255, 255, 0.7)",dark:"rgba(40, 38, 35, 0.7)"},border:{light:"rgba(229,231,235,0.8)",dark:"rgba(55,65,81,0.8)"},statusLabel:{light:"#6D6875",dark:"#A5A58D"},statusValue:{light:"#FF6B6B",dark:"#FF6B6B"}},message:{myMessage:{background:{light:"#FF6B6B",dark:"#FF6B6B"},text:{light:"#FFFFFF",dark:"#FFFFFF"},isAnimated:!1},strangerMessage:{background:{light:"#FFF1E6",dark:"#3E3B37"},text:{light:"#3D315B",dark:"#F1E4CE"},isAnimated:!1},systemMessage:{background:{light:"#E9C46A",dark:"#3E3B37"},text:{light:"#6D6875",dark:"#A5A58D"}},deletedMessage:{text:{light:"#6D6875",dark:"#A5A58D"}},imageOverlay:{background:{light:"rgba(0,0,0,0.5)",dark:"rgba(0,0,0,0.5)"},text:{light:"#FFFFFF",dark:"#FFFFFF"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(40,38,35,0.8)"},border:{light:"rgba(229,231,235,0.8)",dark:"rgba(55,65,81,0.8)"},inputBackground:{light:"#FFFFFF",dark:"#4B483E"},inputText:{light:"#3D315B",dark:"#F1E4CE"},placeholderText:{light:"#A5A58D",dark:"#6D6875"},focusRing:{light:"#FF6B6B",dark:"#FF6B6B"}},buttons:{primary:{background:{light:"#FF6B6B",dark:"#FF6B6B"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#E63946",dark:"#E63946"}},secondary:{background:{light:"#FFF1E6",dark:"#3E3B37"},text:{light:"#3D315B",dark:"#F1E4CE"},hoverBackground:{light:"#FFE5D4",dark:"#5A564F"},border:{light:"#FFE5D4",dark:"#5A564F"}},destructive:{background:{light:"#E63946",dark:"#F28B82"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#D62828",dark:"#E63946"},border:{light:"#E63946",dark:"#F28B82"}},newMessages:{background:{light:"#F4A261",dark:"#E76F51"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#E76F51",dark:"#F4A261"}}},reactions:{bubble:{background:{light:"#FFF1E6",dark:"#3E3B37"},border:{light:"#FFFFFF",dark:"#1F1E1C"},text:{light:"#3D315B",dark:"#F1E4CE"}}}},s={name:"Aurora Glow",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#8E44AD",dark:"#8E44AD"},faded:{light:"rgba(142,68,173,0.15)",dark:"rgba(142,68,173,0.15)"}},secondaryText:{light:"#2C3E50",dark:"#BDC3C7"},errorText:{light:"#C0392B",dark:"#E74C3C"},linkColor:{light:"#2980B9",dark:"#3498DB"},announcement:{background:{light:"#F5EEF8",dark:"#1A1A1D"},text:{light:"#4A235A",dark:"#F8F9F9"},border:{light:"rgba(155,89,182,0.8)",dark:"rgba(26,26,29,0.8)"}},animations:{typingIndicatorDots:{dark:"#F8F9F9",light:"#4A235A"}},messageList:{scrollbarThumb:{light:"#A569BD",dark:"#7D3C98"},scrollbarTrack:{light:"#F9EBEA",dark:"#1A1A1D"}},overlays:{emojiMenu:{background:{light:"#FAE3F5",dark:"#2C2A2E"},shadow:"0 4px 10px rgba(0,0,0,0.1)"},replyingPreview:{background:{light:"#F5EEF8",dark:"#1A1A1D"},border:{light:"#8E44AD",dark:"#8E44AD"},closeIcon:{light:"#2C3E50",dark:"#BDC3C7"},description:{light:"#4A235A",dark:"#F8F9F9"},title:{light:"#4A235A",dark:"#F8F9F9"}}},general:{background:{light:"linear-gradient(45deg, #FFC0CB 0%, #8E44AD 100%)",dark:"linear-gradient(45deg, #0D0D0D 0%, #4A235A 100%)"},backdropBlur:"1rem",shadow:"0 20px 35px rgba(0,0,0,0.15)",borderRadius:"1.25rem"},header:{background:{light:"rgba(255,255,255,0.7)",dark:"rgba(15,15,15,0.7)"},border:{light:"rgba(224,224,224,0.8)",dark:"rgba(40,40,40,0.8)"},statusLabel:{light:"#2C3E50",dark:"#BDC3C7"},statusValue:{light:"#8E44AD",dark:"#8E44AD"}},message:{myMessage:{background:{light:"#8E44AD",dark:"#8E44AD"},text:{light:"#FFFFFF",dark:"#FFFFFF"},isAnimated:!1},strangerMessage:{background:{light:"#FAE3F5",dark:"#2C2A2E"},text:{light:"#4A235A",dark:"#F8F9F9"},isAnimated:!1},systemMessage:{background:{light:"#f5f5f5",dark:"#2C2A2E"},text:{light:"#2C3E50",dark:"#BDC3C7"}},deletedMessage:{text:{light:"#2C3E50",dark:"#BDC3C7"}},imageOverlay:{background:{light:"rgba(0,0,0,0.5)",dark:"rgba(0,0,0,0.5)"},text:{light:"#FFFFFF",dark:"#FFFFFF"}}},inputArea:{background:{light:"rgba(255,255,255,0.8)",dark:"rgba(15,15,15,0.8)"},border:{light:"rgba(224,224,224,0.8)",dark:"rgba(40,40,40,0.8)"},inputBackground:{light:"#FFFFFF",dark:"#3E3B37"},inputText:{light:"#4A235A",dark:"#F8F9F9"},placeholderText:{light:"#BDC3C7",dark:"#2C3E50"},focusRing:{light:"#8E44AD",dark:"#8E44AD"}},buttons:{primary:{background:{light:"#8E44AD",dark:"#8E44AD"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#732D91",dark:"#732D91"}},secondary:{background:{light:"#FAE3F5",dark:"#2C2A2E"},text:{light:"#4A235A",dark:"#F8F9F9"},hoverBackground:{light:"#FADADD",dark:"#4A2236"},border:{light:"#FADADD",dark:"#4A2236"}},destructive:{background:{light:"#C0392B",dark:"#E74C3C"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#922B21",dark:"#C0392B"},border:{light:"#C0392B",dark:"#E74C3C"}},newMessages:{background:{light:"#2980B9",dark:"#3498DB"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#1F6391",dark:"#2980B8"}}},reactions:{bubble:{background:{light:"#FAE3F5",dark:"#2C2A2E"},border:{light:"#FFFFFF",dark:"#0D0D0D"},text:{light:"#4A235A",dark:"#F8F9F9"}}}},i={name:"Pride Month",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)",dark:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)"},faded:{light:"rgba(0, 0, 0, 0.05)",dark:"rgba(255, 255, 255, 0.1)"}},secondaryText:{light:"#6b7280",dark:"#9ca3af"},errorText:{light:"#b91c1c",dark:"#ef4444"},linkColor:{light:"#2563eb",dark:"#3b82f6"},announcement:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#111827",dark:"#f9fafb"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"}},animations:{typingIndicatorDots:{dark:"#f9fafb",light:"#111827"}},messageList:{scrollbarThumb:{light:"#9ca3af",dark:"#6b7280"},scrollbarTrack:{light:"#f3f4f6",dark:"#111827"}},overlays:{emojiMenu:{background:{light:"#f3f4f6",dark:"#1f2937"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#f3f4f6",dark:"#1f2937"},border:{light:"#4f46e5",dark:"#c7d2fe"},closeIcon:{light:"#6b7280",dark:"#9ca3af"},description:{light:"#111827",dark:"#f9fafb"},title:{light:"#111827",dark:"#f9fafb"}}},general:{background:{light:"#ffffff",dark:"#111827"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},statusLabel:{light:"#6b7280",dark:"#9ca3af"},statusValue:{light:"#4f46e5",dark:"#a5b4fc"}},message:{myMessage:{background:{light:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)",dark:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)"},text:{light:"#000",dark:"#000"},isAnimated:!0},strangerMessage:{background:{light:"#f3f4f6",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},isAnimated:!1},systemMessage:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#6b7280",dark:"#9ca3af"}},deletedMessage:{text:{light:"#6b7280",dark:"#9ca3af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},inputBackground:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(55, 65, 81, 0.5)"},inputText:{light:"#111827",dark:"#f9fafb"},placeholderText:{light:"#9ca3af",dark:"#6b7280"},focusRing:{light:"#4f46e5",dark:"#c7d2fe"}},buttons:{primary:{background:{light:"linear-gradient(90deg,rgba(224, 126, 126, 1) 0%, rgba(199, 184, 87, 1) 50%, rgba(237, 83, 229, 1) 100%);",dark:"linear-gradient(90deg,rgba(128, 69, 69, 1) 0%, rgba(122, 116, 69, 1) 50%, rgba(156, 56, 149, 1) 100%);"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"linear-gradient(90deg, #d30202, #ec8200, #ece200, #007022, #0043e6, #650676)",dark:"linear-gradient(90deg, #d30202, #ec8200, #ece200, #007022, #0043e6, #650676)"}},secondary:{background:{light:"#fff",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},hoverBackground:{light:"#d1d5db",dark:"#4b5563"},border:{light:"#d1d5db",dark:"#4b5563"}},destructive:{background:{light:"#dc2626",dark:"#ef4444"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b91c1c",dark:"#dc2626"},border:{light:"#dc2626",dark:"#ef4444"}},newMessages:{background:{light:"#f59e0b",dark:"#fcd347"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#d97706",dark:"#f59e0b"}}},reactions:{bubble:{background:{light:"#f3f4f6",dark:"#374151"},border:{light:"#ffffff",dark:"#111827"},text:{light:"#111827",dark:"#f3f4f6"}}}},o={name:"Default Green",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#16a34a",dark:"#16a34a"},faded:{light:"rgba(22, 163, 74, 0.1)",dark:"rgba(34, 197, 94, 0.1)"}},secondaryText:{light:"#6b7280",dark:"#9ca3af"},errorText:{light:"#b91c1c",dark:"#ef4444"},linkColor:{light:"#2563eb",dark:"#3b82f6"},announcement:{background:{light:"#ffffff",dark:"#1f2937"},text:{light:"#111827",dark:"#f9fafb"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"}},animations:{typingIndicatorDots:{dark:"#f9fafb",light:"#111827"}},messageList:{scrollbarThumb:{light:"#9ca3af",dark:"#6b7280"},scrollbarTrack:{light:"#f3f4f6",dark:"#111827"}},overlays:{emojiMenu:{background:{light:"#f3f4f6",dark:"#1f2937"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#f3f4f6",dark:"#1f2937"},border:{light:"#16a34a",dark:"#16a34a"},closeIcon:{light:"#6b7280",dark:"#9ca3af"},description:{light:"#111827",dark:"#f9fafb"},title:{light:"#111827",dark:"#f9fafb"}}},general:{background:{light:"#ffffff",dark:"#111827"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},statusLabel:{light:"#6b7280",dark:"#9ca3af"},statusValue:{light:"#16a34a",dark:"#16a34a"}},message:{myMessage:{background:{light:"#16a34a",dark:"#16a34a"},text:{light:"#ffffff",dark:"#ffffff"},isAnimated:!1},strangerMessage:{background:{light:"#f3f4f6",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},isAnimated:!1},systemMessage:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#6b7280",dark:"#9ca3af"}},deletedMessage:{text:{light:"#6b7280",dark:"#9ca3af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},inputBackground:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(55, 65, 81, 0.5)"},inputText:{light:"#111827",dark:"#f9fafb"},placeholderText:{light:"#9ca3af",dark:"#6b7280"},focusRing:{light:"#16a34a",dark:"#16a34a"}},buttons:{primary:{background:{light:"#16a34a",dark:"#16a34a"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#15803d",dark:"#16a34a"}},secondary:{background:{light:"#fff",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},hoverBackground:{light:"#d1d5db",dark:"#4b5563"},border:{light:"#d1d5db",dark:"#4b5563"}},destructive:{background:{light:"#dc2626",dark:"#ef4444"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b91c1c",dark:"#dc2626"},border:{light:"#dc2626",dark:"#ef4444"}},newMessages:{background:{light:"#f59e0b",dark:"#fcd347"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#d97706",dark:"#f59e0b"}}},reactions:{bubble:{background:{light:"#f3f4f6",dark:"#374151"},border:{light:"#ffffff",dark:"#111827"},text:{light:"#111827",dark:"#f3f4f6"}}}},l={name:"Monochrome Theme",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#525252",dark:"#e5e5e5"},faded:{light:"rgba(82, 82, 82, 0.15)",dark:"rgba(229, 229, 229, 0.15)"}},secondaryText:{light:"#a3a3a3",dark:"#a3a3a3"},errorText:{light:"#f87171",dark:"#ef4444"},linkColor:{light:"#404040",dark:"#fafafa"},announcement:{background:{light:"#fafafa",dark:"#262626"},text:{light:"#525252",dark:"#d4d4d4"},border:{light:"#e5e5e5",dark:"#404040"}},animations:{typingIndicatorDots:{dark:"#d4d4d4",light:"#737373"}},messageList:{scrollbarThumb:{light:"#d4d4d4",dark:"#525252"},scrollbarTrack:{light:"#fafafa",dark:"#171717"}},overlays:{emojiMenu:{background:{light:"#ffffff",dark:"#171717"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#e5e5e5",dark:"#262626"},border:{light:"#a3a3a3",dark:"#525252"},closeIcon:{light:"#a3a3a3",dark:"#a3a3a3"},description:{light:"#404040",dark:"#d4d4d4"},title:{light:"#171717",dark:"#fafafa"}}},general:{background:{light:"#ffffff",dark:"#171717"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(23, 23, 23, 0.6)"},border:{light:"rgba(229, 229, 229, 0.8)",dark:"rgba(64, 64, 64, 0.8)"},statusLabel:{light:"#a3a3a3",dark:"#a3a3a3"},statusValue:{light:"#404040",dark:"#e5e5e5"}},message:{myMessage:{background:{light:"#262626",dark:"#e5e5e5"},text:{light:"#ffffff",dark:"#171717"},isAnimated:!1},strangerMessage:{background:{light:"#e5e5e5",dark:"#262626"},text:{light:"#171717",dark:"#e5e5e5"},isAnimated:!1},systemMessage:{background:{light:"#fafafa",dark:"#262626"},text:{light:"#a3a3a3",dark:"#a3a3a3"}},deletedMessage:{text:{light:"#a3a3a3",dark:"#737373"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(23, 23, 23, 0.6)"},border:{light:"rgba(229, 229, 229, 0.8)",dark:"rgba(64, 64, 64, 0.8)"},inputBackground:{light:"#ffffff",dark:"rgba(64, 64, 64, 0.5)"},inputText:{light:"#262626",dark:"#e5e5e5"},placeholderText:{light:"#a3a3a3",dark:"#737373"},focusRing:{light:"#525252",dark:"#a3a3a3"}},buttons:{primary:{background:{light:"#262626",dark:"#fafafa"},text:{light:"#ffffff",dark:"#171717"},hoverBackground:{light:"#404040",dark:"#e5e5e5"}},secondary:{background:{light:"#ffffff",dark:"#262626"},text:{light:"#404040",dark:"#e5e5e5"},hoverBackground:{light:"#fafafa",dark:"#404040"},border:{light:"#e5e5e5",dark:"#404040"}},destructive:{background:{light:"#fca5a5",dark:"#ef4444"},text:{light:"#7f1d1d",dark:"#ffffff"},hoverBackground:{light:"#f87171",dark:"#dc2626"},border:{light:"#fca5a5",dark:"#ef4444"}},newMessages:{background:{light:"#fb923c",dark:"#fdba74"},text:{light:"#ffffff",dark:"#431407"},hoverBackground:{light:"#f97316",dark:"#fb923c"}}},reactions:{bubble:{background:{light:"#e5e5e5",dark:"#404040"},border:{light:"#ffffff",dark:"#171717"},text:{light:"#404040",dark:"#e5e5e5"}}}},d={name:"Tyron's Theme",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#ee9ca7",dark:"#e18ea6"},faded:{light:"rgba(238, 156, 167, 0.15)",dark:"rgba(225, 142, 166, 0.15)"}},secondaryText:{light:"#a195a0",dark:"#b0a5af"},errorText:{light:"#f87171",dark:"#f87171"},linkColor:{light:"#9333ea",dark:"#c084fc"},announcement:{background:{light:"#fff9fb",dark:"#4c3b4d"},text:{light:"#5c4754",dark:"#fdecf2"},border:{light:"#fceaf2",dark:"#604d60"}},animations:{typingIndicatorDots:{dark:"#fdecf2",light:"#d66983"}},messageList:{scrollbarThumb:{light:"#fceaf2",dark:"#7c5c7a"},scrollbarTrack:{light:"#fff9fb",dark:"#302830"}},overlays:{emojiMenu:{background:{light:"#fff9fb",dark:"#302830"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#fdecf2",dark:"#4c3b4d"},border:{light:"#ee9ca7",dark:"#e18ea6"},closeIcon:{light:"#a195a0",dark:"#b0a5af"},description:{light:"#5c4754",dark:"#fdecf2"},title:{light:"#d66983",dark:"#ee9ca7"}}},general:{background:{light:"#fffbff",dark:"#302830"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 249, 251, 0.6)",dark:"rgba(48, 40, 48, 0.6)"},border:{light:"rgba(253, 236, 242, 0.8)",dark:"rgba(76, 59, 77, 0.8)"},statusLabel:{light:"#a195a0",dark:"#b0a5af"},statusValue:{light:"#d66983",dark:"#ee9ca7"}},message:{myMessage:{background:{light:"#ee9ca7",dark:"#e18ea6"},text:{light:"#ffffff",dark:"#ffffff"},isAnimated:!1},strangerMessage:{background:{light:"#fdecf2",dark:"#4c3b4d"},text:{light:"#5c4754",dark:"#fdecf2"},isAnimated:!1},systemMessage:{background:{light:"#fdecf2",dark:"#4c3b4d"},text:{light:"#a195a0",dark:"#b0a5af"}},deletedMessage:{text:{light:"#a195a0",dark:"#b0a5af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 249, 251, 0.6)",dark:"rgba(48, 40, 48, 0.6)"},border:{light:"rgba(253, 236, 242, 0.8)",dark:"rgba(76, 59, 77, 0.8)"},inputBackground:{light:"#fffbff",dark:"rgba(76, 59, 77, 0.5)"},inputText:{light:"#5c4754",dark:"#ee9ca7"},placeholderText:{light:"#a195a0",dark:"#7c5c7a"},focusRing:{light:"#ee9ca7",dark:"#e18ea6"}},buttons:{primary:{background:{light:"#ee9ca7",dark:"#e18ea6"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#e18ea6",dark:"#d66983"}},secondary:{background:{light:"#fffbff",dark:"#4c3b4d"},text:{light:"#d66983",dark:"#ee9ca7"},hoverBackground:{light:"#fdecf2",dark:"#604d60"},border:{light:"#fceaf2",dark:"#604d60"}},destructive:{background:{light:"#fca5a5",dark:"#ef4444"},text:{light:"#7f1d1d",dark:"#ffffff"},hoverBackground:{light:"#f87171",dark:"#dc2626"},border:{light:"#fca5a5",dark:"#ef4444"}},newMessages:{background:{light:"#fb923c",dark:"#fdba74"},text:{light:"#ffffff",dark:"#431407"},hoverBackground:{light:"#f97316",dark:"#fb923c"}}},reactions:{bubble:{background:{light:"#fdecf2",dark:"#604d60"},border:{light:"#fffbff",dark:"#302830"},text:{light:"#d66983",dark:"#ee9ca7"}}}},c={name:"Criminology",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#991B1B",dark:"#DC2626"},faded:{light:"rgba(153, 27, 27, 0.15)",dark:"rgba(220, 38, 38, 0.15)"}},secondaryText:{light:"#4B5563",dark:"#9CA3AF"},errorText:{light:"#DC2626",dark:"#F87171"},linkColor:{light:"#2563EB",dark:"#60A5FA"},announcement:{background:{light:"#FEF2F2",dark:"#450A0A"},text:{light:"#991B1B",dark:"#FECACA"},border:{light:"#FEE2E2",dark:"#7F1D1D"}},animations:{typingIndicatorDots:{dark:"#F87171",light:"#DC2626"}},messageList:{scrollbarThumb:{light:"#D1D5DB",dark:"#4B5563"},scrollbarTrack:{light:"#F3F4F6",dark:"#111827"}},overlays:{emojiMenu:{background:{light:"#ffffff",dark:"#1F2937"},shadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},replyingPreview:{background:{light:"#F3F4F6",dark:"#374151"},border:{light:"#991B1B",dark:"#DC2626"},closeIcon:{light:"#6B7280",dark:"#9CA3AF"},description:{light:"#374151",dark:"#D1D5DB"},title:{light:"#991B1B",dark:"#F87171"}}},general:{background:{light:"linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),\n            url('https://i.pinimg.com/736x/79/49/4a/79494ae35b2b47b6f5ad4f796518ee51.jpg') center / cover no-repeat",dark:"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),\n            url('https://i.pinimg.com/736x/79/49/4a/79494ae35b2b47b6f5ad4f796518ee51.jpg') center / cover no-repeat"},backdropBlur:"1rem",shadow:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04)",borderRadius:"1rem"},header:{background:{light:"rgba(249, 250, 251, 0.7)",dark:"rgba(17, 24, 39, 0.7)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},statusLabel:{light:"#6B7280",dark:"#9CA3AF"},statusValue:{light:"#991B1B",dark:"#DC2626"}},message:{myMessage:{background:{light:"#BE123C",dark:"#9F1239"},text:{light:"#ffffff",dark:"#ffffff"},isAnimated:!1},strangerMessage:{background:{light:"#E5E7EB",dark:"#374151"},text:{light:"#1F2937",dark:"#F9FAFB"},isAnimated:!1},systemMessage:{background:{light:"#F59E0B",dark:"#B45309"},text:{light:"#1F2937",dark:"#ffffff"}},deletedMessage:{text:{light:"#6B7280",dark:"#9CA3AF"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.5)",dark:"rgba(0, 0, 0, 0.5)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(249, 250, 251, 0.7)",dark:"rgba(17, 24, 39, 0.7)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},inputBackground:{light:"#ffffff",dark:"#1F2937"},inputText:{light:"#111827",dark:"#F3F4F6"},placeholderText:{light:"#9CA3AF",dark:"#6B7280"},focusRing:{light:"#BE123C",dark:"#DC2626"}},buttons:{primary:{background:{light:"#BE123C",dark:"#9F1239"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#9F1239",dark:"#BE123C"}},secondary:{background:{light:"#E5E7EB",dark:"#374151"},text:{light:"#1F2937",dark:"#F9FAFB"},hoverBackground:{light:"#D1D5DB",dark:"#4B5563"},border:{light:"#D1D5DB",dark:"#4B5563"}},destructive:{background:{light:"#DC2626",dark:"#B91C1C"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#B91C1C",dark:"#991B1B"},border:{light:"#DC2626",dark:"#B91C1C"}},newMessages:{background:{light:"#F59E0B",dark:"#D97706"},text:{light:"#111827",dark:"#ffffff"},hoverBackground:{light:"#D97706",dark:"#B45309"}}},reactions:{bubble:{background:{light:"#F3F4F6",dark:"#4B5563"},border:{light:"#ffffff",dark:"#1F2937"},text:{light:"#4B5563",dark:"#F3F4F6"}}}},u={name:"Speak Now (ts)",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#9B59B6",dark:"#7D3C98"},faded:{light:"rgba(155, 89, 182, 0.15)",dark:"rgba(125, 60, 152, 0.15)"}},secondaryText:{light:"#6C5B7B",dark:"#C39BD3"},errorText:{light:"#E74C3C",dark:"#C0392B"},linkColor:{light:"#2980B9",dark:"#5499C7"},announcement:{background:{light:"#FCF3CF",dark:"#7E5109"},text:{light:"#B9770E",dark:"#F9E79F"},border:{light:"#F7DC6F",dark:"#935116"}},animations:{typingIndicatorDots:{dark:"#D2B4DE",light:"#BB8FCE"}},messageList:{scrollbarThumb:{light:"#DADFE1",dark:"#5D6D7E"},scrollbarTrack:{light:"#F4F6F6",dark:"#2C3E50"}},overlays:{emojiMenu:{background:{light:"#FFFFFF",dark:"#2E2E2E"},shadow:"0 10px 15px -3px rgba(125, 60, 152, 0.2), 0 4px 6px -2px rgba(0,0,0,0.1)"},replyingPreview:{background:{light:"#F7F1FF",dark:"#4A235A"},border:{light:"#9B59B6",dark:"#7D3C98"},closeIcon:{light:"#7D3C98",dark:"#D2B4DE"},description:{light:"#5B2C6F",dark:"#E8DAEF"},title:{light:"#9B59B6",dark:"#BB8FCE"}}},general:{background:{light:"linear-gradient(rgba(253, 254, 254, 0.7), rgba(253, 254, 254, 0.7)), url('https://wallpapers.com/images/high/taylor-swift-speak-now-collage-49rfrjvvk4p5q2je.webp') center/cover no-repeat",dark:"linear-gradient(rgba(28, 28, 28, 0.7), rgba(28, 28, 28, 0.7)), url('https://wallpapers.com/images/high/taylor-swift-speak-now-collage-49rfrjvvk4p5q2je.webp') center/cover no-repeat"},backdropBlur:"1rem",shadow:"0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)",borderRadius:"1rem"},header:{background:{light:"rgba(253, 254, 254, 0.7)",dark:"rgba(28, 28, 28, 0.7)"},border:{light:"rgba(221, 160, 221, 0.8)",dark:"rgba(93, 53, 102, 0.8)"},statusLabel:{light:"#7D3C98",dark:"#D2B4DE"},statusValue:{light:"#9B59B6",dark:"#BB8FCE"}},message:{myMessage:{background:{light:"#8E44AD",dark:"#6C3483"},text:{light:"#FFFFFF",dark:"#FFFFFF"},isAnimated:!1},strangerMessage:{background:{light:"#E8DAEF",dark:"#4A235A"},text:{light:"#2C3E50",dark:"#FDEDEC"},isAnimated:!1},systemMessage:{background:{light:"#F7DC6F",dark:"#9A7D0A"},text:{light:"#1C1C1C",dark:"#FFFFFF"}},deletedMessage:{text:{light:"#AAB7B8",dark:"#566573"}},imageOverlay:{background:{light:"rgba(28, 28, 28, 0.5)",dark:"rgba(28, 28, 28, 0.5)"},text:{light:"#FFFFFF",dark:"#FFFFFF"}}},inputArea:{background:{light:"rgba(253, 254, 254, 0.7)",dark:"rgba(28, 28, 28, 0.7)"},border:{light:"rgba(221, 160, 221, 0.8)",dark:"rgba(93, 53, 102, 0.8)"},inputBackground:{light:"#FFFFFF",dark:"#2E2E2E"},inputText:{light:"#1C1C1C",dark:"#E8DAEF"},placeholderText:{light:"#A569BD",dark:"#76448A"},focusRing:{light:"#9B59B6",dark:"#BB8FCE"}},buttons:{primary:{background:{light:"#9B59B6",dark:"#7D3C98"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#7D3C98",dark:"#9B59B6"}},secondary:{background:{light:"#E8DAEF",dark:"#4A235A"},text:{light:"#2C3E50",dark:"#FDEDEC"},hoverBackground:{light:"#D2B4DE",dark:"#633974"},border:{light:"#D2B4DE",dark:"#633974"}},destructive:{background:{light:"#E74C3C",dark:"#C0392B"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#C0392B",dark:"#E74C3C"},border:{light:"#E74C3C",dark:"#C0392B"}},newMessages:{background:{light:"#F7DC6F",dark:"#9A7D0A"},text:{light:"#1C1C1C",dark:"#FFFFFF"},hoverBackground:{light:"#D4AC0D",dark:"#7E5109"}}},reactions:{bubble:{background:{light:"#F4ECF7",dark:"#512E5F"},border:{light:"#FFFFFF",dark:"#2C3E50"},text:{light:"#512E5F",dark:"#F4ECF7"}}}}},9732:()=>{},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(5155),n=r(2115),s=r(9434);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"}}]);