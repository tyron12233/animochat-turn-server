(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{165:(e,t,a)=>{"use strict";a.d(t,{m:()=>o});var r=a(2115),n=a(4570),i=a(9698);let s=a(5791).Y,o=function(e,t){var a;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{setTheme:l,setMode:d}=(0,n.j)(),[c,g]=(0,r.useState)(null!=(a=null==t?void 0:t.id)?a:""),[u,h]=(0,r.useState)("intro"),[f,m]=(0,r.useState)("initializing"),[b,k]=(0,r.useState)([]),[p,x]=(0,r.useState)(""),[y,v]=(0,r.useState)([]),[F,w]=(0,r.useState)([]);(0,r.useEffect)(()=>{t&&(console.log("User data available:",t),g(t.id))},[t]);let j=(0,r.useRef)(null),C=(0,r.useRef)(null),E=(0,r.useRef)(!1),N=(e,t,a)=>{console.log("Handling reaction:",{messageId:e,emoji:t,userId:a}),k(r=>r.map(r=>{let n;if(r.id!==e||"system"===r.type)return r;let i=r.reactions||[],s=i.findIndex(e=>e.user_id===a);return s>-1?t?(n=[...i])[s]={user_id:a,emoji:t,message_id:e}:n=i.filter((e,t)=>t!==s):n=t?[...i,{user_id:a,emoji:t,message_id:e}]:i,{...r,reactions:n}}))},A=(0,r.useCallback)(async e=>{j.current&&j.current.readyState===WebSocket.OPEN?j.current.send(JSON.stringify(e)):console.error("Cannot send packet, WebSocket connection is not open.")},[]),S=(0,r.useCallback)(e=>{c&&p&&(k(t=>t.filter(t=>t.id!==e)),A({type:"message_delete",content:e,sender:c}))},[c,p,A]),D=(0,r.useRef)(null),B=(0,r.useCallback)(()=>{if(E.current){D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{E.current=!1,A({type:"typing",content:!1,sender:c})},3e3);return}E.current=!0,A({type:"typing",content:!0,sender:c}),D.current=setTimeout(()=>{E.current=!1,D.current&&clearTimeout(D.current),A({type:"typing",content:!1,sender:c})},3e3)},[c,A]),T=(0,r.useCallback)(async(e,t)=>{c&&(N(e,t||null,c),A({type:"reaction",sender:c,content:{message_id:e,emoji:t||null,user_id:c}}))},[c,A]),M=(0,r.useCallback)((e,t)=>{t&&e&&c&&(k(a=>a.map(a=>a.id===e?{...a,content:t,edited:!0}:a)),A({type:"edit_message",content:{message_id:e,new_content:t,user_id:c},sender:c}))},[c,A]),_=(0,r.useCallback)((e,a)=>{if(!c||!p)return;A({type:"typing",content:!1,sender:c});let r={id:"msg_".concat(Date.now()),session_id:p,created_at:new Date().toISOString(),content:e,replyingTo:a,sender:c,role:null==t?void 0:t.role},n={type:"message",content:r,sender:c};console.log("sending packet",n),A(n),k(e=>[...e,r])},[c,p,A,e]),I=(0,r.useCallback)(function(){var t,a;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];P.current=!0,O.current&&clearTimeout(O.current);let n=async()=>{let t="".concat(s,"/session/disconnect?userId=").concat(c);try{let a={"Content-Type":"application/json"};(null==e?void 0:e.access_token)&&(a.Authorization="Bearer ".concat(e.access_token));let r=await fetch(t,{method:"POST",headers:a,body:JSON.stringify({userId:c})});r.ok?console.log("Successfully disconnected from session."):console.error("Failed to disconnect from session:",r.statusText)}catch(e){console.error("Error disconnecting from session:",e)}};r||n().then(()=>{console.log("Disconnected from matchmaking and chat.")});let i={id:"system_".concat(Date.now()),session_id:p,created_at:new Date().toISOString(),type:"system",content:"You have disconnected from the chat.",sender:"system"};k(e=>[...e,i]),j.current&&!r&&j.current.send(JSON.stringify({type:"disconnect",content:null,sender:c})),null==(t=j.current)||t.close(),j.current=null,null==(a=C.current)||a.close(),C.current=null,m("disconnected"),x("")},[c]),P=(0,r.useRef)(!1),O=(0,r.useRef)(null),R=(0,r.useRef)(0),L=(0,r.useCallback)(async function(e,t){var a,r,n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!j.current){if(e.endsWith("/")&&(e=e.slice(0,-1)),!c)return void console.error("User ID not set, cannot connect to chat.");console.log("Attempting to connect to chat: ".concat(t,". Reconnecting: ").concat(s)),P.current=!1,O.current&&clearTimeout(O.current);try{let a="".concat(e,"?userId=").concat(c,"&chatId=").concat(t);console.trace("Connecting to WebSocket server: ".concat(a));let r=new WebSocket(a);j.current=r,r.onopen=()=>{let e;if(console.log("WebSocket connection established."),m("connected"),R.current=0,s)e="Reconnected to the chat successfully.",o&&(e="Connected to chat room.");else if(g)e="We couldn't find a match with your interests, so you matched with a random stranger. Say hi!";else if(i.length>0){let t=i.map(e=>e.trim()).filter(Boolean).join(", ");e=t?"You matched with a stranger on ".concat(t,"! Say hi!"):"You matched with a random stranger! Say hi!"}else e="You matched with a random stranger! Say hi!";let a={id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:e,sender:"system"};!o&&(k(e=>s?e:[a]),s&&k(e=>[...e,a]))},r.onmessage=async e=>{var a,n;let i,s=e.data,g=i=s instanceof Blob?JSON.parse(await s.text()):JSON.parse(s);if(g.sender!==c)switch(i.type){case"message_delete":let u=i.content;k(e=>e.map(e=>e.id===u?{...e,type:"deleted"}:e));break;case"change_nickname":let{userId:h,newNickname:f}=i.content,b=null==(a=F.find(e=>e.userId===h))?void 0:a.nickname;b||(console.warn("Nickname change received for unknown user: ".concat(h)),b="A participant"),w(e=>e.map(e=>e.userId===h?{...e,nickname:f}:e)),k(e=>[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:"".concat(b," changed their nickname to ").concat(f,"."),sender:"system"}]);break;case"change_theme":let{mode:p,theme:y}=i.content;console.log("Changing theme to:",y.name,"Mode:",p),d(p),l(y),k(e=>[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:"Theme changed to ".concat(y.name," in ").concat(p," mode."),sender:"system"}]);break;case"offline":let E=i.content,A=F.find(e=>e.userId===E);if(!A)return void console.warn("Offline packet received for unknown user: ".concat(E));k(e=>{var a;return[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:"".concat(null!=(a=A.nickname)?a:"A participant"," has left the chat."),sender:"system"}]});break;case"disconnect":k(e=>[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:"The other user has disconnected.",sender:"system"}]),r.close(),P.current=!0,O.current&&clearTimeout(O.current),R.current=0,j.current=null,null==(n=C.current)||n.close(),x(""),m("disconnected");break;case"participants_sync":console.log("SYNCING PARTICIPANTS",g.content),w(g.content);break;case"participant_joined":if(!o)return;let S=g.content;w(e=>e.some(e=>e.userId===S.userId)?e:[...e,S]),k(e=>[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:"".concat(S.nickname," joined the chat."),sender:"system"}]);break;case"STATUS":k(e=>[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:g.message,sender:"system"}]);break;case"message":k(e=>[...e,i.content]);break;case"reaction":let{message_id:D,emoji:B,user_id:T}=i.content;N(D,B,T);break;case"typing":let M=i.content,_=i.sender;v(e=>{let t=e.includes(_);return M?t?e:[...e,_]:e.filter(e=>e!==_)});break;case"edit_message":let{message_id:I,new_content:L,user_id:z}=i.content;k(e=>e.map(e=>e.id===I&&e.sender===z?{...e,content:L,edited:!0}:e));break;default:console.warn("Unknown packet type received:",i.type)}},r.onclose=a=>{if(console.log("WebSocket connection closed.",a),P.current)return void console.log("Intentional disconnect, not reconnecting.");j.current=null,m("reconnecting"),k(e=>[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:"Connection lost. Attempting to reconnect...",sender:"system"}]),R.current<5?(R.current++,console.log("Scheduling reconnection attempt #".concat(R.current)),O.current=setTimeout(()=>{L(e,t,[],!0)},4e3*R.current)):(console.error("Max reconnection attempts reached. Giving up."),k(e=>[...e,{id:"system_".concat(Date.now()),session_id:t,created_at:new Date().toISOString(),type:"system",content:"Could not reconnect to the server. Please find a new match.",sender:"system"}]),m("error"))},r.onerror=e=>{console.error("WebSocket error:",e),m("error")}}catch(i){console.error("Failed to establish connection:",i),null==(a=j.current)||a.close(),j.current?null==(r=(n=j.current).onclose)||r.call(n,new CloseEvent("close")):R.current<5&&(R.current++,O.current=setTimeout(()=>{L(e,t,[],!0)},4e3*R.current))}}},[t,c,N,l,d,A,k,m]),z=(0,r.useCallback)(e=>{if(console.log("Starting matchmaking with interests:",e),!c){console.error("User ID not set yet. Cannot start matchmaking."),m("error");return}h("chat"),m("finding_match");let t="".concat(s,"/matchmaking?userId=").concat(c);e.length>0&&(t+="&interests=".concat(encodeURIComponent(e.join(",")))),console.log("Connecting to matchmaking server: ".concat(t));let a=new EventSource(t);C.current=a,a.onmessage=t=>{let r=JSON.parse(t.data);if(console.log("Matchmaking update:",r),"MATCHED"===r.state&&r.chatId){a.close(),x(r.chatId),m("connecting"),d("light"),l(i.zQ);let t=[];r.interest&&""!==r.interest?console.log("Interests for this match:",t=r.interest.split(",")):console.log("No interests provided, using default.");let n=!1;t.length!==e.length&&e.length>0&&(n=!0),L(r.chatServerUrl,r.chatId,t,!1,n)}else"WAITING"===r.state&&m("waiting_for_match")},a.onerror=e=>{console.error("EventSource failed:",e),m("error"),a.close()}},[c,L]),U=(0,r.useCallback)(()=>{j.current?(console.log("--- SIMULATING DISCONNECT ---"),j.current.close()):console.warn("--- SIMULATE DISCONNECT: No active WebSocket connection. ---")},[]);return(0,r.useEffect)(()=>(window.simulateDisconnect=U,console.log("Disconnection test function available in console: `window.simulateDisconnect()`"),()=>{delete window.simulateDisconnect}),[U]),{screen:u,status:f,messages:b,userId:c,typingUsers:y,participants:F,handleGetStarted:()=>h("matchmaking"),connectToExistingSession:function(t){m("connecting"),h("chat");let a=async(t,a)=>{let r=t.endsWith("/")?t.slice(0,-1):t,n="".concat(r,"/sync/").concat(a);try{let t={};(null==e?void 0:e.access_token)&&(t.Authorization="Bearer ".concat(e.access_token));let a=await fetch(n,{headers:t});if(!a.ok)throw Error("Failed to sync messages: ".concat(a.statusText));return await a.json()}catch(e){return console.error("Error syncing messages:",e),[]}};x(t.chatId),a(t.chatServerUrl,t.chatId).then(e=>{k(e.messages.content||[]),w(e.participants||[]),l(e.theme||i.zQ),d(e.mode||"light")}).catch(()=>(m("error"),console.error("Failed to sync messages or participants."),[])).then(()=>{L(t.chatServerUrl,t.chatId,[],!0)})},startMatchmaking:z,onCancelMatchmaking:()=>{(()=>{let t={"Content-Type":"application/json"};return(null==e?void 0:e.access_token)&&(t.Authorization="Bearer ".concat(e.access_token)),fetch("".concat(s,"/cancel_matchmaking"),{method:"POST",headers:t,body:JSON.stringify({userId:c})})})().then(e=>{if(!e.ok)throw Error("Failed to cancel matchmaking: ".concat(e.statusText));console.log("Matchmaking cancelled successfully."),console.log("Cancelling matchmaking..."),C.current&&(C.current.close(),C.current=null),m("ready"),h("matchmaking"),x("")}).catch(e=>{console.error("Error cancelling matchmaking:",e),m("finding_match")})},onDeleteMessage:S,sendMessage:_,disconnect:I,onReact:T,onChangeTheme:(e,t)=>{if(console.log("THEME CHANGE REQUESTED"),!c||!p)return;A({type:"change_theme",content:{mode:e,theme:t},sender:c}),d(e),l(t);let a={id:"system_".concat(Date.now()),session_id:p,created_at:new Date().toISOString(),type:"system",content:"Theme changed to ".concat(t.name," in ").concat(e," mode."),sender:"system"};k(e=>[...e,a])},onChangeNickname:e=>{if(0===e.length)return;A({type:"change_nickname",content:{newNickname:e,userId:c},sender:c});let t={id:"system_".concat(Date.now()),session_id:p,created_at:new Date().toISOString(),type:"system",content:"You changed your nickname to ".concat(e,"."),sender:"system"};k(e=>[...e,t])},editMessage:M,onStartTyping:B}}},192:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(2596),n=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}},2099:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});let r=(0,a(4982).UU)("https://wkafplnaexyyuobfufxa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndrYWZwbG5hZXh5eXVvYmZ1ZnhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0NjYwODEsImV4cCI6MjA2MTA0MjA4MX0.Sp9g2aWN24QoymYPoYJbxInnFNMautc26uJ1ba6Dvdc")},3287:()=>{},3667:(e,t,a)=>{"use strict";a.d(t,{U:()=>l});var r=a(5155),n=a(9300),i=a.n(n),s=a(7859),o=a(2115);let l=e=>{let{children:t,className:a}=e,n=(0,o.useRef)(null),[l,d]=(0,o.useState)("auto");return(0,o.useEffect)(()=>{if(n.current){let e=new ResizeObserver(e=>{d(e[0].contentRect.height)});return e.observe(n.current),()=>{e.disconnect()}}},[]),(0,r.jsx)(s.P.div,{className:i()(a,"overflow-visible"),style:{height:l},animate:{height:l},transition:{duration:.14},children:(0,r.jsx)("div",{ref:n,children:t})})}},4570:(e,t,a)=>{"use strict";a.d(t,{h:()=>o,j:()=>l});var r=a(5155),n=a(2115),i=a(9698);let s=(0,n.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,n.useState)(i.zQ),[l,d]=(0,n.useState)("light"),c=(0,n.useMemo)(()=>({theme:a,mode:l,setMode:d,setTheme:o}),[a,l]);return(0,r.jsx)(s.Provider,{value:c,children:t})},l=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useChatTheme must be used within a ChatThemeProvider");return e}},5791:(e,t,a)=>{"use strict";a.d(t,{Y:()=>r});let r="http://animochat-matchmaking-server-prod.ap-southeast-1.elasticbeanstalk.com"},6930:(e,t,a)=>{"use strict";a.d(t,{A:()=>eo});var r=a(5155),n=a(2115),i=a(3319);a(9732),a(3287);var s=a(892),o=a(8619),l=a(8829),d=a(7859),c=a(4032),g=a(9424);function u(e){let{visible:t,isUserMessage:a,reply:n,onOpenEmojiMenu:i,theme:s,mode:o,isDeleted:l=!1}=e,d={backgroundColor:"transparent",color:s.secondaryText[o]};return(0,r.jsxs)("div",{className:"flex flex-row h-full items-center justify-center space-x-1 self-center ".concat(t?"visible":"invisible"),children:[(0,r.jsx)("div",{className:"".concat(a?"mr-1":"ml-2"," rounded-full transition-colors p-2 cursor-pointer hover:opacity-100 opacity-60"),style:d,onClick:n,children:(0,r.jsx)(c.A,{className:"w-4 h-4",strokeWidth:"2"})}),!l&&(0,r.jsx)("div",{className:"rounded-full transition-colors p-2 cursor-pointer hover:opacity-100 opacity-60",onClick:i,style:d,children:(0,r.jsx)(g.A,{className:"w-4 h-4",strokeWidth:"2"})}),a&&(0,r.jsx)("div",{className:"w-1"})]},"actions")}var h=a(6766);function f(e){let{message:t,isUserMessage:a,theme:n,mode:i}=e;return t?"image"===t.type?(0,r.jsx)(m,{message:t,isUserMessage:a,theme:n,mode:i}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"rounded-tl-3xl rounded-tr-3xl rounded-b-3xl px-3 pt-2 text-sm opacity-[0.65] pb-[32px] -mb-[32px] -z-10",style:{backgroundColor:n.overlays.replyingPreview.background[i],color:n.overlays.replyingPreview.description[i]},children:(0,r.jsx)("p",{className:"break-words whitespace-pre-wrap",children:"deleted"===t.type?"Deleted message.":t.content})})}):null}function m(e){let{message:t,isUserMessage:a,theme:n,mode:i}=e;return(0,r.jsx)("div",{className:"pb-[32px] -mb-[32px] rounded-t-lg rounded-b-md overflow-hidden",style:{backgroundColor:n.general.background[i]},children:(0,r.jsx)(h.default,{src:t.content,alt:"Reply image",className:"object-contain",width:80,height:100})})}function b(e){let{message:t,user:a,theme:n,mode:i}=e,s=t.reactions;if(!s||0===s.length)return null;let o=s.length,l=Array.from(new Set(s.map(e=>e.emoji)));return s.find(e=>e.user_id===a.id),(0,r.jsx)(d.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.2,ease:"easeOut"},className:"flex justify-end px-2",children:(0,r.jsx)("div",{className:"self-end text-xs relative rounded-full mt-auto border-2 p-1.5 -top-2",style:{backgroundColor:n.reactions.bubble.background[i],borderColor:n.reactions.bubble.border[i],color:n.reactions.bubble.text[i]},children:(0,r.jsxs)("div",{className:"flex justify-center items-center",children:[l.map((e,t)=>(0,r.jsx)("div",{className:"text-center",children:e},t)),o>0&&(0,r.jsx)("p",{className:"pl-1",children:(0,r.jsx)("span",{children:o})})]})})})}var k=a(9597);function p(e){var t,a,i;let{name:s=null,message:g,user:h,hovered:m,reply:k,animate:p=!1,onOpenEmojiMenu:y,onResendMessage:F,theme:w,mode:j,advertisementMessageId:C,onLinkClick:E,onReact:N}=e,A=g.sender===h.id,S=(a=g.hasPrevious,i=g.hasNext,A?"rounded-tl-3xl rounded-bl-3xl ".concat(a?"rounded-tr-sm":"rounded-tr-3xl"," ").concat(i?"rounded-br-sm":"rounded-br-3xl"):"rounded-tr-3xl rounded-br-3xl ".concat(a?"rounded-tl-sm":"rounded-tl-3xl"," ").concat(i?"rounded-bl-sm":"rounded-bl-3xl")),D="sending"===g.status,B="error"===g.status,T=null!=(t=g.edited)&&t,M=g.content,_=function(e){let t=e.trim();if(!t)return!1;let a=t.replace(/\s+/g,""),r=RegExp("(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu"),n=a.match(r);return!!n&&n.join("")===a}(M)&&3>=function(e){let t=e.trim().replace(/\s+/g,""),a=RegExp("(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu"),r=t.match(a);return r?r.length:0}(M),I=(0,o.d)(0),P=(0,l.G)(I,A?[0,-30,-40,-50]:[0,30,40,50],[0,.5,.8,1]),O=function(e){let{delay:t=500}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,n.useRef)(null),r=(0,n.useRef)(!1),i=(0,n.useCallback)(()=>{null!==a.current&&(clearTimeout(a.current),a.current=null)},[]),s=(0,n.useCallback)(n=>{r.current=!1,a.current=window.setTimeout(()=>{e(n)},t)},[e,t]),o=(0,n.useCallback)(e=>{r.current=!0,i()},[i]);return{onTouchStart:s,onTouchMove:o,onTouchEnd:(0,n.useCallback)(e=>{r.current||e.stopPropagation(),i()},[i]),onTouchCancel:(0,n.useCallback)(e=>{i()},[i])}}(()=>{"deleted"!==g.type&&y()});return(0,r.jsxs)("div",{className:"relative flex w-full items-center ".concat(A?"justify-end":"justify-start"),children:[(0,r.jsx)(d.P.div,{className:"absolute p-2.5 rounded-full",style:{background:w.accent.faded[j],scale:P},children:(0,r.jsx)(c.A,{className:"w-4 h-4",style:{color:w.accent.main[j]}})}),!B&&A&&(0,r.jsx)("p",{className:"opacity-50 text-[0.70rem] self-end pr-2 pb-2 overflow-clip -mr-[80px] ".concat(C!==g.id||m?"invisible":"visible"),style:{color:w.secondaryText[j]},children:"AnimoChat.com"}),A&&(0,r.jsx)(u,{isUserMessage:g.sender===h.id,visible:m,theme:w,mode:j,reply:k,onOpenEmojiMenu:y,isDeleted:"deleted"===g.type}),B&&A&&(0,r.jsxs)("p",{style:{color:w.errorText[j]},className:"opacity-80 text-[0.70rem] self-end pr-2 pb-2 overflow-clip",children:["Error sending message."," ",(0,r.jsx)("span",{className:"underline cursor-pointer",onClick:()=>F(g),children:"Retry"})]}),(0,r.jsxs)(d.P.div,{id:"message-bubble","data-sender-id":g.sender,dragSnapToOrigin:!0,dragTransition:{bounceDamping:13},drag:"x",dragConstraints:{left:0,right:0},onDrag:(e,t)=>{A&&t.offset.x>0||!A&&t.offset.x<0||I.set(t.offset.x)},onDragEnd:(e,t)=>{(A&&t.offset.x<-50||!A&&t.offset.x>50)&&k(),I.set(0)},whileTap:{scale:.8},style:{x:I,originX:+!!A,WebkitTapHighlightColor:"transparent"},onDoubleClick:()=>N("❤️"),..."deleted"!==g.type&&{onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),y()}},...O,initial:!!p&&{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.4},className:"max-w-[75%] mb-0.5 flex flex-col ".concat(A?"items-end":"items-start"," ").concat(D?"opacity-50":""),children:[T&&(0,r.jsx)("p",{className:"text-[0.70rem] px-2",style:{color:w.secondaryText[j]},children:"Edited"}),s&&(0,r.jsx)("p",{className:"text-[0.70rem] px-2",style:{color:w.secondaryText[j]},children:s}),g.replyingTo&&(0,r.jsx)(f,{message:g.replyingTo,isUserMessage:A,theme:w,mode:j}),(null===g.type||void 0===g.type||"text"===g.type||"deleted"===g.type)&&(0,r.jsx)(v,{message:g,user:h,theme:w,mode:j,isUserMessage:A,roundedCorners:S,isLargeEmojiMessage:_,onLinkClick:E}),(0,r.jsx)(b,{message:g,user:h,theme:w,mode:j}),"image"===g.type&&(0,r.jsx)(x,{user:h,message:g,roundedCorners:S,isUserMessage:A,theme:w,mode:j})]},g.id+"-bubble"),!A&&(0,r.jsx)(u,{visible:m,theme:w,mode:j,isUserMessage:!1,reply:k,onOpenEmojiMenu:y}),!A&&(0,r.jsx)("p",{className:"opacity-50 text-[0.70rem] self-end pl-2 pb-2 -ml-[70px] ".concat(C!==g.id||m?"invisible":"visible"),style:{color:w.secondaryText[j]},children:"AnimoChat.com"})]},g.id)}function x(e){let{user:t,message:a,roundedCorners:i,isUserMessage:s,theme:o,mode:l}=e,[d,c]=(0,n.useState)(!1),g="rounded-3xl ".concat(i," ").concat(s?"rounded-tr-3xl":"rounded-tl-3xl");return(0,r.jsxs)("div",{id:"image-message-container",onClick:()=>c(!0),style:{cursor:"pointer"},children:[(0,r.jsxs)("div",{className:g,style:{overflow:"hidden",position:"relative",border:"2px solid transparent"},children:[(0,r.jsx)(k.A8,{src:a.content,children:(0,r.jsx)(h.default,{width:Math.min(.6*window.innerWidth,300),height:Math.min(.6*window.innerWidth,300),className:g,src:a.content,alt:"Image",style:{filter:d?"none":"blur(8px)",transition:"filter 0.3s ease-in-out",maxWidth:"100%",objectFit:"contain",backgroundColor:o.general.background[l]},sizes:"(max-width: 768px) 70vw, 400px"})},a.id),!d&&(0,r.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:o.message.imageOverlay.text[l],backgroundColor:o.message.imageOverlay.background[l],padding:"4px 8px",borderRadius:"0.25rem",pointerEvents:"none",fontSize:"0.85rem"},children:"(tap to reveal)"})]}),(0,r.jsx)(b,{message:a,user:t,theme:o,mode:l})]})}function y(e){let{className:t,isUserMessage:a,hasNext:n,hasPrevious:i}=e;return(0,r.jsx)("style",{children:"\n\n.".concat(t,' {\n    position: relative;\n}\n\n@property --angle{\n  syntax: "<angle>";\n  initial-value: 0deg;\n  inherits: false;\n}\n\n.').concat(t,"::after, .").concat(t,"::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: -1;\n    ").concat(function(e,t,a){let r,n,i,s,o="0.25rem",l="1.5rem";return e?(r=l,i=l,n=t?o:l,s=a?o:l):(n=l,s=l,r=t?o:l,i=a?o:l),"\n    border-top-left-radius: ".concat(r,";\n    border-top-right-radius: ").concat(n,";\n    border-bottom-left-radius: ").concat(i,";\n    border-bottom-right-radius: ").concat(s,";\n  ")}(a,i,n),"\n    background-image: conic-gradient(from var(--angle), #ff4545, #00ff99, #006aff, #ff0095, #ff4545);\n     animation: 3s spin linear infinite;\n}\n\n.").concat(t,"::before{\n  filter: blur(1.5rem);\n  opacity: 0.15;\n  overflow: visible;\n}\n\n@keyframes spin{\n  from{\n    --angle: 0deg;\n  }\n  to{\n    --angle: 360deg;\n  }\n}\n")})}function v(e){var t,a;let{message:n,user:i,theme:o,mode:l,isUserMessage:d,roundedCorners:c,isLargeEmojiMessage:g,onLinkClick:u}=e,h="deleted"===n.type,f=d?o.message.myMessage:o.message.strangerMessage,m=(null==n?void 0:n.role)==="admin",k=n.id+"_admin_styles";return(0,r.jsxs)(r.Fragment,{children:[m&&(0,r.jsx)(y,{className:k,isUserMessage:d,hasPrevious:null!=(t=null==n?void 0:n.hasPrevious)&&t,hasNext:null!=(a=null==n?void 0:n.hasNext)&&a}),g?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"px-2 py-2",children:[(0,r.jsx)("p",{className:"text-5xl",children:n.content}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(b,{message:n,user:i,theme:o,mode:l})})]})}):(0,r.jsx)("div",{className:"flex flex-col p-[1px] justify-center items-center ".concat(m?k:""),children:(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"".concat(c," animate-gradient-x"),style:{background:f.background[l],backgroundSize:"200% 100%",color:f.text[l]}}),(0,r.jsx)("div",{className:"".concat(c," relative max-w-full break-words px-3 py-2 ").concat(f.isAnimated?"bg-white opacity-70":""),style:{wordBreak:"break-word",overflowWrap:"break-word",color:f.text[l]},children:(0,r.jsx)("p",{className:"break-words whitespace-pre-wrap",children:(0,r.jsx)(s.A,{options:{render:e=>{let{attributes:t,content:a}=e;return(0,r.jsx)("a",{...t,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline",color:o.linkColor[l]},onClick:e=>{u?u(e):e.stopPropagation()},children:a})}},children:h?(0,r.jsx)("span",{className:"italic",style:{color:o.message.deletedMessage.text[l]},children:"Message has been deleted."}):n.content})})})]})})]})}function F(e){let{name:t=null,message:a,user:i,onSwipe:s,onReact:o,onStartedSwipe:l,onEndedSwipe:d,animate:c=!1,mode:g,theme:u,advertisementMessageId:h,onOpenEmojiMenu:f=()=>{},onResendMessage:m=()=>{},isEmojiMenuOpen:b,onLinkClick:k}=e,[x,y]=(0,n.useState)(!1),[v,F]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{F("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),(0,r.jsx)("div",{"data-message-id":"message-"+a.id,className:"relative px-4 select-none",onMouseEnter:()=>!v&&y(!0),onMouseLeave:()=>!v&&y(!1),children:(0,r.jsx)("div",{children:(0,r.jsx)(p,{name:t,onLinkClick:k,animate:c,message:a,user:i,mode:g,hovered:x,reply:()=>s(a.id),onOpenEmojiMenu:()=>f(a),onReact:e=>o(a.id,e),onResendMessage:m,theme:u,advertisementMessageId:h},a.id+"-bubble")},"parent-message-bubble flex flex-col")})}var w=a(9698);function j(e){var t;let{participants:a=[],index:n,message:s,user:o,animate:l=!1,isLast:d=!1,onSwipe:c,onStartedSwipe:g,onEndedSwipe:u,onReact:h,onOpenEmojiMenu:f,onResendMessage:m,isEmojiMenuOpen:b,theme:k=w.zQ,mode:p,secondVisibleElement:x,onLinkClick:y}=e;if("system"===s.sender)return(0,r.jsx)("div",{className:"flex justify-center py-4 px-4 text-center",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:s.content})},s.id+"_system");let v=n%5==0?s.id:null,j=null!=(t=null==s?void 0:s.showName)&&t&&s.sender!==o.id,C=null;if(j){let e=a.find(e=>e.userId===s.sender);C=(null==e?void 0:e.nickname)||(null==e?void 0:e.nickname)||null}return(0,r.jsxs)("div",{"data-is-message":"true","data-message-id":s.id,className:"max-w-full w-full select-none overflow-x-clip",children:[s.showTime&&(0,r.jsx)("div",{className:"flex justify-center py-4",children:(0,r.jsx)("p",{className:"text-xs font-normal",style:{color:k.message.systemMessage.text[p]},children:s.created_at&&(0,i.GP)(new Date(s.created_at),"h:mm a")})},s.id+"_time"),(0,r.jsx)(F,{name:C,advertisementMessageId:v,message:s,animate:l,user:o,onSwipe:c,onStartedSwipe:g,onEndedSwipe:u,onReact:h,onOpenEmojiMenu:f,onResendMessage:m,theme:k,mode:p,isEmojiMenuOpen:b,onLinkClick:y},s.id+"_message"),(d||!s.hasNext)&&(0,r.jsx)("div",{className:"h-1"},s.id+"_bottom")]},"parent_message_"+s.id)}let C={name:"\uD83D\uDC1D Theme",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#FFCB37",dark:"#FFD966"},faded:{light:"rgba(255, 203, 55, 0.15)",dark:"rgba(255, 217, 102, 0.15)"}},secondaryText:{light:"#707070",dark:"#A0A0A0"},errorText:{light:"#D9534F",dark:"#f87171"},linkColor:{light:"#FFCB37",dark:"#FFD966"},announcement:{background:{light:"#FFFBEB",dark:"#3A301A"},text:{light:"#282828",dark:"#FFFBEB"},border:{light:"#FEEBC8",dark:"#4A3C22"}},animations:{typingIndicatorDots:{dark:"#FFFBEB",light:"#333333"}},messageList:{scrollbarThumb:{light:"#FFD966",dark:"#5A4C29"},scrollbarTrack:{light:"#FFFBEB",dark:"#1E1E1E"}},overlays:{emojiMenu:{background:{light:"#FFFFFF",dark:"#1E1E1E"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#F0F0F0",dark:"#2C2C2C"},border:{light:"#FFCB37",dark:"#FFD966"},closeIcon:{light:"#707070",dark:"#A0A0A0"},description:{light:"#333333",dark:"#F0F0F0"},title:{light:"#222222",dark:"#FFFFFF"}}},general:{background:{light:"#FFFFFF",dark:"#121212"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(30, 30, 30, 0.8)"},border:{light:"rgba(240, 240, 240, 0.8)",dark:"rgba(44, 44, 44, 0.8)"},statusLabel:{light:"#707070",dark:"#A0A0A0"},statusValue:{light:"#333333",dark:"#FFD966"}},message:{myMessage:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},isAnimated:!1},strangerMessage:{background:{light:"#F0F0F0",dark:"#2C2C2C"},text:{light:"#222222",dark:"#FFFFFF"},isAnimated:!1},systemMessage:{background:{light:"#F0F0F0",dark:"#2C2C2C"},text:{light:"#707070",dark:"#A0A0A0"}},deletedMessage:{text:{light:"#A0A0A0",dark:"#707070"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(30, 30, 30, 0.8)"},border:{light:"rgba(240, 240, 240, 0.8)",dark:"rgba(44, 44, 44, 0.8)"},inputBackground:{light:"#FFFFFF",dark:"#2C2C2C"},inputText:{light:"#222222",dark:"#FFFFFF"},placeholderText:{light:"#A0A0A0",dark:"#707070"},focusRing:{light:"#FFD966",dark:"#FFCB37"}},buttons:{primary:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},hoverBackground:{light:"#FFD966",dark:"#FFCB37"}},secondary:{background:{light:"#FFFFFF",dark:"#2C2C2C"},text:{light:"#222222",dark:"#FFFFFF"},hoverBackground:{light:"#F0F0F0",dark:"#3C3C3C"},border:{light:"#F0F0F0",dark:"#3C3C3C"}},destructive:{background:{light:"#D9534F",dark:"#D9534F"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#C9302C",dark:"#C9302C"},border:{light:"#D43F3A",dark:"#D43F3A"}},newMessages:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},hoverBackground:{light:"#FFD966",dark:"#FFCB37"}}},reactions:{bubble:{background:{light:"#F0F0F0",dark:"#3C3C3C"},border:{light:"#FFFFFF",dark:"#121212"},text:{light:"#222222",dark:"#FFFFFF"}}}};var E=a(760);let N=["❤️","\uD83D\uDE06","\uD83D\uDE2E","\uD83D\uDE22","\uD83D\uDE2D","\uD83D\uDE21","\uD83D\uDC4D"];function A(e){let{isUserMessage:t,preselectedEmoji:a,message:i,messageDiv:s,onReact:o,onClose:l}=e,c=(0,n.useRef)(null),[g,u]=(0,n.useState)({top:0,left:0}),[h,f]=(0,n.useState)(null),m=(0,n.useRef)(null);return(0,n.useLayoutEffect)(()=>{let e=s.querySelector("#message-bubble");if(e.style.position="relative",e.style.zIndex="30",e&&c.current){let t=e.getBoundingClientRect(),a=c.current,r=a.offsetHeight,n=t.top+window.scrollY-r-10,i=t.right-a.offsetWidth-16;e.classList.contains("items-end")||(i=t.left-16),u({top:n,left:i})}return()=>{e.style.zIndex="0"}},[s]),(0,n.useEffect)(()=>{let e=c.current;if(!e)return;let t=t=>{if(0!==t.button)return;try{e.setPointerCapture(t.pointerId)}catch(e){}m.current=t.pointerId;let a=document.elementFromPoint(t.clientX,t.clientY);if(a){let e=a.closest("[data-emoji]");if(e)return void f(e.getAttribute("data-emoji"))}f(null)},r=t=>{if(m.current!==t.pointerId||!e)return;let a=document.elementFromPoint(t.clientX,t.clientY);if(a){let e=a.closest("[data-emoji]");if(e)return void f(e.getAttribute("data-emoji"))}f(null)},n=t=>{if(m.current===t.pointerId){if(h){let e=(null==a?void 0:a.emoji)===h?null:h;o(i.id,e)}l();try{e.releasePointerCapture(t.pointerId)}catch(e){}m.current=null}};return e.addEventListener("pointerdown",t),window.addEventListener("pointermove",r),window.addEventListener("pointerup",n),()=>{e.removeEventListener("pointerdown",t),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",n)}},[h,o,l,a,i.id]),(0,r.jsx)(d.P.div,{layout:!0,className:"absolute top-0 left-0 w-screen h-screen",initial:{userSelect:"none",zIndex:100,opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,r.jsx)("div",{id:"emoji-abs-container",className:"absolute border-box flex z-50 w-full md:w-fit px-4",style:{position:"absolute",top:g.top,left:g.left},children:(0,r.jsx)(d.P.div,{ref:c,id:"emoji-container-wrapper",className:"w-full backdrop-blur-md bg-gray-100 py-2 px-5 dark:bg-gray-800/80 shadow-lg rounded-full border border-gray-200 dark:border-gray-700",initial:{scale:.8,opacity:0,y:10},animate:{scale:1,opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:20}},exit:{scale:.8,opacity:0,y:10,transition:{duration:.15}},children:(0,r.jsx)("div",{id:"emoji-container",className:"flex justify-between",children:(0,r.jsx)(E.N,{children:N.map(e=>(0,r.jsxs)(d.P.div,{className:"relative z-10 cursor-pointer rounded-full p-2 ".concat((null==a?void 0:a.emoji)===e?"bg-gray-200/80 dark:bg-gray-700/80":h===e?"bg-gray-100/80 dark:bg-gray-600/80":""),"data-emoji":e,animate:{scale:h===e?1.6:1},transition:{type:"spring",stiffness:300,damping:20},children:[(0,r.jsx)("span",{className:"text-xl",children:e}),(null==a?void 0:a.emoji)===e&&(0,r.jsx)(d.P.div,{className:"absolute -bottom-0.5 left-1/2 w-1 h-1 bg-green-500 rounded-full",initial:{opacity:0},animate:{opacity:1},layoutId:"selectedDot",style:{translateX:"-50%"}})]},e))})})})})},"emoji-menu")}var S=a(4357),D=a(3717),B=a(4126);function T(e){let{theme:t,mode:a,anchor:i,onReply:s,onCopy:o,onEdit:l,onClose:g,onDelete:u}=e,h=i.querySelector("#message-bubble"),f=h.classList.contains("items-end"),m=null!==h.querySelector("#image-message-container"),b=[{icon:(0,r.jsx)(S.A,{className:"h-4 w-4"}),text:"Copy sender",onClick:()=>{let e=h.getAttribute("data-sender-id");e&&navigator.clipboard.writeText(e)}},{icon:(0,r.jsx)(c.A,{className:"h-4 w-4"}),text:"Reply",onClick:s},{icon:(0,r.jsx)(S.A,{className:"h-4 w-4"}),text:"Copy",onClick:o},...f&&!m?[{icon:(0,r.jsx)(D.A,{className:"h-4 w-4"}),text:"Edit",onClick:l}]:[],...f?[{icon:(0,r.jsx)(B.A,{className:"h-4 w-4"}),text:"Delete",onClick:u}]:[]],[k,p]=(0,n.useState)({top:0,left:0}),[x,y]=(0,n.useState)(null),v=(0,n.useRef)(null),F=(0,n.createRef)();return(0,n.useEffect)(()=>{v.current=x},[x]),(0,n.useLayoutEffect)(()=>{if(!i||!F.current)return;let e=i.querySelector("#message-bubble"),t=document.querySelector("#chat-container"),a=e.getBoundingClientRect(),r=F.current.getBoundingClientRect(),n=a.bottom+10;if(n+r.height>t.clientHeight/2){n=a.top-r.height-10;let e=document.querySelector("#emoji-abs-container");e&&(e.style.top="".concat(n-r.height,"px"),n-=e.offsetHeight+24)}n+=window.scrollY;let s=a.right-r.width-24;f||(s=a.left),p({top:n,left:s})},[i,f]),(0,n.useEffect)(()=>{let e=e=>{if(!F.current)return;let t=F.current.querySelectorAll("button"),a=null;t.forEach((t,r)=>{let n=t.getBoundingClientRect();e.clientX>=n.left&&e.clientX<=n.right&&e.clientY>=n.top&&e.clientY<=n.bottom&&(a=r)}),y(a)},t=e=>{if(null!==v.current&&F.current){let e=F.current.querySelectorAll("button")[v.current];e&&e.click()}};window.addEventListener("pointermove",e),window.addEventListener("pointerup",t);let a=new PointerEvent("pointerdown",{bubbles:!0});return window.dispatchEvent(a),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[]),(0,r.jsx)(d.P.div,{ref:F,id:"context-menu",className:"absolute flex flex-col rounded-3xl w-[200px] overflow-clip",style:{background:t.general.background[a]||"linear-gradient(180deg, #ffffff, #ffffff)",top:k.top,left:k.left},initial:{opacity:0,scale:.9,transition:{type:"spring",stiffness:300,damping:20}},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.15}},children:b.map((e,t)=>(0,r.jsx)(M,{icon:e.icon,text:e.text,onClick:()=>{e.onClick(),g()},active:x===t},t))})}function M(e){let{icon:t,text:a,onClick:n,active:i}=e;return(0,r.jsx)("div",{children:(0,r.jsxs)("button",{onClick:n,className:"flex items-center justify-start w-full px-6 py-4 text-sm text-black hover:bg-gray-200 ".concat(i?"bg-gray-200":""),children:[(0,r.jsx)("p",{className:"mr-auto",children:a}),t]})})}let _=e=>{var t,a,n,i;let{open:s,message:o,messageDiv:l,user:c,onReact:g,onClose:u,onCopy:h,onEdit:f,onReply:m,onDelete:b}=e;return(0,r.jsx)(E.N,{children:s&&(0,r.jsxs)("div",{id:"emoji-overlay-main",className:"overflow-visible absolute left-0 top-0 select-none",children:[(0,r.jsx)(d.P.div,{layout:!0,initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},className:"fixed inset-0 bg-black z-30",onClick:u},"emoji-overlay"),(0,r.jsxs)("div",{className:"relative z-40 w-full",children:[(0,r.jsx)(A,{isUserMessage:o.sender===c.id,preselectedEmoji:(null==(a=o.reactions)||null==(t=a.find(e=>e.user_id===c.id))?void 0:t.emoji)!=null?{emoji:null==(i=o.reactions)||null==(n=i.find(e=>e.user_id===c.id))?void 0:n.emoji}:void 0,messageDiv:l,message:o,onReact:g,onClose:u},"emoji-menu"),(0,r.jsx)(T,{onCopy:()=>h(o.id),onEdit:()=>f(o.id),onReply:()=>m(o.id),onDelete:()=>b(o.id),onClose:u,theme:w.zQ,mode:"light",anchor:l},"context-menu")]},"context-container")]},"emoji-overlay-main")})};var I=a(4304);let P=e=>{let{typingUsers:t,theme:a,mode:n}=e;if(0===t.length)return null;let i={backgroundColor:a.message.strangerMessage.background[n]},s={backgroundColor:a.animations.typingIndicatorDots[n]};return a.animations.typingIndicatorDots[n],(0,r.jsx)(d.P.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,r.jsxs)("div",{className:"flex items-center mb-2 mx-4 max-w-[100%] rounded-3xl px-4 py-3 relative",style:i,children:[(0,r.jsx)(E.N,{children:t.length>1&&(0,r.jsx)("div",{className:"mx-2",style:{color:a.message.strangerMessage.text[n]},children:t.length})}),(0,r.jsxs)("div",{className:"flex my-1 mx-1 ",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full animate-bounce [animation-delay:-0.3s]",style:s}),(0,r.jsx)("div",{className:"h-2 w-2 mx-1 rounded-full animate-bounce [animation-delay:-0.15s]",style:s}),(0,r.jsx)("div",{className:"h-2 w-2 rounded-full animate-bounce",style:s})]})]})},"typing-motiondiv")},O=(e,t)=>Math.random()*(t-e)+e,R=e=>{let{a:t,d:a,color:n}=e,i=Math.cos(t)*a,s=Math.sin(t)*a,o=O(2,4),l=O(0,2),c=O(.8,1.2);return(0,r.jsx)(d.P.div,{className:"absolute rounded-full",style:{width:10,height:10,left:"50%",top:"50%",translateX:"-50%",translateY:"-50%",backgroundColor:n},initial:{x:0,y:0,scale:0},animate:{x:i,y:s,scale:c},transition:{duration:o,delay:l,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})},L=e=>{var t;let{theme:a,mode:n,onCancel:i}=e,s=Array.from({length:5}).map((e,t)=>({id:t,angle:t/5*2*Math.PI,distance:O(80,120)})),o=a.buttons.primary.text[n],l=a.accent.main[n],c=a.general.background[n],g={initial:{scale:0,opacity:.5},animate:e=>({scale:1,opacity:0,transition:{delay:.7*e,duration:2.1,repeat:1/0,ease:"circOut"}})};return(0,r.jsxs)(d.P.div,{className:"absolute inset-0 flex flex-col items-center justify-center w-full h-full overflow-hidden z-10",style:{backgroundColor:l},variants:{hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.3,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",children:[(0,r.jsxs)("div",{className:"relative w-64 h-64 flex items-center justify-center",children:[(0,r.jsx)(E.N,{children:[0,1,2].map(e=>(0,r.jsx)(d.P.div,{className:"absolute w-full h-full rounded-full border-2",style:{borderColor:o},variants:g,initial:"initial",animate:"animate",custom:e},e))}),(0,r.jsx)(d.P.div,{className:"relative w-24 h-24 rounded-full flex items-center justify-center shadow-lg",style:{backgroundColor:c},animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,r.jsx)("svg",{className:"w-12 h-12",style:{color:l},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8s-9-3.582-9-8 4.03-8 9-8 9 3.582 9 8z"})})}),(0,r.jsx)("div",{className:"absolute w-full h-full",children:s.map(e=>(0,r.jsx)(R,{a:e.angle,d:e.distance,color:o},e.id))})]}),(0,r.jsx)(d.P.p,{className:"mt-8 text-2xl font-semibold tracking-wider",style:{color:o},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5,ease:"easeOut"},children:"Finding a match..."}),(0,r.jsx)(d.P.button,{className:"mt-6 px-6 py-2 rounded-full text-sm font-semibold transition-colors",style:{backgroundColor:a.buttons.secondary.background[n],color:a.buttons.secondary.text[n],...(null==(t=a.buttons.secondary.border)?void 0:t[n])?{border:"1px solid ".concat(a.buttons.secondary.border[n])}:{border:"none"},opacity:.8},onClick:i,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7,ease:"easeOut"},whileHover:{scale:1.05,opacity:1},whileTap:{scale:.95},children:"Cancel"})]})};var z=a(3667),U=a(2099),W=a(4570),Y=a(7168),J=a(9917),V=a(3127);let X=e=>{let{theme:t,mode:a}=e,i=(0,n.useRef)(!1),s={id:"me"},o=[{id:"1",content:"Preview message!",sender:"stranger",created_at:new Date().toISOString(),session_id:"1",hasNext:!0},{id:"3",content:"I can't think of anything to put here",sender:"stranger",created_at:new Date().toISOString(),session_id:"1",hasPrevious:!0},{id:"2",content:"This looks great.",sender:"me",created_at:new Date().toISOString(),session_id:"1",hasNext:!0},{id:"8",content:"LOL! just type anything",sender:"me",created_at:new Date().toISOString(),session_id:"1",hasPrevious:!0,reactions:[{emoji:"\uD83D\uDE06",user_id:"1",message_id:"8"}]}],l=(e,n)=>"system"===e.sender||"system"===e.type?(0,r.jsx)("div",{className:"text-center my-2 mx-4",children:(0,r.jsx)("span",{style:{color:t.message.systemMessage.text[a],backgroundColor:t.message.systemMessage.background[a]},className:" box-decoration-clone  text-xs rounded-full px-3 py-1 leading-relaxed       ",children:e.content})},n):(0,r.jsx)(z.U,{children:(0,r.jsx)(j,{participants:[],index:n,message:e,user:s,isLast:0===n,onSwipe:()=>{},onStartedSwipe:()=>{},onEndedSwipe:()=>{},onReact:async()=>{},onOpenEmojiMenu:()=>{},onResendMessage:()=>{},isEmojiMenuOpen:i,theme:t,mode:a,animate:!0,secondVisibleElement:null},n)},e.id+"listener");return(0,r.jsx)("div",{className:"w-full p-4 rounded-lg flex flex-col",style:{background:t.general.background[a]},children:(0,r.jsx)("div",{className:"flex flex-col",children:o.map((e,t)=>(0,r.jsx)("div",{className:"w-full",children:l(e,t)},e.id))})})};function H(e){let{isOpen:t,onClose:a,themes:i,activeTheme:s,setActiveThemeAndMode:o,activeMode:l}=e,[c,g]=(0,n.useState)(s),[u,h]=(0,n.useState)(l);(0,n.useEffect)(()=>{g(s),h(l)},[t,s,l]);let f=()=>{g(s),h(l),a()};return(0,r.jsx)(E.N,{children:t&&(0,r.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 p-4 pt-12 overflow-y-auto",onClick:f,children:(0,r.jsxs)(d.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"p-5 border-b dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Choose Theme"})}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 p-5",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("select",{value:c.name,onChange:e=>{let t=i.find(t=>t.name===e.target.value);t&&g(t)},style:{backgroundColor:c.accent.faded[u]},className:"w-full px-4 py-2.5 rounded-lg border appearance-none transition-colors duration-300 focus:outline-none focus:ring-2",children:i.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.name))}),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2",style:{color:c.secondaryText[u]},children:(0,r.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Mode"}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,r.jsx)("button",{onClick:()=>h("light"),className:"w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ".concat("light"===u?"bg-white dark:bg-gray-500 text-gray-800 dark:text-white shadow":"text-gray-500 dark:text-gray-400"),children:"Light"}),(0,r.jsx)("button",{onClick:()=>h("dark"),className:"w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ".concat("dark"===u?"bg-black text-white shadow":"text-gray-500 dark:text-gray-400"),children:"Dark"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Preview"}),(0,r.jsx)("div",{className:"bg-gray-200 dark:bg-gray-900 rounded-xl overflow-hidden shadow-inner",children:(0,r.jsx)(X,{theme:c,mode:u})})]})]}),(0,r.jsxs)("div",{className:"p-5 border-t dark:border-gray-700 flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:f,className:"px-4 py-2 text-sm font-semibold bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{o(c,u),a()},className:"px-4 py-2 text-sm font-semibold bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save Changes"})]})]})})})}var G=a(9852),q=a(6756),Q=a(4416),$=a(192);function Z(e){let{...t}=e;return(0,r.jsx)(q.bL,{"data-slot":"dialog",...t})}function K(e){let{...t}=e;return(0,r.jsx)(q.ZL,{"data-slot":"dialog-portal",...t})}function ee(e){let{className:t,...a}=e;return(0,r.jsx)(q.hJ,{"data-slot":"dialog-overlay",className:(0,$.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function et(e){let{className:t,children:a,showCloseButton:n=!0,...i}=e;return(0,r.jsxs)(K,{"data-slot":"dialog-portal",children:[(0,r.jsx)(ee,{}),(0,r.jsxs)(q.UC,{"data-slot":"dialog-content",className:(0,$.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:[a,n&&(0,r.jsxs)(q.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(Q.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ea(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,$.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function er(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,$.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function en(e){let{className:t,...a}=e;return(0,r.jsx)(q.hE,{"data-slot":"dialog-title",className:(0,$.cn)("text-lg leading-none font-semibold",t),...a})}function ei(e){let{isOpen:t,onClose:a,onSave:i,currentNickname:s}=e,[o,l]=(0,n.useState)(s);return(0,r.jsx)(Z,{open:t,onOpenChange:a,children:(0,r.jsxs)(et,{children:[(0,r.jsx)(ea,{children:(0,r.jsx)(en,{children:"Edit Nickname"})}),(0,r.jsx)("div",{className:"py-4",children:(0,r.jsx)(G.p,{value:o,onChange:e=>l(e.target.value),placeholder:"Enter your new nickname"})}),(0,r.jsxs)(er,{children:[(0,r.jsx)(Y.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,r.jsx)(Y.$,{onClick:()=>{i(o),a()},children:"Save"})]})]})})}let es=e=>{let{theme:t,mode:a}=e;return(0,r.jsx)("style",{children:"\n\n    #chat-container {\n      --chat-border-radius: 2rem; /* Default border radius */\n    }\n\n    @media (max-width: 640px) {\n      #chat-container {\n        --chat-border-radius: 0; /* No border radius on small screens */\n      }\n    }\n\n    #chat-messages-list::-webkit-scrollbar {\n      width: 8px;\n    }\n    #chat-messages-list::-webkit-scrollbar-track {\n      background: ".concat(t.messageList.scrollbarTrack[a],";\n    }\n    #chat-messages-list::-webkit-scrollbar-thumb {\n      background-color: ").concat(t.messageList.scrollbarThumb[a],";\n      border-radius: 4px;\n    }\n    #chat-messages-list::-webkit-scrollbar-thumb:hover {\n      background-color: ").concat(t.buttons.primary.hoverBackground[a],";\n    }\n    #chat-input:focus {\n      outline: none;\n      box-shadow: 0 0 0 2px ").concat(t.inputArea.focusRing[a],";\n    }\n    #send-button:hover {\n        background-color: ").concat(t.buttons.primary.hoverBackground[a]," !important;\n    }\n    #new-messages-button:hover {\n        background-color: ").concat(t.buttons.newMessages.hoverBackground[a]," !important;\n    }\n  ")})};function eo(e){var t,a,i,s,o,l,c;let{participants:g=[],name:u="",groupChat:h=!1,messages:f,goBack:m,sendMessage:b,onStartTyping:k,cancelMatchmaking:p=()=>{},onEditMessage:x,typingUsers:y,onChangeTheme:v,endChat:F,newChat:N,onDeleteMessage:A,onEditNickname:S,onReact:D,userId:B,status:T}=e,M={id:B},{theme:O,mode:R}=(0,W.j)(),[X,G]=(0,n.useState)("Unknown");(0,n.useEffect)(()=>{var e;let t=null==(e=g.find(e=>e.userId===M.id))?void 0:e.nickname;t&&G(t)},[g]);let[q,Q]=(0,n.useState)(null),[$,Z]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=async()=>{let{data:e,error:t}=await U.N.from("announcements").select("*").order("created_at",{ascending:!1}).limit(1).single();if(t)return void console.error("Error fetching announcement:",t);(null==e?void 0:e.content)&&Q(e.content)},t=U.N.channel("public:announcements");return t.on("postgres_changes",{event:"*",schema:"public",table:"announcements"},e=>{e.new&&Q(e.new.content||null)}).subscribe(),e(),()=>{U.N.removeChannel(t)}},[]);let K=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a,r]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(!e||0===e.length)return void r([]);let a=null,n=[];for(let t=0;t<e.length;t++){let r=e[t],i=new Date(r.created_at).getTime(),s=!1;isNaN(i)?console.warn("Invalid date encountered for message:",r.id):"system"!==r.sender&&"typing"!==r.id&&"filler"!==r.id&&(null===a||i-a>3e5)&&(s=!0,a=i),n.push({...r,showTime:s,hasPrevious:!1,hasNext:!1})}n=n.map(e=>{let t=e.replyingTo;if(t&&"string"==typeof t){let a=n.find(e=>e.id===t);if(a)return{...e,replyingTo:a}}return e});for(let e=0;e<n.length;e++){let a=n[e],r=n[e-1],i=n[e+1];if(!a)continue;a.hasPrevious=!!r&&r.sender===a.sender,a.hasNext=!!i&&i.sender===a.sender,a.showName=t&&r&&r.sender!==a.sender,a.showTime&&r&&(a.hasPrevious=!1,r.hasNext=!1),a.reactions&&a.reactions.length>0&&i&&(a.hasNext=!1,i.sender===a.sender&&(i.hasPrevious=!1)),a.replyingTo&&r&&(a.hasPrevious=!1,r.sender===a.sender&&(r.hasNext=!1)),a.replyingTo&&i&&(a.hasNext=!1,i.sender===a.sender&&(i.hasPrevious=!1)),r&&r.replyingTo&&(a.hasPrevious=!1,r.hasNext=!1);let s=n[e+1];s&&("system"===s.sender||"typing"===s.id||"filler"===s.id)&&(a.hasNext=!1)}let i=null,s=n.findIndex(e=>"typing"===e.id);-1!==s&&(i=n.splice(s,1)[0]);let o=new Set,l=n.filter(e=>!o.has(e.id)&&(o.add(e.id),!0));i&&l.push(i),r(l)},[e]),a}(f,h),ee=(0,n.useRef)(null),[et,ea]=(0,n.useState)(!1),er=(0,n.useRef)(K.length),[en,eo]=(0,n.useState)(!1),el=(0,n.useRef)(!0),[ed,ec]=(0,n.useState)(""),[eg,eu]=(0,n.useState)(!1),eh=(0,n.useRef)(!1),[ef,em]=(0,n.useState)({open:!1}),[eb,ek]=(0,n.useState)(null),ep=e=>{if(!e)return void em({open:!1});let t=document.querySelector('[data-message-id="'.concat(null==e?void 0:e.id,'"]'));t&&em({open:!0,message:e,messageDiv:t})};(0,n.useEffect)(()=>{if(h)return;let e=e=>{if("Escape"===e.key){if(console.log("Escape key pressed"),"waiting_for_match"===T||"finding_match"===T||"connecting"===T)return void p();"connected"===T&&(eg?(console.log("Ending chat"),F(),eu(!1)):eu(!0)),"connected"!==T&&N&&(console.log("Starting new chat"),N())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[T,eg,F,p,N]),(0,n.useEffect)(()=>{if(0===K.length)return;let e=K.length>er.current,t=K[K.length-1];if("typing"===t.id){er.current=K.length;return}if(e)if(t.sender===M.id||el.current){var a;null==(a=ee.current)||a.scrollToIndex(K.length-1,{align:"end",smooth:!0})}else eo(!0);er.current=K.length},[K,M.id]),(0,n.useEffect)(()=>{let e=y.length>0;if(el.current&&e){var t;console.log("dsaasdasdasd"),null==(t=ee.current)||t.scrollToIndex(K.length,{align:"end",smooth:!0})}},[y,K]),(0,n.useEffect)(()=>{if(eb){let e=document.getElementById("chat-input");e&&e.focus();return}let e=document.getElementById("chat-input");e&&(e.value="",ec(""))},[eb]),(0,n.useEffect)(()=>{let e=document.querySelector("#chat-messages-list");e&&(e.style.overflow=et||ef.open?"hidden":"auto")},[et,ef]);let ex=(e,t)=>"system"===e.sender||"system"===e.type?(0,r.jsx)("div",{className:"text-center my-2 mx-4",children:(0,r.jsx)("span",{style:{color:O.message.systemMessage.text[R],background:O.message.systemMessage.background[R]},className:"box-decoration-clone text-xs rounded-full px-3 py-1 leading-relaxed",children:e.content})},t):(0,r.jsx)(z.U,{children:(0,r.jsx)(j,{participants:g,index:t,message:e,user:M,isLast:0===t,onSwipe:e=>{let t=f.find(t=>t.id===e);t&&ek({message:t,type:"replying",title:"Replying",description:t.content})},onStartedSwipe:()=>{},onEndedSwipe:()=>{},onReact:D,onOpenEmojiMenu:()=>ep(e),onResendMessage:()=>{},isEmojiMenuOpen:eh,theme:O,mode:R,animate:!0,secondVisibleElement:null},t)},e.id+"listener"),[ey,ev]=(0,n.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(es,{theme:O,mode:R}),(0,r.jsx)(H,{isOpen:ey,onClose:()=>ev(!1),themes:[w.zQ,w.VO,w.H,w.Ep,C,w.gR,w.ro,w.bH],activeTheme:O,setActiveThemeAndMode:(e,t)=>{null==v||v(t,e)},activeMode:R}),(0,r.jsx)(ei,{isOpen:$,onClose:()=>Z(!1),onSave:e=>{null==S||S(e)},currentNickname:X}),(0,r.jsx)(_,{open:ef.open,message:ef.message,messageDiv:ef.messageDiv,user:M,onReact:D,onReply:e=>{let t=f.find(t=>t.id===e);t&&ek({message:t,type:"replying",title:"Replying",description:t.content})},onEdit:e=>{let t=f.find(t=>t.id===e);t&&(ec(t.content),ek({message:t,type:"editing",title:"Editing",description:t.content}))},onCopy:e=>{let t=f.find(t=>t.id===e);t&&(navigator.clipboard.writeText(t.content),ep(null))},onDelete:e=>{console.log("Delete message with ID: ".concat(e)),ep(null),null==A||A(e)},onClose:()=>ep(null)}),(0,r.jsxs)("div",{id:"chat-container",style:{fontFamily:O.typography.fontFamily,fontSize:O.typography.baseFontSize,background:O.general.background[R],backdropFilter:"blur(".concat(O.general.backdropBlur,")"),boxShadow:O.general.shadow,borderRadius:"var(--chat-border-radius, 2rem)"},className:"w-full max-w-md mx-auto h-[100dvh] flex flex-col",children:[(0,r.jsxs)("div",{style:{background:O.header.background[R],borderColor:O.header.border[R]},className:"p-4 border-b flex items-center shrink-0",children:[("connected"!==T||h)&&(0,r.jsx)(Y.$,{onClick:m,variant:"outline",style:{background:O.buttons.secondary.background[R],color:O.buttons.secondary.text[R],borderColor:(null==(t=O.buttons.secondary.border)?void 0:t[R])||"transparent"},className:"rounded-full mr-2 p-1",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,r.jsxs)("div",{className:"text-left mr-auto ml-2",children:[(0,r.jsx)("p",{style:{color:O.header.statusLabel[R]},className:"text-xs font-medium",children:h?u:"Status"}),(0,r.jsx)("p",{style:{color:O.header.statusValue[R]},className:"text-sm font-semibold",children:T.charAt(0).toUpperCase()+T.slice(1)})]}),h&&(0,r.jsx)(Y.$,{onClick:()=>Z(!0),variant:"outline",className:"mr-2 rounded-full",style:{background:O.buttons.secondary.background[R],color:O.buttons.secondary.text[R],borderColor:(null==(a=O.buttons.secondary.border)?void 0:a[R])||"transparent"},children:(0,r.jsx)(J.A,{size:16})}),(0,r.jsx)(Y.$,{onClick:()=>ev(!0),variant:"outline",className:"mr-2 rounded-full",style:{background:O.buttons.secondary.background[R],color:O.buttons.secondary.text[R],borderColor:(null==(i=O.buttons.secondary.border)?void 0:i[R])||"transparent"},children:(0,r.jsx)(V.A,{})}),!h&&"connected"===T&&(0,r.jsxs)(Y.$,{onClick:()=>eg?(F(),eu(!1)):eu(!0),className:"px-3 py-1 text-sm rounded-full",style:{background:eg?O.buttons.destructive.background[R]:O.buttons.secondary.background[R],color:eg?O.buttons.destructive.text[R]:O.buttons.secondary.text[R],...(eg?null==(s=O.buttons.destructive.border)?void 0:s[R]:null==(o=O.buttons.secondary.border)?void 0:o[R])?{border:"1px solid ".concat(eg?null==(l=O.buttons.destructive.border)?void 0:l[R]:null==(c=O.buttons.secondary.border)?void 0:c[R])}:{}},children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:"(Esc)"}),eg?"Confirm?":"End Chat"]}),!h&&"connected"!==T&&(0,r.jsxs)(Y.$,{id:"new-chat-button",onClick:N,className:"px-3 py-1 text-sm rounded-full",style:{background:O.buttons.primary.background[R],color:O.buttons.primary.text[R]},children:[(0,r.jsx)("span",{className:"hidden text-sm sm:inline",children:"(Esc)"}),"New Chat"]})]}),q&&(0,r.jsx)("div",{style:{background:O.announcement.background[R],color:O.announcement.text[R],borderColor:O.announcement.border[R]},className:"p-2 text-center text-xs border-b shrink-0",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:q}})}),(0,r.jsx)(E.N,{children:("waiting_for_match"===T||"finding_match"===T||"connecting"===T)&&(0,r.jsx)(L,{onCancel:p,theme:O,mode:R},"finding-match-animation")}),(0,r.jsxs)("div",{className:"max-h-full h-full relative",children:[(0,r.jsxs)(I.x8,{ref:ee,style:{overflowX:"hidden"},id:"chat-messages-list",onScroll:e=>{ee.current&&(el.current=e-ee.current.scrollSize+ee.current.viewportSize>=-100,el.current&&eo(!1))},reverse:!0,children:[K.map((e,t)=>ex(e,t)),(0,r.jsx)("div",{className:"overflow-hidden",children:(0,r.jsx)(z.U,{children:y.length>0&&(0,r.jsx)(P,{typingUsers:y,theme:O,mode:R},"typing-indicator")})})]}),(0,r.jsx)(E.N,{children:en&&(0,r.jsx)(d.P.div,{initial:{y:"100%"},animate:{y:"0"},exit:{y:"100%"},className:"absolute bottom-0 left-0 w-full flex items-center justify-center pb-2 pt-4",children:(0,r.jsxs)("button",{id:"new-messages-button",onClick:()=>{var e;null==(e=ee.current)||e.scrollToIndex(K.length-1,{align:"end",smooth:!0}),eo(!1)},style:{backgroundColor:O.buttons.newMessages.background[R],color:O.buttons.newMessages.text[R]},className:"px-4 py-2 rounded-full shadow-lg flex items-center gap-2 transition-colors",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"New messages"]})},"new-messages-button")})]}),(0,r.jsx)(z.U,{children:(0,r.jsx)(d.P.div,{style:{paddingBottom:eb?"2rem":0,overflow:"hidden",visibility:eb?"visible":"hidden",height:eb?"auto":0,backgroundColor:O.overlays.replyingPreview.background[R],borderLeft:"4px solid ".concat(O.overlays.replyingPreview.border[R])},className:"flex items-start gap-2 px-3 py-2 relative",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{style:{color:O.overlays.replyingPreview.title[R]},className:"text-xs font-semibold",children:(null==eb?void 0:eb.type)==="replying"?"Replying to":"Editing"}),(0,r.jsx)("button",{type:"button",className:"ml-auto","aria-label":"Cancel",onClick:()=>ek(null),children:(0,r.jsxs)("svg",{width:"18",height:"18",fill:"none",stroke:O.overlays.replyingPreview.closeIcon[R],strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,r.jsx)("div",{style:{color:O.overlays.replyingPreview.description[R]},className:"text-xs truncate max-w-xs",children:null==eb?void 0:eb.description})]})},"bottom-message-preview")}),(0,r.jsx)("div",{style:{backgroundColor:O.inputArea.background[R],borderColor:O.inputArea.border[R]},className:"p-4 border-t shrink-0",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=ed.trim();if(t){var a;eu(!1);let e=null==eb||null==(a=eb.message)?void 0:a.id;if(e&&(null==eb?void 0:eb.type)==="editing"){null==x||x(e,t),ek(null),ec("");return}b(t,e),ec(""),e&&ek(null)}},className:"flex space-x-3",children:[(0,r.jsx)("input",{id:"chat-input",disabled:"connected"!==T,type:"text",value:ed,onChange:e=>{ec(e.target.value),k()},placeholder:"Type a message...",style:{background:O.inputArea.inputBackground[R],color:O.inputArea.inputText[R],borderColor:O.inputArea.border[R]},className:"text-[16px] flex-grow p-3 border rounded-full",autoComplete:"off",required:!0}),(0,r.jsx)(Y.$,{id:"send-button",type:"submit",disabled:!ed.trim()||"connected"!==T,style:{background:O.buttons.primary.background[R],color:O.buttons.primary.text[R],opacity:ed.trim()&&"connected"===T?1:.5},className:"font-bold w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-colors",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),(0,r.jsx)("polyline",{points:"5 12 12 5 19 12"})]})})]})})]})]})}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var r=a(5155);a(2115);var n=a(9708),i=a(2085),s=a(192);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:i,asChild:l=!1,...d}=e,c=l?n.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,s.cn)(o({variant:a,size:i,className:t})),...d})}},8437:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,O:()=>d});var r=a(5155),n=a(2115),i=a(7383);let s=(0,n.createContext)({user:null,session:null,isLoading:!0,error:null,login:async()=>{},logout:()=>{}}),o="https://animochat-auth-server.onrender.com/api/auth",l="supabase.auth.session",d=e=>{let{children:t}=e,[a,d]=(0,n.useState)(null),[c,g]=(0,n.useState)(null),[u,h]=(0,n.useState)(!0),[f,m]=(0,n.useState)(null),b=(0,n.useCallback)(async e=>{try{let t=await fetch("".concat(o,"/validate"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token)}}),a=await t.json();if(!t.ok||!a.valid)throw Error(a.message||"Token validation failed.");d(a.user),g(e),i.A.set(l,JSON.stringify(e),{sameSite:"strict",expires:7}),m(null)}catch(e){throw m(e.message),d(null),g(null),i.A.remove(l),e}},[]),k=(0,n.useCallback)(async()=>{m(null);try{let e=await fetch("".concat(o,"/login/anonymous"),{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.message||"Anonymous login failed.");await b(t.session)}catch(e){m(e.message),d(null),g(null),i.A.remove(l)}},[b]);(0,n.useEffect)(()=>{(async()=>{h(!0);let e=i.A.get(l);if(e)try{let t=JSON.parse(e);await b(t)}catch(e){await k()}else await k();h(!1)})()},[b,k]);let p=async(e,t)=>{h(!0),m(null);try{let a=await fetch("".concat(o,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await a.json();if(!a.ok)throw Error(r.message||"Login failed.");await b(r.session)}catch(e){m(e.message),d(null),g(null),i.A.remove(l)}finally{h(!1)}};return(0,r.jsx)(s.Provider,{value:{user:a,session:c,isLoading:u,error:f,login:p,logout:()=>{h(!0),d(null),g(null),i.A.remove(l),k().finally(()=>h(!1))}},children:t})},c=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9698:(e,t,a)=>{"use strict";a.d(t,{Ep:()=>s,H:()=>d,VO:()=>l,bH:()=>i,gR:()=>r,ro:()=>n,zQ:()=>o});let r={name:"Cosmic Latte",typography:{fontFamily:"'Space Mono', monospace",baseFontSize:"15px"},accent:{main:{light:"#c59c6c",dark:"#d4b38a"},faded:{light:"rgba(197, 156, 108, 0.15)",dark:"rgba(212, 179, 138, 0.1)"}},secondaryText:{light:"#6d4c41",dark:"#a1887f"},errorText:{light:"#d32f2f",dark:"#ef9a9a"},linkColor:{light:"#81d4fa",dark:"#4fc3f7"},announcement:{background:{light:"#f5f5f5",dark:"#2a211c"},text:{light:"#4e342e",dark:"#d7ccc8"},border:{light:"rgba(212, 179, 138, 0.5)",dark:"rgba(212, 179, 138, 0.2)"}},animations:{typingIndicatorDots:{dark:"#d4b38a",light:"#c59c6c"}},messageList:{scrollbarThumb:{light:"#bcaaa4",dark:"#6d4c41"},scrollbarTrack:{light:"#eFEBE9",dark:"#1e1511"}},overlays:{emojiMenu:{background:{light:"#fff",dark:"#3e2723"},shadow:"0 4px 8px -1px rgba(0, 0, 0, 0.15)"},replyingPreview:{background:{light:"#f5f5f5",dark:"#2a211c"},border:{light:"#c59c6c",dark:"#d4b38a"},closeIcon:{light:"#8d6e63",dark:"#bcaaa4"},description:{light:"#5d4037",dark:"#d7ccc8"},title:{light:"#4e342e",dark:"#ffffff"}}},general:{background:{light:"#efebe9",dark:"#1e1511"},backdropBlur:"1rem",shadow:"0 15px 35px -10px rgb(0 0 0 / 0.25)",borderRadius:"1.25rem"},header:{background:{light:"rgba(239, 235, 233, 0.8)",dark:"rgba(30, 21, 17, 0.8)"},border:{light:"rgba(215, 204, 200, 0.8)",dark:"rgba(42, 33, 28, 0.8)"},statusLabel:{light:"#8d6e63",dark:"#a1887f"},statusValue:{light:"#8d6e63",dark:"#d4b38a"}},message:{myMessage:{background:{light:"#c59c6c",dark:"#8a6b4a"},text:{light:"#ffffff",dark:"#f5f5f5"},isAnimated:!1},strangerMessage:{background:{light:"#ffffff",dark:"#4e342e"},text:{light:"#4e342e",dark:"#d7ccc8"},isAnimated:!1},systemMessage:{background:{light:"transparent",dark:"transparent"},text:{light:"#a1887f",dark:"#8d6e63"}},deletedMessage:{text:{light:"#bcaaa4",dark:"#a1887f"}},imageOverlay:{background:{light:"rgba(78, 52, 46, 0.5)",dark:"rgba(0, 0, 0, 0.5)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(42, 33, 28, 0.6)"},border:{light:"rgba(215, 204, 200, 0.9)",dark:"rgba(62, 39, 35, 0.9)"},inputBackground:{light:"#ffffff",dark:"#5d4037"},inputText:{light:"#3e2723",dark:"#f5f5f5"},placeholderText:{light:"#a1887f",dark:"#a1887f"},focusRing:{light:"#c59c6c",dark:"#d4b38a"}},buttons:{primary:{background:{light:"#a1887f",dark:"#c59c6c"},text:{light:"#ffffff",dark:"#3e2723"},hoverBackground:{light:"#8d6e63",dark:"#d4b38a"}},secondary:{background:{light:"#fff",dark:"#5d4037"},text:{light:"#6d4c41",dark:"#d7ccc8"},hoverBackground:{light:"#efebe9",dark:"#6d4c41"},border:{light:"#d7ccc8",dark:"#8d6e63"}},destructive:{background:{light:"#c62828",dark:"#d32f2f"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b71c1c",dark:"#c62828"},border:{light:"#c62828",dark:"#d32f2f"}},newMessages:{background:{light:"#80deea",dark:"#4dd0e1"},text:{light:"#006064",dark:"#004d40"},hoverBackground:{light:"#4dd0e1",dark:"#26c6da"}}},reactions:{bubble:{background:{light:"#ffffff",dark:"#6d4c41"},border:{light:"#d7ccc8",dark:"#1e1511"},text:{light:"#c59c6c",dark:"#f5f5f5"}}}},n={name:"Sunset Bliss",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#FF6B6B",dark:"#FF6B6B"},faded:{light:"rgba(255, 107, 107, 0.15)",dark:"rgba(255, 107, 107, 0.15)"}},secondaryText:{light:"#6D6875",dark:"#A5A58D"},errorText:{light:"#E63946",dark:"#F28B82"},linkColor:{light:"#F08A5D",dark:"#F08A5D"},announcement:{background:{light:"#FFF1E6",dark:"#332F2C"},text:{light:"#3D315B",dark:"#F1E4CE"},border:{light:"rgba(253, 230, 138, 0.8)",dark:"rgba(59, 50, 53, 0.8)"}},animations:{typingIndicatorDots:{dark:"#F1E4CE",light:"#3D315B"}},messageList:{scrollbarThumb:{light:"#E9C46A",dark:"#8D8680"},scrollbarTrack:{light:"#FFF8E1",dark:"#2A2825"}},overlays:{emojiMenu:{background:{light:"#FFFAF0",dark:"#3E3B37"},shadow:"0 4px 12px rgba(0,0,0,0.1)"},replyingPreview:{background:{light:"#FFF1E6",dark:"#332F2C"},border:{light:"#FF6B6B",dark:"#FF6B6B"},closeIcon:{light:"#6D6875",dark:"#A5A58D"},description:{light:"#3D315B",dark:"#F1E4CE"},title:{light:"#3D315B",dark:"#F1E4CE"}}},general:{background:{light:"#FFF8E1",dark:"#1F1E1C"},backdropBlur:"1.5rem",shadow:"0 20px 40px rgba(0,0,0,0.2)",borderRadius:"1.5rem"},header:{background:{light:"rgba(255, 255, 255, 0.7)",dark:"rgba(40, 38, 35, 0.7)"},border:{light:"rgba(229,231,235,0.8)",dark:"rgba(55,65,81,0.8)"},statusLabel:{light:"#6D6875",dark:"#A5A58D"},statusValue:{light:"#FF6B6B",dark:"#FF6B6B"}},message:{myMessage:{background:{light:"#FF6B6B",dark:"#FF6B6B"},text:{light:"#FFFFFF",dark:"#FFFFFF"},isAnimated:!1},strangerMessage:{background:{light:"#FFF1E6",dark:"#3E3B37"},text:{light:"#3D315B",dark:"#F1E4CE"},isAnimated:!1},systemMessage:{background:{light:"#E9C46A",dark:"#3E3B37"},text:{light:"#6D6875",dark:"#A5A58D"}},deletedMessage:{text:{light:"#6D6875",dark:"#A5A58D"}},imageOverlay:{background:{light:"rgba(0,0,0,0.5)",dark:"rgba(0,0,0,0.5)"},text:{light:"#FFFFFF",dark:"#FFFFFF"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(40,38,35,0.8)"},border:{light:"rgba(229,231,235,0.8)",dark:"rgba(55,65,81,0.8)"},inputBackground:{light:"#FFFFFF",dark:"#4B483E"},inputText:{light:"#3D315B",dark:"#F1E4CE"},placeholderText:{light:"#A5A58D",dark:"#6D6875"},focusRing:{light:"#FF6B6B",dark:"#FF6B6B"}},buttons:{primary:{background:{light:"#FF6B6B",dark:"#FF6B6B"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#E63946",dark:"#E63946"}},secondary:{background:{light:"#FFF1E6",dark:"#3E3B37"},text:{light:"#3D315B",dark:"#F1E4CE"},hoverBackground:{light:"#FFE5D4",dark:"#5A564F"},border:{light:"#FFE5D4",dark:"#5A564F"}},destructive:{background:{light:"#E63946",dark:"#F28B82"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#D62828",dark:"#E63946"},border:{light:"#E63946",dark:"#F28B82"}},newMessages:{background:{light:"#F4A261",dark:"#E76F51"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#E76F51",dark:"#F4A261"}}},reactions:{bubble:{background:{light:"#FFF1E6",dark:"#3E3B37"},border:{light:"#FFFFFF",dark:"#1F1E1C"},text:{light:"#3D315B",dark:"#F1E4CE"}}}},i={name:"Aurora Glow",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#8E44AD",dark:"#8E44AD"},faded:{light:"rgba(142,68,173,0.15)",dark:"rgba(142,68,173,0.15)"}},secondaryText:{light:"#2C3E50",dark:"#BDC3C7"},errorText:{light:"#C0392B",dark:"#E74C3C"},linkColor:{light:"#2980B9",dark:"#3498DB"},announcement:{background:{light:"#F5EEF8",dark:"#1A1A1D"},text:{light:"#4A235A",dark:"#F8F9F9"},border:{light:"rgba(155,89,182,0.8)",dark:"rgba(26,26,29,0.8)"}},animations:{typingIndicatorDots:{dark:"#F8F9F9",light:"#4A235A"}},messageList:{scrollbarThumb:{light:"#A569BD",dark:"#7D3C98"},scrollbarTrack:{light:"#F9EBEA",dark:"#1A1A1D"}},overlays:{emojiMenu:{background:{light:"#FAE3F5",dark:"#2C2A2E"},shadow:"0 4px 10px rgba(0,0,0,0.1)"},replyingPreview:{background:{light:"#F5EEF8",dark:"#1A1A1D"},border:{light:"#8E44AD",dark:"#8E44AD"},closeIcon:{light:"#2C3E50",dark:"#BDC3C7"},description:{light:"#4A235A",dark:"#F8F9F9"},title:{light:"#4A235A",dark:"#F8F9F9"}}},general:{background:{light:"linear-gradient(45deg, #FFC0CB 0%, #8E44AD 100%)",dark:"linear-gradient(45deg, #0D0D0D 0%, #4A235A 100%)"},backdropBlur:"1rem",shadow:"0 20px 35px rgba(0,0,0,0.15)",borderRadius:"1.25rem"},header:{background:{light:"rgba(255,255,255,0.7)",dark:"rgba(15,15,15,0.7)"},border:{light:"rgba(224,224,224,0.8)",dark:"rgba(40,40,40,0.8)"},statusLabel:{light:"#2C3E50",dark:"#BDC3C7"},statusValue:{light:"#8E44AD",dark:"#8E44AD"}},message:{myMessage:{background:{light:"#8E44AD",dark:"#8E44AD"},text:{light:"#FFFFFF",dark:"#FFFFFF"},isAnimated:!1},strangerMessage:{background:{light:"#FAE3F5",dark:"#2C2A2E"},text:{light:"#4A235A",dark:"#F8F9F9"},isAnimated:!1},systemMessage:{background:{light:"#f5f5f5",dark:"#2C2A2E"},text:{light:"#2C3E50",dark:"#BDC3C7"}},deletedMessage:{text:{light:"#2C3E50",dark:"#BDC3C7"}},imageOverlay:{background:{light:"rgba(0,0,0,0.5)",dark:"rgba(0,0,0,0.5)"},text:{light:"#FFFFFF",dark:"#FFFFFF"}}},inputArea:{background:{light:"rgba(255,255,255,0.8)",dark:"rgba(15,15,15,0.8)"},border:{light:"rgba(224,224,224,0.8)",dark:"rgba(40,40,40,0.8)"},inputBackground:{light:"#FFFFFF",dark:"#3E3B37"},inputText:{light:"#4A235A",dark:"#F8F9F9"},placeholderText:{light:"#BDC3C7",dark:"#2C3E50"},focusRing:{light:"#8E44AD",dark:"#8E44AD"}},buttons:{primary:{background:{light:"#8E44AD",dark:"#8E44AD"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#732D91",dark:"#732D91"}},secondary:{background:{light:"#FAE3F5",dark:"#2C2A2E"},text:{light:"#4A235A",dark:"#F8F9F9"},hoverBackground:{light:"#FADADD",dark:"#4A2236"},border:{light:"#FADADD",dark:"#4A2236"}},destructive:{background:{light:"#C0392B",dark:"#E74C3C"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#922B21",dark:"#C0392B"},border:{light:"#C0392B",dark:"#E74C3C"}},newMessages:{background:{light:"#2980B9",dark:"#3498DB"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#1F6391",dark:"#2980B8"}}},reactions:{bubble:{background:{light:"#FAE3F5",dark:"#2C2A2E"},border:{light:"#FFFFFF",dark:"#0D0D0D"},text:{light:"#4A235A",dark:"#F8F9F9"}}}},s={name:"Pride Month",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)",dark:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)"},faded:{light:"rgba(0, 0, 0, 0.05)",dark:"rgba(255, 255, 255, 0.1)"}},secondaryText:{light:"#6b7280",dark:"#9ca3af"},errorText:{light:"#b91c1c",dark:"#ef4444"},linkColor:{light:"#2563eb",dark:"#3b82f6"},announcement:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#111827",dark:"#f9fafb"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"}},animations:{typingIndicatorDots:{dark:"#f9fafb",light:"#111827"}},messageList:{scrollbarThumb:{light:"#9ca3af",dark:"#6b7280"},scrollbarTrack:{light:"#f3f4f6",dark:"#111827"}},overlays:{emojiMenu:{background:{light:"#f3f4f6",dark:"#1f2937"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#f3f4f6",dark:"#1f2937"},border:{light:"#4f46e5",dark:"#c7d2fe"},closeIcon:{light:"#6b7280",dark:"#9ca3af"},description:{light:"#111827",dark:"#f9fafb"},title:{light:"#111827",dark:"#f9fafb"}}},general:{background:{light:"#ffffff",dark:"#111827"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},statusLabel:{light:"#6b7280",dark:"#9ca3af"},statusValue:{light:"#4f46e5",dark:"#a5b4fc"}},message:{myMessage:{background:{light:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)",dark:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)"},text:{light:"#000",dark:"#000"},isAnimated:!0},strangerMessage:{background:{light:"#f3f4f6",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},isAnimated:!1},systemMessage:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#6b7280",dark:"#9ca3af"}},deletedMessage:{text:{light:"#6b7280",dark:"#9ca3af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},inputBackground:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(55, 65, 81, 0.5)"},inputText:{light:"#111827",dark:"#f9fafb"},placeholderText:{light:"#9ca3af",dark:"#6b7280"},focusRing:{light:"#4f46e5",dark:"#c7d2fe"}},buttons:{primary:{background:{light:"linear-gradient(90deg,rgba(224, 126, 126, 1) 0%, rgba(199, 184, 87, 1) 50%, rgba(237, 83, 229, 1) 100%);",dark:"linear-gradient(90deg,rgba(128, 69, 69, 1) 0%, rgba(122, 116, 69, 1) 50%, rgba(156, 56, 149, 1) 100%);"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"linear-gradient(90deg, #d30202, #ec8200, #ece200, #007022, #0043e6, #650676)",dark:"linear-gradient(90deg, #d30202, #ec8200, #ece200, #007022, #0043e6, #650676)"}},secondary:{background:{light:"#fff",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},hoverBackground:{light:"#d1d5db",dark:"#4b5563"},border:{light:"#d1d5db",dark:"#4b5563"}},destructive:{background:{light:"#dc2626",dark:"#ef4444"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b91c1c",dark:"#dc2626"},border:{light:"#dc2626",dark:"#ef4444"}},newMessages:{background:{light:"#f59e0b",dark:"#fcd347"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#d97706",dark:"#f59e0b"}}},reactions:{bubble:{background:{light:"#f3f4f6",dark:"#374151"},border:{light:"#ffffff",dark:"#111827"},text:{light:"#111827",dark:"#f3f4f6"}}}},o={name:"Default Green",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#16a34a",dark:"#16a34a"},faded:{light:"rgba(22, 163, 74, 0.1)",dark:"rgba(34, 197, 94, 0.1)"}},secondaryText:{light:"#6b7280",dark:"#9ca3af"},errorText:{light:"#b91c1c",dark:"#ef4444"},linkColor:{light:"#2563eb",dark:"#3b82f6"},announcement:{background:{light:"#ffffff",dark:"#1f2937"},text:{light:"#111827",dark:"#f9fafb"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"}},animations:{typingIndicatorDots:{dark:"#f9fafb",light:"#111827"}},messageList:{scrollbarThumb:{light:"#9ca3af",dark:"#6b7280"},scrollbarTrack:{light:"#f3f4f6",dark:"#111827"}},overlays:{emojiMenu:{background:{light:"#f3f4f6",dark:"#1f2937"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#f3f4f6",dark:"#1f2937"},border:{light:"#16a34a",dark:"#16a34a"},closeIcon:{light:"#6b7280",dark:"#9ca3af"},description:{light:"#111827",dark:"#f9fafb"},title:{light:"#111827",dark:"#f9fafb"}}},general:{background:{light:"#ffffff",dark:"#111827"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},statusLabel:{light:"#6b7280",dark:"#9ca3af"},statusValue:{light:"#16a34a",dark:"#16a34a"}},message:{myMessage:{background:{light:"#16a34a",dark:"#16a34a"},text:{light:"#ffffff",dark:"#ffffff"},isAnimated:!1},strangerMessage:{background:{light:"#f3f4f6",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},isAnimated:!1},systemMessage:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#6b7280",dark:"#9ca3af"}},deletedMessage:{text:{light:"#6b7280",dark:"#9ca3af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},inputBackground:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(55, 65, 81, 0.5)"},inputText:{light:"#111827",dark:"#f9fafb"},placeholderText:{light:"#9ca3af",dark:"#6b7280"},focusRing:{light:"#16a34a",dark:"#16a34a"}},buttons:{primary:{background:{light:"#16a34a",dark:"#16a34a"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#15803d",dark:"#16a34a"}},secondary:{background:{light:"#fff",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},hoverBackground:{light:"#d1d5db",dark:"#4b5563"},border:{light:"#d1d5db",dark:"#4b5563"}},destructive:{background:{light:"#dc2626",dark:"#ef4444"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b91c1c",dark:"#dc2626"},border:{light:"#dc2626",dark:"#ef4444"}},newMessages:{background:{light:"#f59e0b",dark:"#fcd347"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#d97706",dark:"#f59e0b"}}},reactions:{bubble:{background:{light:"#f3f4f6",dark:"#374151"},border:{light:"#ffffff",dark:"#111827"},text:{light:"#111827",dark:"#f3f4f6"}}}},l={name:"Monochrome Theme",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#525252",dark:"#e5e5e5"},faded:{light:"rgba(82, 82, 82, 0.15)",dark:"rgba(229, 229, 229, 0.15)"}},secondaryText:{light:"#a3a3a3",dark:"#a3a3a3"},errorText:{light:"#f87171",dark:"#ef4444"},linkColor:{light:"#404040",dark:"#fafafa"},announcement:{background:{light:"#fafafa",dark:"#262626"},text:{light:"#525252",dark:"#d4d4d4"},border:{light:"#e5e5e5",dark:"#404040"}},animations:{typingIndicatorDots:{dark:"#d4d4d4",light:"#737373"}},messageList:{scrollbarThumb:{light:"#d4d4d4",dark:"#525252"},scrollbarTrack:{light:"#fafafa",dark:"#171717"}},overlays:{emojiMenu:{background:{light:"#ffffff",dark:"#171717"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#e5e5e5",dark:"#262626"},border:{light:"#a3a3a3",dark:"#525252"},closeIcon:{light:"#a3a3a3",dark:"#a3a3a3"},description:{light:"#404040",dark:"#d4d4d4"},title:{light:"#171717",dark:"#fafafa"}}},general:{background:{light:"#ffffff",dark:"#171717"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(23, 23, 23, 0.6)"},border:{light:"rgba(229, 229, 229, 0.8)",dark:"rgba(64, 64, 64, 0.8)"},statusLabel:{light:"#a3a3a3",dark:"#a3a3a3"},statusValue:{light:"#404040",dark:"#e5e5e5"}},message:{myMessage:{background:{light:"#262626",dark:"#e5e5e5"},text:{light:"#ffffff",dark:"#171717"},isAnimated:!1},strangerMessage:{background:{light:"#e5e5e5",dark:"#262626"},text:{light:"#171717",dark:"#e5e5e5"},isAnimated:!1},systemMessage:{background:{light:"#fafafa",dark:"#262626"},text:{light:"#a3a3a3",dark:"#a3a3a3"}},deletedMessage:{text:{light:"#a3a3a3",dark:"#737373"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(23, 23, 23, 0.6)"},border:{light:"rgba(229, 229, 229, 0.8)",dark:"rgba(64, 64, 64, 0.8)"},inputBackground:{light:"#ffffff",dark:"rgba(64, 64, 64, 0.5)"},inputText:{light:"#262626",dark:"#e5e5e5"},placeholderText:{light:"#a3a3a3",dark:"#737373"},focusRing:{light:"#525252",dark:"#a3a3a3"}},buttons:{primary:{background:{light:"#262626",dark:"#fafafa"},text:{light:"#ffffff",dark:"#171717"},hoverBackground:{light:"#404040",dark:"#e5e5e5"}},secondary:{background:{light:"#ffffff",dark:"#262626"},text:{light:"#404040",dark:"#e5e5e5"},hoverBackground:{light:"#fafafa",dark:"#404040"},border:{light:"#e5e5e5",dark:"#404040"}},destructive:{background:{light:"#fca5a5",dark:"#ef4444"},text:{light:"#7f1d1d",dark:"#ffffff"},hoverBackground:{light:"#f87171",dark:"#dc2626"},border:{light:"#fca5a5",dark:"#ef4444"}},newMessages:{background:{light:"#fb923c",dark:"#fdba74"},text:{light:"#ffffff",dark:"#431407"},hoverBackground:{light:"#f97316",dark:"#fb923c"}}},reactions:{bubble:{background:{light:"#e5e5e5",dark:"#404040"},border:{light:"#ffffff",dark:"#171717"},text:{light:"#404040",dark:"#e5e5e5"}}}},d={name:"Tyron's Theme (flowery)",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#ee9ca7",dark:"#e18ea6"},faded:{light:"rgba(238, 156, 167, 0.15)",dark:"rgba(225, 142, 166, 0.15)"}},secondaryText:{light:"#a195a0",dark:"#b0a5af"},errorText:{light:"#f87171",dark:"#f87171"},linkColor:{light:"#9333ea",dark:"#c084fc"},announcement:{background:{light:"#fff9fb",dark:"#4c3b4d"},text:{light:"#5c4754",dark:"#fdecf2"},border:{light:"#fceaf2",dark:"#604d60"}},animations:{typingIndicatorDots:{dark:"#fdecf2",light:"#d66983"}},messageList:{scrollbarThumb:{light:"#fceaf2",dark:"#7c5c7a"},scrollbarTrack:{light:"#fff9fb",dark:"#302830"}},overlays:{emojiMenu:{background:{light:"#fff9fb",dark:"#302830"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#fdecf2",dark:"#4c3b4d"},border:{light:"#ee9ca7",dark:"#e18ea6"},closeIcon:{light:"#a195a0",dark:"#b0a5af"},description:{light:"#5c4754",dark:"#fdecf2"},title:{light:"#d66983",dark:"#ee9ca7"}}},general:{background:{light:"#fffbff",dark:"#302830"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 249, 251, 0.6)",dark:"rgba(48, 40, 48, 0.6)"},border:{light:"rgba(253, 236, 242, 0.8)",dark:"rgba(76, 59, 77, 0.8)"},statusLabel:{light:"#a195a0",dark:"#b0a5af"},statusValue:{light:"#d66983",dark:"#ee9ca7"}},message:{myMessage:{background:{light:"#ee9ca7",dark:"#e18ea6"},text:{light:"#ffffff",dark:"#ffffff"},isAnimated:!1},strangerMessage:{background:{light:"#fdecf2",dark:"#4c3b4d"},text:{light:"#5c4754",dark:"#fdecf2"},isAnimated:!1},systemMessage:{background:{light:"#fdecf2",dark:"#4c3b4d"},text:{light:"#a195a0",dark:"#b0a5af"}},deletedMessage:{text:{light:"#a195a0",dark:"#b0a5af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 249, 251, 0.6)",dark:"rgba(48, 40, 48, 0.6)"},border:{light:"rgba(253, 236, 242, 0.8)",dark:"rgba(76, 59, 77, 0.8)"},inputBackground:{light:"#fffbff",dark:"rgba(76, 59, 77, 0.5)"},inputText:{light:"#5c4754",dark:"#ee9ca7"},placeholderText:{light:"#a195a0",dark:"#7c5c7a"},focusRing:{light:"#ee9ca7",dark:"#e18ea6"}},buttons:{primary:{background:{light:"#ee9ca7",dark:"#e18ea6"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#e18ea6",dark:"#d66983"}},secondary:{background:{light:"#fffbff",dark:"#4c3b4d"},text:{light:"#d66983",dark:"#ee9ca7"},hoverBackground:{light:"#fdecf2",dark:"#604d60"},border:{light:"#fceaf2",dark:"#604d60"}},destructive:{background:{light:"#fca5a5",dark:"#ef4444"},text:{light:"#7f1d1d",dark:"#ffffff"},hoverBackground:{light:"#f87171",dark:"#dc2626"},border:{light:"#fca5a5",dark:"#ef4444"}},newMessages:{background:{light:"#fb923c",dark:"#fdba74"},text:{light:"#ffffff",dark:"#431407"},hoverBackground:{light:"#f97316",dark:"#fb923c"}}},reactions:{bubble:{background:{light:"#fdecf2",dark:"#604d60"},border:{light:"#fffbff",dark:"#302830"},text:{light:"#d66983",dark:"#ee9ca7"}}}}},9732:()=>{},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(5155),n=a(2115),i=a(192);let s=n.forwardRef((e,t)=>{let{className:a,type:n,...s}=e;return(0,r.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});s.displayName="Input"}}]);