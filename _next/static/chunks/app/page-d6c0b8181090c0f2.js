(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3287:()=>{},5909:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eM});var a=r(5155);function n(){return(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-5",children:[(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-24 h-24 bg-gradient-to-r from-green-100 to-green-50 rounded-full opacity-50 animate-float mix-blend-multiply"}),(0,a.jsx)("div",{className:"absolute top-1/3 right-32 w-48 h-48 bg-green-100 rounded-full opacity-20 animate-blob animation-delay-2000"}),(0,a.jsx)("div",{className:"absolute top-2/3 left-16 w-16 h-16 bg-green-50 rotate-45 opacity-30 animate-float animation-delay-3000"}),(0,a.jsx)("div",{className:"absolute bottom-32 right-1/4",children:(0,a.jsx)("div",{className:"w-32 h-32 border-4 border-green-100 rounded-full animate-pulse opacity-30"})}),(0,a.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,a.jsx)("div",{className:"h-full w-full bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"})}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-1/3 h-full animate-line",children:(0,a.jsx)("div",{className:"w-px h-full bg-gradient-to-b from-transparent via-green-100 to-transparent"})})]})}var s=r(2115),i=r(2596),o=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,i.$)(t))}let d=s.forwardRef((e,t)=>{let{className:r,type:n,...s}=e;return(0,a.jsx)("input",{type:n,className:l("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});d.displayName="Input";var c=r(4624);let g=(0,r(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function u(e){let{className:t,variant:r,size:n,asChild:s=!1,...i}=e,o=s?c.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:l(g({variant:r,size:n,className:t})),...i})}var h=r(6474),f=r(4416),m=r(5736);let b=(0,r(4982).UU)("https://wkafplnaexyyuobfufxa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndrYWZwbG5hZXh5eXVvYmZ1ZnhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0NjYwODEsImV4cCI6MjA2MTA0MjA4MX0.Sp9g2aWN24QoymYPoYJbxInnFNMautc26uJ1ba6Dvdc");var x=r(7859),p=r(760),k=r(9300),y=r.n(k);let v=e=>{let{children:t,className:r}=e,n=(0,s.useRef)(null),[i,o]=(0,s.useState)("auto");return(0,s.useEffect)(()=>{if(n.current){let e=new ResizeObserver(e=>{o(e[0].contentRect.height)});return e.observe(n.current),()=>{e.disconnect()}}},[]),(0,a.jsx)(x.P.div,{className:y()(r,"overflow-hidden"),style:{height:i},animate:{height:i},transition:{duration:.14},children:(0,a.jsx)("div",{ref:n,children:t})})},F=()=>{let[e,t]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"w-[350px] max-w-full mx-auto mb-2 my-4 bg-blue-50 border border-blue-200 rounded-lg shadow-sm transition-all duration-300",children:[(0,a.jsxs)("button",{onClick:()=>t(!e),className:"w-full flex justify-between items-center p-4 text-left font-semibold text-blue-800 hover:bg-blue-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 rounded-lg","aria-expanded":e,"aria-controls":"updatesbox-content",children:[(0,a.jsx)("span",{children:"P2P Chat Development Updates"}),(0,a.jsx)(h.A,{size:20,className:"transform transition-transform duration-300 ".concat(e?"rotate-180":"")})]}),e&&(0,a.jsxs)(x.P.div,{id:"updatesbox-content",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"p-4 border-t border-blue-200 text-sm text-blue-900 overflow-hidden",children:[(0,a.jsx)("p",{className:"font-semibold",children:"First, a huge thank you to everyone who has been using the app and participating in our initial testing phase. Your feedback has been invaluable as we work to build the best chat experience possible."}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{className:"mb-3",children:"During this test, we used a Peer-to-Peer (P2P) system, where users' devices connected directly to each other. We learned that this approach wasn't as effective as we'd hoped, as many devices, browsers, and network types couldn't form stable connections."}),(0,a.jsx)("p",{children:"Our top priority is a seamless experience for every user. That's why we're moving to a new and improved system with a powerful network of dedicated chat servers to act as a robust middleman. (While still being cost-effective!)"}),(0,a.jsx)("p",{children:"This move is a significant step forward in our mission to provide a stable, fast, and scalable platform for all of our users. We're confident this new architecture will lead to a dramatically better chat experience."}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:"happy chatting :D -ts"})]})]})},w=e=>{let{text:t,onRemove:r}=e;return(0,a.jsxs)("div",{className:"tag inline-flex items-center bg-green-600 text-white py-1 px-3 rounded-full m-1 font-medium text-sm transition-all duration-200",children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)("button",{onClick:()=>r(t),className:"ml-2 bg-black/10 hover:bg-black/30 rounded-full w-5 h-5 flex items-center justify-center transition-colors","aria-label":"Remove ".concat(t),children:(0,a.jsx)(f.A,{size:14})})]})},j=()=>(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),N=e=>{let{isOpen:t,onClose:r,onSubmit:n}=e,[i,o]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),[c,g]=(0,s.useState)(null),[h,b]=(0,s.useState)(!1),k=(0,s.useRef)(null);if((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),(0,s.useEffect)(()=>{if(t){var e;null==(e=k.current)||e.focus(),o(""),d(!1),g(null),b(!1)}},[t]),!t)return null;let y=async e=>{if(e.preventDefault(),!i.trim())return void g("Feedback cannot be empty.");d(!0),g(null);try{await n(i),b(!0),setTimeout(()=>{r()},2e3)}catch(e){g("Failed to submit feedback. Please try again."),console.error(e)}finally{d(!1)}};return(0,a.jsx)(p.N,{children:t&&(0,a.jsx)(x.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center","aria-modal":"true",role:"dialog",children:(0,a.jsxs)(x.P.div,{ref:k,tabIndex:-1,initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},className:"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4 p-8 relative",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close dialog",children:(0,a.jsx)(f.A,{size:24})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-full mb-4",children:(0,a.jsx)(m.A,{className:"text-green-600",size:32})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Got a suggestion?"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"We'd love to hear your ideas for new features or improvements."})]}),h?(0,a.jsx)("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"font-semibold text-green-700",children:"Thank you! Your feedback has been submitted."})}):(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"feedback-content",className:"sr-only",children:"Your suggestion"}),(0,a.jsx)("textarea",{id:"feedback-content",value:i,onChange:e=>o(e.target.value),placeholder:"Type your suggestion here...",className:"w-full h-32 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",required:!0})]}),c&&(0,a.jsx)("p",{className:"text-red-600 text-sm text-center",children:c}),(0,a.jsxs)(u,{type:"submit",disabled:l,className:"w-full rounded-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold text-base disabled:bg-gray-400 disabled:cursor-wait flex items-center justify-center",children:[l&&(0,a.jsx)(j,{}),l?"Submitting...":"Submit Feedback"]})]})]})})})};function C(e){let{interests:t,onInterestsChange:r,onFindMatch:n,isConnecting:i,status:o}=e,[l,c]=(0,s.useState)(""),[g,h]=(0,s.useState)([]),[f,k]=(0,s.useState)(!0),[y,C]=(0,s.useState)(null),[E,A]=(0,s.useState)(!1),S={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};(0,s.useEffect)(()=>{(async()=>{k(!0);try{let e=await fetch("".concat("https://animochat-turn-server.onrender.com","/interests/popular"));if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));let t=await e.json();h(t)}catch(e){console.error("Failed to fetch popular interests:",e),C("Could not load topics.")}finally{k(!1)}})()},[]);let D=e=>{let a=e.trim().toUpperCase();a&&!t.has(a)&&r(new Set(t).add(a)),c("")},B=e=>{let a=new Set(t);a.delete(e),r(a)},T=async e=>{let{error:t}=await b.from("suggestions").insert([{content:e}]);if(t)throw console.error("Error submitting feedback to Supabase:",t),t};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-[350px] max-w-full mx-auto",children:[(0,a.jsx)(v,{children:(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-2 pb-4",children:(0,a.jsx)(p.N,{children:Array.from(t).map(e=>(0,a.jsx)(x.P.div,{layout:!0,initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5,transition:{duration:.12}},transition:{type:"spring",stiffness:500,damping:30},children:(0,a.jsx)(w,{text:e,onRemove:B})},e))})})}),(0,a.jsx)(d,{id:"interest-input",type:"text",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),D(l))},className:"rounded-full py-6 px-6 focus-visible:border-green-500 focus-visible:ring-green-500 ring-offset-1 text-center",placeholder:"Type an interest & press Enter",maxLength:26})]}),(0,a.jsxs)("div",{className:"mt-8 text-center",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-4",children:"Popular Topics"}),(0,a.jsx)(v,{children:(0,a.jsx)(x.P.div,{className:"flex flex-wrap justify-center gap-2 max-w-md mx-auto",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{delay:.3,staggerChildren:.07,delayChildren:.2}}},initial:"hidden",animate:"visible",children:f?(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Loading topics..."}):y?(0,a.jsx)("p",{className:"text-sm text-red-500",children:y}):0===g.length?(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No active topics."}):g.map(e=>{let{interest:t,count:r}=e;return(0,a.jsxs)(x.P.button,{variants:S,onClick:()=>D(t),className:"bg-green-100 text-green-800 text-xs font-semibold px-3 py-1.5 rounded-full hover:bg-green-200 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)("span",{className:"bg-green-200 text-green-900 text-[10px] font-bold px-1.5 py-0.5 rounded-full ml-2",children:r})]},t)})})})]}),(0,a.jsx)("div",{className:"mt-12 w-[350px] max-w-full mx-auto",children:(0,a.jsx)(u,{onClick:()=>{let e=new Set(t);l.trim()&&!e.has(l.trim().toUpperCase())&&r(e=new Set(e).add(l.trim().toUpperCase())),n(e)},disabled:i||0===t.size&&!l.trim(),className:"w-full rounded-full py-6 bg-green-600 hover:bg-green-700 text-white font-bold text-base disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{}),o]}):"Find Match"})}),(0,a.jsx)(F,{}),(0,a.jsx)("div",{className:"text-center mt-6",children:(0,a.jsxs)(u,{variant:"secondary",className:"text-gray-500 hover:text-green-600 transition-colors",onClick:()=>A(!0),children:[(0,a.jsx)(m.A,{size:16,className:"mr-2"}),"We'd love to hear your feedback"]})}),(0,a.jsx)(N,{isOpen:E,onClose:()=>A(!1),onSubmit:T})]})}var E=r(3319);r(9732),r(3287);var A=r(892),S=r(8619),D=r(8829),B=r(4032),T=r(9424);function M(e){let{visible:t,isUserMessage:r,reply:n,onOpenEmojiMenu:s,theme:i,mode:o,isDeleted:l=!1}=e,d={backgroundColor:"transparent",color:i.secondaryText[o]};return(0,a.jsxs)("div",{className:"flex flex-row h-full items-center justify-center space-x-1 self-center ".concat(t?"visible":"invisible"),children:[(0,a.jsx)("div",{className:"".concat(r?"mr-1":"ml-2"," rounded-full transition-colors p-2 cursor-pointer hover:opacity-100 opacity-60"),style:d,onClick:n,children:(0,a.jsx)(B.A,{className:"w-4 h-4",strokeWidth:"2"})}),!l&&(0,a.jsx)("div",{className:"rounded-full transition-colors p-2 cursor-pointer hover:opacity-100 opacity-60",onClick:s,style:d,children:(0,a.jsx)(T.A,{className:"w-4 h-4",strokeWidth:"2"})}),r&&(0,a.jsx)("div",{className:"w-1"})]},"actions")}var I=r(6766);function _(e){let{message:t,isUserMessage:r,theme:n,mode:s}=e;return t?"image"===t.type?(0,a.jsx)(P,{message:t,isUserMessage:r,theme:n,mode:s}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"rounded-tl-3xl rounded-tr-3xl rounded-b-3xl px-3 pt-2 text-sm opacity-[0.65] pb-[32px] -mb-[32px] -z-10",style:{backgroundColor:n.overlays.replyingPreview.background[s],color:n.overlays.replyingPreview.description[s]},children:(0,a.jsx)("p",{className:"break-words whitespace-pre-wrap",children:"deleted"===t.type?"Deleted message.":t.content})})}):null}function P(e){let{message:t,isUserMessage:r,theme:n,mode:s}=e;return(0,a.jsx)("div",{className:"pb-[32px] -mb-[32px] rounded-t-lg rounded-b-md overflow-hidden",style:{backgroundColor:n.general.background[s]},children:(0,a.jsx)(I.default,{src:t.content,alt:"Reply image",className:"object-contain",width:80,height:100})})}function R(e){let{message:t,user:r,theme:n,mode:s}=e,i=t.reactions;if(!i||0===i.length)return null;let o=i.length,l=Array.from(new Set(i.map(e=>e.emoji)));return i.find(e=>e.user_id===r.id),(0,a.jsx)(x.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.2,ease:"easeOut"},className:"flex justify-end",children:(0,a.jsx)("div",{className:"self-end text-xs relative rounded-full mt-auto border-2 p-1.5 -top-2",style:{backgroundColor:n.reactions.bubble.background[s],borderColor:n.reactions.bubble.border[s],color:n.reactions.bubble.text[s]},children:(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[l.map((e,t)=>(0,a.jsx)("div",{className:"text-center",children:e},t)),o>0&&(0,a.jsx)("p",{className:"pl-1",children:(0,a.jsx)("span",{children:o})})]})})})}var L=r(9597);function O(e){var t,r,n;let{message:i,user:o,hovered:l,reply:d,animate:c=!1,onOpenEmojiMenu:g,onResendMessage:u,theme:h,mode:f,advertisementMessageId:m,onLinkClick:b,onReact:p}=e,k=i.sender===o.id,y=(r=i.hasPrevious,n=i.hasNext,k?"rounded-tl-3xl rounded-bl-3xl ".concat(r?"rounded-tr-sm":"rounded-tr-3xl"," ").concat(n?"rounded-br-sm":"rounded-br-3xl"):"rounded-tr-3xl rounded-br-3xl ".concat(r?"rounded-tl-sm":"rounded-tl-3xl"," ").concat(n?"rounded-bl-sm":"rounded-bl-3xl")),v="sending"===i.status,F="error"===i.status,w=null!=(t=i.edited)&&t,j=i.content,N=function(e){let t=e.trim();if(!t)return!1;let r=t.replace(/\s+/g,""),a=RegExp("(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu"),n=r.match(a);return!!n&&n.join("")===r}(j)&&3>=function(e){let t=e.trim().replace(/\s+/g,""),r=RegExp("(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu"),a=t.match(r);return a?a.length:0}(j),C=(0,S.d)(0),E=(0,D.G)(C,k?[0,-30,-40,-50]:[0,30,40,50],[0,.5,.8,1]),A=function(e){let{delay:t=500}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,s.useRef)(null),a=(0,s.useRef)(!1),n=(0,s.useCallback)(()=>{null!==r.current&&(clearTimeout(r.current),r.current=null)},[]),i=(0,s.useCallback)(n=>{a.current=!1,r.current=window.setTimeout(()=>{e(n)},t)},[e,t]),o=(0,s.useCallback)(e=>{a.current=!0,n()},[n]);return{onTouchStart:i,onTouchMove:o,onTouchEnd:(0,s.useCallback)(e=>{a.current||e.stopPropagation(),n()},[n]),onTouchCancel:(0,s.useCallback)(e=>{n()},[n])}}(()=>{"deleted"!==i.type&&g()});return(0,a.jsxs)("div",{className:"relative flex w-full items-center ".concat(k?"justify-end":"justify-start"),children:[(0,a.jsx)(x.P.div,{className:"absolute p-2.5 rounded-full",style:{background:h.accent.faded[f],scale:E},children:(0,a.jsx)(B.A,{className:"w-4 h-4",style:{color:h.accent.main[f]}})}),!F&&k&&(0,a.jsx)("p",{className:"opacity-50 text-[0.70rem] self-end pr-2 pb-2 overflow-clip -mr-[80px] ".concat(m!==i.id||l?"invisible":"visible"),style:{color:h.secondaryText[f]},children:"AnimoChat.com"}),k&&(0,a.jsx)(M,{isUserMessage:i.sender===o.id,visible:l,theme:h,mode:f,reply:d,onOpenEmojiMenu:g,isDeleted:"deleted"===i.type}),F&&k&&(0,a.jsxs)("p",{style:{color:h.errorText[f]},className:"opacity-80 text-[0.70rem] self-end pr-2 pb-2 overflow-clip",children:["Error sending message."," ",(0,a.jsx)("span",{className:"underline cursor-pointer",onClick:()=>u(i),children:"Retry"})]}),(0,a.jsxs)(x.P.div,{id:"message-bubble",dragSnapToOrigin:!0,dragTransition:{bounceDamping:13},drag:"x",dragConstraints:{left:0,right:0},onDrag:(e,t)=>{k&&t.offset.x>0||!k&&t.offset.x<0||C.set(t.offset.x)},onDragEnd:(e,t)=>{(k&&t.offset.x<-50||!k&&t.offset.x>50)&&d(),C.set(0)},whileTap:{scale:.8},style:{x:C,originX:+!!k,WebkitTapHighlightColor:"transparent"},onDoubleClick:()=>p("❤️"),..."deleted"!==i.type&&{onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),g()}},...A,initial:!!c&&{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.4},className:"max-w-[75%] mb-0.5 flex flex-col ".concat(k?"items-end":"items-start"," ").concat(v?"opacity-50":""),children:[w&&(0,a.jsx)("p",{className:"text-[0.70rem] px-2",style:{color:h.secondaryText[f]},children:"Edited"}),i.replyingTo&&(0,a.jsx)(_,{message:i.replyingTo,isUserMessage:k,theme:h,mode:f}),(null===i.type||void 0===i.type||"text"===i.type||"deleted"===i.type)&&(0,a.jsx)(W,{message:i,user:o,theme:h,mode:f,isUserMessage:k,roundedCorners:y,isLargeEmojiMessage:N,onLinkClick:b}),"image"===i.type&&(0,a.jsx)(z,{user:o,message:i,roundedCorners:y,isUserMessage:k,theme:h,mode:f})]},i.id+"-bubble"),!k&&(0,a.jsx)(M,{visible:l,theme:h,mode:f,isUserMessage:!1,reply:d,onOpenEmojiMenu:g}),!k&&(0,a.jsx)("p",{className:"opacity-50 text-[0.70rem] self-end pl-2 pb-2 -ml-[70px] ".concat(m!==i.id||l?"invisible":"visible"),style:{color:h.secondaryText[f]},children:"AnimoChat.com"})]},i.id)}function z(e){let{user:t,message:r,roundedCorners:n,isUserMessage:i,theme:o,mode:l}=e,[d,c]=(0,s.useState)(!1),g="rounded-3xl ".concat(n," ").concat(i?"rounded-tr-3xl":"rounded-tl-3xl");return(0,a.jsxs)("div",{id:"image-message-container",onClick:()=>c(!0),style:{cursor:"pointer"},children:[(0,a.jsxs)("div",{className:g,style:{overflow:"hidden",position:"relative",border:"2px solid transparent"},children:[(0,a.jsx)(L.A8,{src:r.content,children:(0,a.jsx)(I.default,{width:Math.min(.6*window.innerWidth,300),height:Math.min(.6*window.innerWidth,300),className:g,src:r.content,alt:"Image",style:{filter:d?"none":"blur(8px)",transition:"filter 0.3s ease-in-out",maxWidth:"100%",objectFit:"contain",backgroundColor:o.general.background[l]},sizes:"(max-width: 768px) 70vw, 400px"})},r.id),!d&&(0,a.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:o.message.imageOverlay.text[l],backgroundColor:o.message.imageOverlay.background[l],padding:"4px 8px",borderRadius:"0.25rem",pointerEvents:"none",fontSize:"0.85rem"},children:"(tap to reveal)"})]}),(0,a.jsx)(R,{message:r,user:t,theme:o,mode:l})]})}function W(e){let{message:t,user:r,theme:n,mode:s,isUserMessage:i,roundedCorners:o,isLargeEmojiMessage:l,onLinkClick:d}=e,c="deleted"===t.type,g=i?n.message.myMessage:n.message.strangerMessage;return(0,a.jsx)(a.Fragment,{children:l?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"px-2 py-2",children:[(0,a.jsx)("p",{className:"text-5xl",children:t.content}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(R,{message:t,user:r,theme:n,mode:s})})]})}):(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"".concat(o," animate-gradient-x"),style:{background:g.background[s],backgroundSize:"200% 100%",color:g.text[s]}}),(0,a.jsx)("div",{className:"".concat(o," relative max-w-full break-words px-3 py-2 ").concat(g.isAnimated?"bg-white opacity-70":""),style:{wordBreak:"break-word",overflowWrap:"break-word",color:g.text[s]},children:(0,a.jsx)("p",{className:"break-words whitespace-pre-wrap",children:(0,a.jsx)(A.A,{options:{render:e=>{let{attributes:t,content:r}=e;return(0,a.jsx)("a",{...t,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline",color:n.linkColor[s]},onClick:e=>{d?d(e):e.stopPropagation()},children:r})}},children:c?(0,a.jsx)("span",{className:"italic",style:{color:n.message.deletedMessage.text[s]},children:"Message has been deleted."}):t.content})})})]}),(0,a.jsx)(R,{message:t,user:r,theme:n,mode:s})]})})}function U(e){let{message:t,user:r,onSwipe:n,onReact:i,onStartedSwipe:o,onEndedSwipe:l,animate:d=!1,mode:c,theme:g,advertisementMessageId:u,onOpenEmojiMenu:h=()=>{},onResendMessage:f=()=>{},isEmojiMenuOpen:m,onLinkClick:b}=e,[x,p]=(0,s.useState)(!1),[k,y]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{y("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),(0,a.jsx)("div",{"data-message-id":"message-"+t.id,className:"relative px-4 select-none",onMouseEnter:()=>!k&&p(!0),onMouseLeave:()=>!k&&p(!1),children:(0,a.jsx)("div",{children:(0,a.jsx)(O,{onLinkClick:b,animate:d,message:t,user:r,mode:c,hovered:x,reply:()=>n(t.id),onOpenEmojiMenu:()=>h(t),onReact:e=>i(t.id,e),onResendMessage:f,theme:g,advertisementMessageId:u},t.id+"-bubble")},"parent-message-bubble flex flex-col")})}let Y={name:"Cosmic Latte",typography:{fontFamily:"'Space Mono', monospace",baseFontSize:"15px"},accent:{main:{light:"#c59c6c",dark:"#d4b38a"},faded:{light:"rgba(197, 156, 108, 0.15)",dark:"rgba(212, 179, 138, 0.1)"}},secondaryText:{light:"#6d4c41",dark:"#a1887f"},errorText:{light:"#d32f2f",dark:"#ef9a9a"},linkColor:{light:"#81d4fa",dark:"#4fc3f7"},announcement:{background:{light:"#f5f5f5",dark:"#2a211c"},text:{light:"#4e342e",dark:"#d7ccc8"},border:{light:"rgba(212, 179, 138, 0.5)",dark:"rgba(212, 179, 138, 0.2)"}},animations:{typingIndicatorDots:{dark:"#d4b38a",light:"#c59c6c"}},messageList:{scrollbarThumb:{light:"#bcaaa4",dark:"#6d4c41"},scrollbarTrack:{light:"#eFEBE9",dark:"#1e1511"}},overlays:{emojiMenu:{background:{light:"#fff",dark:"#3e2723"},shadow:"0 4px 8px -1px rgba(0, 0, 0, 0.15)"},replyingPreview:{background:{light:"#f5f5f5",dark:"#2a211c"},border:{light:"#c59c6c",dark:"#d4b38a"},closeIcon:{light:"#8d6e63",dark:"#bcaaa4"},description:{light:"#5d4037",dark:"#d7ccc8"},title:{light:"#4e342e",dark:"#ffffff"}}},general:{background:{light:"#efebe9",dark:"#1e1511"},backdropBlur:"1rem",shadow:"0 15px 35px -10px rgb(0 0 0 / 0.25)",borderRadius:"1.25rem"},header:{background:{light:"rgba(239, 235, 233, 0.8)",dark:"rgba(30, 21, 17, 0.8)"},border:{light:"rgba(215, 204, 200, 0.8)",dark:"rgba(42, 33, 28, 0.8)"},statusLabel:{light:"#8d6e63",dark:"#a1887f"},statusValue:{light:"#8d6e63",dark:"#d4b38a"}},message:{myMessage:{background:{light:"#c59c6c",dark:"#8a6b4a"},text:{light:"#ffffff",dark:"#f5f5f5"},isAnimated:!1},strangerMessage:{background:{light:"#ffffff",dark:"#4e342e"},text:{light:"#4e342e",dark:"#d7ccc8"},isAnimated:!1},systemMessage:{background:{light:"transparent",dark:"transparent"},text:{light:"#a1887f",dark:"#8d6e63"}},deletedMessage:{text:{light:"#bcaaa4",dark:"#a1887f"}},imageOverlay:{background:{light:"rgba(78, 52, 46, 0.5)",dark:"rgba(0, 0, 0, 0.5)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(42, 33, 28, 0.6)"},border:{light:"rgba(215, 204, 200, 0.9)",dark:"rgba(62, 39, 35, 0.9)"},inputBackground:{light:"#ffffff",dark:"#5d4037"},inputText:{light:"#3e2723",dark:"#f5f5f5"},placeholderText:{light:"#a1887f",dark:"#a1887f"},focusRing:{light:"#c59c6c",dark:"#d4b38a"}},buttons:{primary:{background:{light:"#a1887f",dark:"#c59c6c"},text:{light:"#ffffff",dark:"#3e2723"},hoverBackground:{light:"#8d6e63",dark:"#d4b38a"}},secondary:{background:{light:"#fff",dark:"#5d4037"},text:{light:"#6d4c41",dark:"#d7ccc8"},hoverBackground:{light:"#efebe9",dark:"#6d4c41"},border:{light:"#d7ccc8",dark:"#8d6e63"}},destructive:{background:{light:"#c62828",dark:"#d32f2f"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b71c1c",dark:"#c62828"},border:{light:"#c62828",dark:"#d32f2f"}},newMessages:{background:{light:"#80deea",dark:"#4dd0e1"},text:{light:"#006064",dark:"#004d40"},hoverBackground:{light:"#4dd0e1",dark:"#26c6da"}}},reactions:{bubble:{background:{light:"#ffffff",dark:"#6d4c41"},border:{light:"#d7ccc8",dark:"#1e1511"},text:{light:"#c59c6c",dark:"#f5f5f5"}}}},X={name:"Sunset Bliss",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#FF6B6B",dark:"#FF6B6B"},faded:{light:"rgba(255, 107, 107, 0.15)",dark:"rgba(255, 107, 107, 0.15)"}},secondaryText:{light:"#6D6875",dark:"#A5A58D"},errorText:{light:"#E63946",dark:"#F28B82"},linkColor:{light:"#F08A5D",dark:"#F08A5D"},announcement:{background:{light:"#FFF1E6",dark:"#332F2C"},text:{light:"#3D315B",dark:"#F1E4CE"},border:{light:"rgba(253, 230, 138, 0.8)",dark:"rgba(59, 50, 53, 0.8)"}},animations:{typingIndicatorDots:{dark:"#F1E4CE",light:"#3D315B"}},messageList:{scrollbarThumb:{light:"#E9C46A",dark:"#8D8680"},scrollbarTrack:{light:"#FFF8E1",dark:"#2A2825"}},overlays:{emojiMenu:{background:{light:"#FFFAF0",dark:"#3E3B37"},shadow:"0 4px 12px rgba(0,0,0,0.1)"},replyingPreview:{background:{light:"#FFF1E6",dark:"#332F2C"},border:{light:"#FF6B6B",dark:"#FF6B6B"},closeIcon:{light:"#6D6875",dark:"#A5A58D"},description:{light:"#3D315B",dark:"#F1E4CE"},title:{light:"#3D315B",dark:"#F1E4CE"}}},general:{background:{light:"#FFF8E1",dark:"#1F1E1C"},backdropBlur:"1.5rem",shadow:"0 20px 40px rgba(0,0,0,0.2)",borderRadius:"1.5rem"},header:{background:{light:"rgba(255, 255, 255, 0.7)",dark:"rgba(40, 38, 35, 0.7)"},border:{light:"rgba(229,231,235,0.8)",dark:"rgba(55,65,81,0.8)"},statusLabel:{light:"#6D6875",dark:"#A5A58D"},statusValue:{light:"#FF6B6B",dark:"#FF6B6B"}},message:{myMessage:{background:{light:"#FF6B6B",dark:"#FF6B6B"},text:{light:"#FFFFFF",dark:"#FFFFFF"},isAnimated:!1},strangerMessage:{background:{light:"#FFF1E6",dark:"#3E3B37"},text:{light:"#3D315B",dark:"#F1E4CE"},isAnimated:!1},systemMessage:{background:{light:"#E9C46A",dark:"#3E3B37"},text:{light:"#6D6875",dark:"#A5A58D"}},deletedMessage:{text:{light:"#6D6875",dark:"#A5A58D"}},imageOverlay:{background:{light:"rgba(0,0,0,0.5)",dark:"rgba(0,0,0,0.5)"},text:{light:"#FFFFFF",dark:"#FFFFFF"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(40,38,35,0.8)"},border:{light:"rgba(229,231,235,0.8)",dark:"rgba(55,65,81,0.8)"},inputBackground:{light:"#FFFFFF",dark:"#4B483E"},inputText:{light:"#3D315B",dark:"#F1E4CE"},placeholderText:{light:"#A5A58D",dark:"#6D6875"},focusRing:{light:"#FF6B6B",dark:"#FF6B6B"}},buttons:{primary:{background:{light:"#FF6B6B",dark:"#FF6B6B"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#E63946",dark:"#E63946"}},secondary:{background:{light:"#FFF1E6",dark:"#3E3B37"},text:{light:"#3D315B",dark:"#F1E4CE"},hoverBackground:{light:"#FFE5D4",dark:"#5A564F"},border:{light:"#FFE5D4",dark:"#5A564F"}},destructive:{background:{light:"#E63946",dark:"#F28B82"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#D62828",dark:"#E63946"},border:{light:"#E63946",dark:"#F28B82"}},newMessages:{background:{light:"#F4A261",dark:"#E76F51"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#E76F51",dark:"#F4A261"}}},reactions:{bubble:{background:{light:"#FFF1E6",dark:"#3E3B37"},border:{light:"#FFFFFF",dark:"#1F1E1C"},text:{light:"#3D315B",dark:"#F1E4CE"}}}},V={name:"Aurora Glow",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#8E44AD",dark:"#8E44AD"},faded:{light:"rgba(142,68,173,0.15)",dark:"rgba(142,68,173,0.15)"}},secondaryText:{light:"#2C3E50",dark:"#BDC3C7"},errorText:{light:"#C0392B",dark:"#E74C3C"},linkColor:{light:"#2980B9",dark:"#3498DB"},announcement:{background:{light:"#F5EEF8",dark:"#1A1A1D"},text:{light:"#4A235A",dark:"#F8F9F9"},border:{light:"rgba(155,89,182,0.8)",dark:"rgba(26,26,29,0.8)"}},animations:{typingIndicatorDots:{dark:"#F8F9F9",light:"#4A235A"}},messageList:{scrollbarThumb:{light:"#A569BD",dark:"#7D3C98"},scrollbarTrack:{light:"#F9EBEA",dark:"#1A1A1D"}},overlays:{emojiMenu:{background:{light:"#FAE3F5",dark:"#2C2A2E"},shadow:"0 4px 10px rgba(0,0,0,0.1)"},replyingPreview:{background:{light:"#F5EEF8",dark:"#1A1A1D"},border:{light:"#8E44AD",dark:"#8E44AD"},closeIcon:{light:"#2C3E50",dark:"#BDC3C7"},description:{light:"#4A235A",dark:"#F8F9F9"},title:{light:"#4A235A",dark:"#F8F9F9"}}},general:{background:{light:"linear-gradient(45deg, #FFC0CB 0%, #8E44AD 100%)",dark:"linear-gradient(45deg, #0D0D0D 0%, #4A235A 100%)"},backdropBlur:"1rem",shadow:"0 20px 35px rgba(0,0,0,0.15)",borderRadius:"1.25rem"},header:{background:{light:"rgba(255,255,255,0.7)",dark:"rgba(15,15,15,0.7)"},border:{light:"rgba(224,224,224,0.8)",dark:"rgba(40,40,40,0.8)"},statusLabel:{light:"#2C3E50",dark:"#BDC3C7"},statusValue:{light:"#8E44AD",dark:"#8E44AD"}},message:{myMessage:{background:{light:"#8E44AD",dark:"#8E44AD"},text:{light:"#FFFFFF",dark:"#FFFFFF"},isAnimated:!1},strangerMessage:{background:{light:"#FAE3F5",dark:"#2C2A2E"},text:{light:"#4A235A",dark:"#F8F9F9"},isAnimated:!1},systemMessage:{background:{light:"#f5f5f5",dark:"#2C2A2E"},text:{light:"#2C3E50",dark:"#BDC3C7"}},deletedMessage:{text:{light:"#2C3E50",dark:"#BDC3C7"}},imageOverlay:{background:{light:"rgba(0,0,0,0.5)",dark:"rgba(0,0,0,0.5)"},text:{light:"#FFFFFF",dark:"#FFFFFF"}}},inputArea:{background:{light:"rgba(255,255,255,0.8)",dark:"rgba(15,15,15,0.8)"},border:{light:"rgba(224,224,224,0.8)",dark:"rgba(40,40,40,0.8)"},inputBackground:{light:"#FFFFFF",dark:"#3E3B37"},inputText:{light:"#4A235A",dark:"#F8F9F9"},placeholderText:{light:"#BDC3C7",dark:"#2C3E50"},focusRing:{light:"#8E44AD",dark:"#8E44AD"}},buttons:{primary:{background:{light:"#8E44AD",dark:"#8E44AD"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#732D91",dark:"#732D91"}},secondary:{background:{light:"#FAE3F5",dark:"#2C2A2E"},text:{light:"#4A235A",dark:"#F8F9F9"},hoverBackground:{light:"#FADADD",dark:"#4A2236"},border:{light:"#FADADD",dark:"#4A2236"}},destructive:{background:{light:"#C0392B",dark:"#E74C3C"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#922B21",dark:"#C0392B"},border:{light:"#C0392B",dark:"#E74C3C"}},newMessages:{background:{light:"#2980B9",dark:"#3498DB"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#1F6391",dark:"#2980B8"}}},reactions:{bubble:{background:{light:"#FAE3F5",dark:"#2C2A2E"},border:{light:"#FFFFFF",dark:"#0D0D0D"},text:{light:"#4A235A",dark:"#F8F9F9"}}}},G={name:"Pride Month",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)",dark:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)"},faded:{light:"rgba(0, 0, 0, 0.05)",dark:"rgba(255, 255, 255, 0.1)"}},secondaryText:{light:"#6b7280",dark:"#9ca3af"},errorText:{light:"#b91c1c",dark:"#ef4444"},linkColor:{light:"#2563eb",dark:"#3b82f6"},announcement:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#111827",dark:"#f9fafb"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"}},animations:{typingIndicatorDots:{dark:"#f9fafb",light:"#111827"}},messageList:{scrollbarThumb:{light:"#9ca3af",dark:"#6b7280"},scrollbarTrack:{light:"#f3f4f6",dark:"#111827"}},overlays:{emojiMenu:{background:{light:"#f3f4f6",dark:"#1f2937"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#f3f4f6",dark:"#1f2937"},border:{light:"#4f46e5",dark:"#c7d2fe"},closeIcon:{light:"#6b7280",dark:"#9ca3af"},description:{light:"#111827",dark:"#f9fafb"},title:{light:"#111827",dark:"#f9fafb"}}},general:{background:{light:"#ffffff",dark:"#111827"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},statusLabel:{light:"#6b7280",dark:"#9ca3af"},statusValue:{light:"#4f46e5",dark:"#a5b4fc"}},message:{myMessage:{background:{light:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)",dark:"linear-gradient(90deg, #E40303, #FF8C00, #FFED00, #008026, #004DFF, #750787)"},text:{light:"#000",dark:"#000"},isAnimated:!0},strangerMessage:{background:{light:"#f3f4f6",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},isAnimated:!1},systemMessage:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#6b7280",dark:"#9ca3af"}},deletedMessage:{text:{light:"#6b7280",dark:"#9ca3af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},inputBackground:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(55, 65, 81, 0.5)"},inputText:{light:"#111827",dark:"#f9fafb"},placeholderText:{light:"#9ca3af",dark:"#6b7280"},focusRing:{light:"#4f46e5",dark:"#c7d2fe"}},buttons:{primary:{background:{light:"linear-gradient(90deg,rgba(224, 126, 126, 1) 0%, rgba(199, 184, 87, 1) 50%, rgba(237, 83, 229, 1) 100%);",dark:"linear-gradient(90deg,rgba(128, 69, 69, 1) 0%, rgba(122, 116, 69, 1) 50%, rgba(156, 56, 149, 1) 100%);"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"linear-gradient(90deg, #d30202, #ec8200, #ece200, #007022, #0043e6, #650676)",dark:"linear-gradient(90deg, #d30202, #ec8200, #ece200, #007022, #0043e6, #650676)"}},secondary:{background:{light:"#fff",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},hoverBackground:{light:"#d1d5db",dark:"#4b5563"},border:{light:"#d1d5db",dark:"#4b5563"}},destructive:{background:{light:"#dc2626",dark:"#ef4444"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b91c1c",dark:"#dc2626"},border:{light:"#dc2626",dark:"#ef4444"}},newMessages:{background:{light:"#f59e0b",dark:"#fcd347"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#d97706",dark:"#f59e0b"}}},reactions:{bubble:{background:{light:"#f3f4f6",dark:"#374151"},border:{light:"#ffffff",dark:"#111827"},text:{light:"#111827",dark:"#f3f4f6"}}}},H={name:"Default Green",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#16a34a",dark:"#16a34a"},faded:{light:"rgba(22, 163, 74, 0.1)",dark:"rgba(34, 197, 94, 0.1)"}},secondaryText:{light:"#6b7280",dark:"#9ca3af"},errorText:{light:"#b91c1c",dark:"#ef4444"},linkColor:{light:"#2563eb",dark:"#3b82f6"},announcement:{background:{light:"#ffffff",dark:"#1f2937"},text:{light:"#111827",dark:"#f9fafb"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"}},animations:{typingIndicatorDots:{dark:"#f9fafb",light:"#111827"}},messageList:{scrollbarThumb:{light:"#9ca3af",dark:"#6b7280"},scrollbarTrack:{light:"#f3f4f6",dark:"#111827"}},overlays:{emojiMenu:{background:{light:"#f3f4f6",dark:"#1f2937"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#f3f4f6",dark:"#1f2937"},border:{light:"#16a34a",dark:"#16a34a"},closeIcon:{light:"#6b7280",dark:"#9ca3af"},description:{light:"#111827",dark:"#f9fafb"},title:{light:"#111827",dark:"#f9fafb"}}},general:{background:{light:"#ffffff",dark:"#111827"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},statusLabel:{light:"#6b7280",dark:"#9ca3af"},statusValue:{light:"#16a34a",dark:"#16a34a"}},message:{myMessage:{background:{light:"#16a34a",dark:"#16a34a"},text:{light:"#ffffff",dark:"#ffffff"},isAnimated:!1},strangerMessage:{background:{light:"#f3f4f6",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},isAnimated:!1},systemMessage:{background:{light:"#f3f4f6",dark:"#1f2937"},text:{light:"#6b7280",dark:"#9ca3af"}},deletedMessage:{text:{light:"#6b7280",dark:"#9ca3af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.6)",dark:"rgba(29, 39, 53, 0.6)"},border:{light:"rgba(229, 231, 235, 0.8)",dark:"rgba(55, 65, 81, 0.8)"},inputBackground:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(55, 65, 81, 0.5)"},inputText:{light:"#111827",dark:"#f9fafb"},placeholderText:{light:"#9ca3af",dark:"#6b7280"},focusRing:{light:"#16a34a",dark:"#16a34a"}},buttons:{primary:{background:{light:"#16a34a",dark:"#16a34a"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#15803d",dark:"#16a34a"}},secondary:{background:{light:"#fff",dark:"#374151"},text:{light:"#1f2937",dark:"#f9fafb"},hoverBackground:{light:"#d1d5db",dark:"#4b5563"},border:{light:"#d1d5db",dark:"#4b5563"}},destructive:{background:{light:"#dc2626",dark:"#ef4444"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#b91c1c",dark:"#dc2626"},border:{light:"#dc2626",dark:"#ef4444"}},newMessages:{background:{light:"#f59e0b",dark:"#fcd347"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#d97706",dark:"#f59e0b"}}},reactions:{bubble:{background:{light:"#f3f4f6",dark:"#374151"},border:{light:"#ffffff",dark:"#111827"},text:{light:"#111827",dark:"#f3f4f6"}}}},J={name:"Tyron's Theme",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#ee9ca7",dark:"#e18ea6"},faded:{light:"rgba(238, 156, 167, 0.15)",dark:"rgba(225, 142, 166, 0.15)"}},secondaryText:{light:"#a195a0",dark:"#b0a5af"},errorText:{light:"#f87171",dark:"#f87171"},linkColor:{light:"#9333ea",dark:"#c084fc"},announcement:{background:{light:"#fff9fb",dark:"#4c3b4d"},text:{light:"#5c4754",dark:"#fdecf2"},border:{light:"#fceaf2",dark:"#604d60"}},animations:{typingIndicatorDots:{dark:"#fdecf2",light:"#d66983"}},messageList:{scrollbarThumb:{light:"#fceaf2",dark:"#7c5c7a"},scrollbarTrack:{light:"#fff9fb",dark:"#302830"}},overlays:{emojiMenu:{background:{light:"#fff9fb",dark:"#302830"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#fdecf2",dark:"#4c3b4d"},border:{light:"#ee9ca7",dark:"#e18ea6"},closeIcon:{light:"#a195a0",dark:"#b0a5af"},description:{light:"#5c4754",dark:"#fdecf2"},title:{light:"#d66983",dark:"#ee9ca7"}}},general:{background:{light:"#fffbff",dark:"#302830"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 249, 251, 0.6)",dark:"rgba(48, 40, 48, 0.6)"},border:{light:"rgba(253, 236, 242, 0.8)",dark:"rgba(76, 59, 77, 0.8)"},statusLabel:{light:"#a195a0",dark:"#b0a5af"},statusValue:{light:"#d66983",dark:"#ee9ca7"}},message:{myMessage:{background:{light:"#ee9ca7",dark:"#e18ea6"},text:{light:"#ffffff",dark:"#ffffff"},isAnimated:!1},strangerMessage:{background:{light:"#fdecf2",dark:"#4c3b4d"},text:{light:"#5c4754",dark:"#fdecf2"},isAnimated:!1},systemMessage:{background:{light:"#fdecf2",dark:"#4c3b4d"},text:{light:"#a195a0",dark:"#b0a5af"}},deletedMessage:{text:{light:"#a195a0",dark:"#b0a5af"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 249, 251, 0.6)",dark:"rgba(48, 40, 48, 0.6)"},border:{light:"rgba(253, 236, 242, 0.8)",dark:"rgba(76, 59, 77, 0.8)"},inputBackground:{light:"#fffbff",dark:"rgba(76, 59, 77, 0.5)"},inputText:{light:"#5c4754",dark:"#ee9ca7"},placeholderText:{light:"#a195a0",dark:"#7c5c7a"},focusRing:{light:"#ee9ca7",dark:"#e18ea6"}},buttons:{primary:{background:{light:"#ee9ca7",dark:"#e18ea6"},text:{light:"#ffffff",dark:"#ffffff"},hoverBackground:{light:"#e18ea6",dark:"#d66983"}},secondary:{background:{light:"#fffbff",dark:"#4c3b4d"},text:{light:"#d66983",dark:"#ee9ca7"},hoverBackground:{light:"#fdecf2",dark:"#604d60"},border:{light:"#fceaf2",dark:"#604d60"}},destructive:{background:{light:"#fca5a5",dark:"#ef4444"},text:{light:"#7f1d1d",dark:"#ffffff"},hoverBackground:{light:"#f87171",dark:"#dc2626"},border:{light:"#fca5a5",dark:"#ef4444"}},newMessages:{background:{light:"#fb923c",dark:"#fdba74"},text:{light:"#ffffff",dark:"#431407"},hoverBackground:{light:"#f97316",dark:"#fb923c"}}},reactions:{bubble:{background:{light:"#fdecf2",dark:"#604d60"},border:{light:"#fffbff",dark:"#302830"},text:{light:"#d66983",dark:"#ee9ca7"}}}};function q(e){let{index:t,message:r,user:n,animate:s=!1,isLast:i=!1,onSwipe:o,onStartedSwipe:l,onEndedSwipe:d,onReact:c,onOpenEmojiMenu:g,onResendMessage:u,isEmojiMenuOpen:h,theme:f=H,mode:m,secondVisibleElement:b,onLinkClick:x}=e;if("system"===r.sender)return(0,a.jsx)("div",{className:"flex justify-center py-4 px-4 text-center",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:r.content})},r.id+"_system");let p=t%5==0?r.id:null;return(0,a.jsxs)("div",{"data-is-message":"true","data-message-id":r.id,className:"max-w-full w-full select-none",children:[r.showTime&&(0,a.jsx)("div",{className:"flex justify-center py-4",children:(0,a.jsx)("p",{className:"text-xs font-normal",style:{color:f.message.systemMessage.text[m]},children:r.created_at&&(0,E.GP)(new Date(r.created_at),"h:mm a")})},r.id+"_time"),(0,a.jsx)(U,{advertisementMessageId:p,message:r,animate:s,user:n,onSwipe:o,onStartedSwipe:l,onEndedSwipe:d,onReact:c,onOpenEmojiMenu:g,onResendMessage:u,theme:f,mode:m,isEmojiMenuOpen:h,onLinkClick:x},r.id+"_message"),(i||!r.hasNext)&&(0,a.jsx)("div",{className:"h-1"},r.id+"_bottom")]},"parent_message_"+r.id)}let Z={name:"\uD83D\uDC1D Theme",typography:{fontFamily:"inherit",baseFontSize:"16px"},accent:{main:{light:"#FFCB37",dark:"#FFD966"},faded:{light:"rgba(255, 203, 55, 0.15)",dark:"rgba(255, 217, 102, 0.15)"}},secondaryText:{light:"#707070",dark:"#A0A0A0"},errorText:{light:"#D9534F",dark:"#f87171"},linkColor:{light:"#FFCB37",dark:"#FFD966"},announcement:{background:{light:"#FFFBEB",dark:"#3A301A"},text:{light:"#282828",dark:"#FFFBEB"},border:{light:"#FEEBC8",dark:"#4A3C22"}},animations:{typingIndicatorDots:{dark:"#FFFBEB",light:"#333333"}},messageList:{scrollbarThumb:{light:"#FFD966",dark:"#5A4C29"},scrollbarTrack:{light:"#FFFBEB",dark:"#1E1E1E"}},overlays:{emojiMenu:{background:{light:"#FFFFFF",dark:"#1E1E1E"},shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},replyingPreview:{background:{light:"#F0F0F0",dark:"#2C2C2C"},border:{light:"#FFCB37",dark:"#FFD966"},closeIcon:{light:"#707070",dark:"#A0A0A0"},description:{light:"#333333",dark:"#F0F0F0"},title:{light:"#222222",dark:"#FFFFFF"}}},general:{background:{light:"#FFFFFF",dark:"#121212"},backdropBlur:"1.5rem",shadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",borderRadius:"2rem"},header:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(30, 30, 30, 0.8)"},border:{light:"rgba(240, 240, 240, 0.8)",dark:"rgba(44, 44, 44, 0.8)"},statusLabel:{light:"#707070",dark:"#A0A0A0"},statusValue:{light:"#333333",dark:"#FFD966"}},message:{myMessage:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},isAnimated:!1},strangerMessage:{background:{light:"#F0F0F0",dark:"#2C2C2C"},text:{light:"#222222",dark:"#FFFFFF"},isAnimated:!1},systemMessage:{background:{light:"#F0F0F0",dark:"#2C2C2C"},text:{light:"#707070",dark:"#A0A0A0"}},deletedMessage:{text:{light:"#A0A0A0",dark:"#707070"}},imageOverlay:{background:{light:"rgba(0, 0, 0, 0.4)",dark:"rgba(0, 0, 0, 0.4)"},text:{light:"#ffffff",dark:"#ffffff"}}},inputArea:{background:{light:"rgba(255, 255, 255, 0.8)",dark:"rgba(30, 30, 30, 0.8)"},border:{light:"rgba(240, 240, 240, 0.8)",dark:"rgba(44, 44, 44, 0.8)"},inputBackground:{light:"#FFFFFF",dark:"#2C2C2C"},inputText:{light:"#222222",dark:"#FFFFFF"},placeholderText:{light:"#A0A0A0",dark:"#707070"},focusRing:{light:"#FFD966",dark:"#FFCB37"}},buttons:{primary:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},hoverBackground:{light:"#FFD966",dark:"#FFCB37"}},secondary:{background:{light:"#FFFFFF",dark:"#2C2C2C"},text:{light:"#222222",dark:"#FFFFFF"},hoverBackground:{light:"#F0F0F0",dark:"#3C3C3C"},border:{light:"#F0F0F0",dark:"#3C3C3C"}},destructive:{background:{light:"#D9534F",dark:"#D9534F"},text:{light:"#FFFFFF",dark:"#FFFFFF"},hoverBackground:{light:"#C9302C",dark:"#C9302C"},border:{light:"#D43F3A",dark:"#D43F3A"}},newMessages:{background:{light:"#FFCB37",dark:"#FFD966"},text:{light:"#222222",dark:"#222222"},hoverBackground:{light:"#FFD966",dark:"#FFCB37"}}},reactions:{bubble:{background:{light:"#F0F0F0",dark:"#3C3C3C"},border:{light:"#FFFFFF",dark:"#121212"},text:{light:"#222222",dark:"#FFFFFF"}}}},Q=["❤️","\uD83D\uDE06","\uD83D\uDE2E","\uD83D\uDE22","\uD83D\uDE2D","\uD83D\uDE21","\uD83D\uDC4D"];function K(e){let{isUserMessage:t,preselectedEmoji:r,message:n,messageDiv:i,onReact:o,onClose:l}=e,d=(0,s.useRef)(null),[c,g]=(0,s.useState)({top:0,left:0}),[u,h]=(0,s.useState)(null),f=(0,s.useRef)(null);return(0,s.useLayoutEffect)(()=>{let e=i.querySelector("#message-bubble");if(e.style.position="relative",e.style.zIndex="30",e&&d.current){let t=e.getBoundingClientRect(),r=d.current,a=r.offsetHeight,n=t.top+window.scrollY-a-10,s=t.right-r.offsetWidth-16;e.classList.contains("items-end")||(s=t.left-16),g({top:n,left:s})}return()=>{e.style.zIndex="0"}},[i]),(0,s.useEffect)(()=>{let e=d.current;if(!e)return;let t=t=>{if(0!==t.button)return;try{e.setPointerCapture(t.pointerId)}catch(e){}f.current=t.pointerId;let r=document.elementFromPoint(t.clientX,t.clientY);if(r){let e=r.closest("[data-emoji]");if(e)return void h(e.getAttribute("data-emoji"))}h(null)},a=t=>{if(f.current!==t.pointerId||!e)return;let r=document.elementFromPoint(t.clientX,t.clientY);if(r){let e=r.closest("[data-emoji]");if(e)return void h(e.getAttribute("data-emoji"))}h(null)},s=t=>{if(f.current===t.pointerId){if(u){let e=(null==r?void 0:r.emoji)===u?null:u;o(n.id,e)}l();try{e.releasePointerCapture(t.pointerId)}catch(e){}f.current=null}};return e.addEventListener("pointerdown",t),window.addEventListener("pointermove",a),window.addEventListener("pointerup",s),()=>{e.removeEventListener("pointerdown",t),window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",s)}},[u,o,l,r,n.id]),(0,a.jsx)(x.P.div,{layout:!0,className:"absolute top-0 left-0 w-screen h-screen",initial:{userSelect:"none",zIndex:100,opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,a.jsx)("div",{id:"emoji-abs-container",className:"absolute border-box flex z-50 w-full md:w-fit px-4",style:{position:"absolute",top:c.top,left:c.left},children:(0,a.jsx)(x.P.div,{ref:d,id:"emoji-container-wrapper",className:"w-full backdrop-blur-md bg-gray-100 py-2 px-5 dark:bg-gray-800/80 shadow-lg rounded-full border border-gray-200 dark:border-gray-700",initial:{scale:.8,opacity:0,y:10},animate:{scale:1,opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:20}},exit:{scale:.8,opacity:0,y:10,transition:{duration:.15}},children:(0,a.jsx)("div",{id:"emoji-container",className:"flex justify-between",children:(0,a.jsx)(p.N,{children:Q.map(e=>(0,a.jsxs)(x.P.div,{className:"relative z-10 cursor-pointer rounded-full p-2 ".concat((null==r?void 0:r.emoji)===e?"bg-gray-200/80 dark:bg-gray-700/80":u===e?"bg-gray-100/80 dark:bg-gray-600/80":""),"data-emoji":e,animate:{scale:u===e?1.6:1},transition:{type:"spring",stiffness:300,damping:20},children:[(0,a.jsx)("span",{className:"text-xl",children:e}),(null==r?void 0:r.emoji)===e&&(0,a.jsx)(x.P.div,{className:"absolute -bottom-0.5 left-1/2 w-1 h-1 bg-green-500 rounded-full",initial:{opacity:0},animate:{opacity:1},layoutId:"selectedDot",style:{translateX:"-50%"}})]},e))})})})})},"emoji-menu")}var $=r(4357),ee=r(3717),et=r(4126);function er(e){let{theme:t,anchor:r,onReply:n,onCopy:i,onEdit:o,onClose:l,onDelete:d}=e,c=r.querySelector("#message-bubble"),g=c.classList.contains("items-end"),u=null!==c.querySelector("#image-message-container"),h=[{icon:(0,a.jsx)(B.A,{className:"h-4 w-4"}),text:"Reply",onClick:n},{icon:(0,a.jsx)($.A,{className:"h-4 w-4"}),text:"Copy",onClick:i},...g&&!u?[{icon:(0,a.jsx)(ee.A,{className:"h-4 w-4"}),text:"Edit",onClick:o}]:[],...g?[{icon:(0,a.jsx)(et.A,{className:"h-4 w-4"}),text:"Delete",onClick:d}]:[]],[f,m]=(0,s.useState)({top:0,left:0}),[b,p]=(0,s.useState)(null),k=(0,s.useRef)(null),y=(0,s.createRef)();return(0,s.useEffect)(()=>{k.current=b},[b]),(0,s.useLayoutEffect)(()=>{if(!r||!y.current)return;let e=r.querySelector("#message-bubble"),t=document.querySelector("#chat-container"),a=e.getBoundingClientRect(),n=y.current.getBoundingClientRect(),s=a.bottom+10;if(s+n.height>t.clientHeight/2){s=a.top-n.height-10;let e=document.querySelector("#emoji-abs-container");e&&(e.style.top="".concat(s-n.height,"px"),s-=e.offsetHeight+24)}s+=window.scrollY;let i=a.right-n.width-24;g||(i=a.left),m({top:s,left:i})},[r,g]),(0,s.useEffect)(()=>{let e=e=>{if(!y.current)return;let t=y.current.querySelectorAll("button"),r=null;t.forEach((t,a)=>{let n=t.getBoundingClientRect();e.clientX>=n.left&&e.clientX<=n.right&&e.clientY>=n.top&&e.clientY<=n.bottom&&(r=a)}),p(r)},t=e=>{if(null!==k.current&&y.current){let e=y.current.querySelectorAll("button")[k.current];e&&e.click()}};window.addEventListener("pointermove",e),window.addEventListener("pointerup",t);let r=new PointerEvent("pointerdown",{bubbles:!0});return window.dispatchEvent(r),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[]),(0,a.jsx)(x.P.div,{ref:y,id:"context-menu",className:"absolute flex flex-col rounded-3xl w-[200px] overflow-clip",style:{background:(null==t?void 0:t.chatBackground)||"linear-gradient(180deg, #ffffff, #ffffff)",top:f.top,left:f.left},initial:{opacity:0,scale:.9,transition:{type:"spring",stiffness:300,damping:20}},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.15}},children:h.map((e,t)=>(0,a.jsx)(ea,{icon:e.icon,text:e.text,onClick:()=>{e.onClick(),l()},active:b===t},t))})}function ea(e){let{icon:t,text:r,onClick:n,active:s}=e;return(0,a.jsx)("div",{children:(0,a.jsxs)("button",{onClick:n,className:"flex items-center justify-start w-full px-6 py-4 text-sm text-black hover:bg-gray-200 ".concat(s?"bg-gray-200":""),children:[(0,a.jsx)("p",{className:"mr-auto",children:r}),t]})})}let en={id:"default",name:"Default Chat Theme",accentColor:"#16a34a",userBubbleGradient:"linear-gradient(90deg, #16a34a, #16a34a)",userTextColor:"#ffffff",otherBubbleGradient:"linear-gradient(90deg, #f3f4f6, #f3f4f6)",otherTextColor:"#1F2937",otherAnimated:!1,userAnimated:!1,chatBackground:"linear-gradient(180deg, #ffffff, #ffffff)"},es=e=>{var t,r,n,s;let{open:i,message:o,messageDiv:l,user:d,onReact:c,onClose:g,onCopy:u,onEdit:h,onReply:f,onDelete:m}=e;return(0,a.jsx)(p.N,{children:i&&(0,a.jsxs)("div",{id:"emoji-overlay-main",className:"overflow-visible absolute left-0 top-0 select-none",children:[(0,a.jsx)(x.P.div,{layout:!0,initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},className:"fixed inset-0 bg-black z-30",onClick:g},"emoji-overlay"),(0,a.jsxs)("div",{className:"relative z-40 w-full",children:[(0,a.jsx)(K,{isUserMessage:o.sender===d.id,preselectedEmoji:(null==(r=o.reactions)||null==(t=r.find(e=>e.user_id===d.id))?void 0:t.emoji)!=null?{emoji:null==(s=o.reactions)||null==(n=s.find(e=>e.user_id===d.id))?void 0:n.emoji}:void 0,messageDiv:l,message:o,onReact:c,onClose:g},"emoji-menu"),(0,a.jsx)(er,{onCopy:()=>u(o.id),onEdit:()=>h(o.id),onReply:()=>f(o.id),onDelete:()=>m(o.id),onClose:g,theme:en,anchor:l},"context-menu")]},"context-container")]},"emoji-overlay-main")})};var ei=r(4304);let eo=e=>{let{theme:t,mode:r}=e,n={backgroundColor:t.message.strangerMessage.background[r]},s={backgroundColor:t.animations.typingIndicatorDots[r]};return(0,a.jsx)(x.P.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,a.jsxs)("div",{className:"flex mb-2 mx-4 max-w-[100%] rounded-3xl px-4 py-4 relative",style:n,children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full animate-bounce [animation-delay:-0.3s]",style:s}),(0,a.jsx)("div",{className:"h-2 w-2 mx-1 rounded-full animate-bounce [animation-delay:-0.15s]",style:s}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full animate-bounce",style:s})]})},"typing-motiondiv")},el=(e,t)=>Math.random()*(t-e)+e,ed=e=>{let{a:t,d:r,color:n}=e,s=Math.cos(t)*r,i=Math.sin(t)*r,o=el(2,4),l=el(0,2),d=el(.8,1.2);return(0,a.jsx)(x.P.div,{className:"absolute rounded-full",style:{width:10,height:10,left:"50%",top:"50%",translateX:"-50%",translateY:"-50%",backgroundColor:n},initial:{x:0,y:0,scale:0},animate:{x:s,y:i,scale:d},transition:{duration:o,delay:l,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})},ec=e=>{var t;let{theme:r,mode:n,onCancel:s}=e,i=Array.from({length:5}).map((e,t)=>({id:t,angle:t/5*2*Math.PI,distance:el(80,120)})),o=r.buttons.primary.text[n],l=r.accent.main[n],d=r.general.background[n],c={initial:{scale:0,opacity:.5},animate:e=>({scale:1,opacity:0,transition:{delay:.7*e,duration:2.1,repeat:1/0,ease:"circOut"}})};return(0,a.jsxs)(x.P.div,{className:"absolute inset-0 flex flex-col items-center justify-center w-full h-full overflow-hidden z-10",style:{backgroundColor:l},variants:{hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,scale:.95,transition:{duration:.3,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",children:[(0,a.jsxs)("div",{className:"relative w-64 h-64 flex items-center justify-center",children:[(0,a.jsx)(p.N,{children:[0,1,2].map(e=>(0,a.jsx)(x.P.div,{className:"absolute w-full h-full rounded-full border-2",style:{borderColor:o},variants:c,initial:"initial",animate:"animate",custom:e},e))}),(0,a.jsx)(x.P.div,{className:"relative w-24 h-24 rounded-full flex items-center justify-center shadow-lg",style:{backgroundColor:d},animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,a.jsx)("svg",{className:"w-12 h-12",style:{color:l},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8s-9-3.582-9-8 4.03-8 9-8 9 3.582 9 8z"})})}),(0,a.jsx)("div",{className:"absolute w-full h-full",children:i.map(e=>(0,a.jsx)(ed,{a:e.angle,d:e.distance,color:o},e.id))})]}),(0,a.jsx)(x.P.p,{className:"mt-8 text-2xl font-semibold tracking-wider",style:{color:o},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5,ease:"easeOut"},children:"Finding a match..."}),(0,a.jsx)(x.P.button,{className:"mt-6 px-6 py-2 rounded-full text-sm font-semibold transition-colors",style:{backgroundColor:r.buttons.secondary.background[n],color:r.buttons.secondary.text[n],...(null==(t=r.buttons.secondary.border)?void 0:t[n])?{border:"1px solid ".concat(r.buttons.secondary.border[n])}:{border:"none"},opacity:.8},onClick:s,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7,ease:"easeOut"},whileHover:{scale:1.05,opacity:1},whileTap:{scale:.95},children:"Cancel"})]})},eg=(0,s.createContext)(void 0),eu=e=>{let{children:t}=e,[r,n]=(0,s.useState)(H),[i,o]=(0,s.useState)("light"),l=(0,s.useMemo)(()=>({theme:r,mode:i,setMode:o,setTheme:n}),[r,i]);return(0,a.jsx)(eg.Provider,{value:l,children:t})},eh=()=>{let e=(0,s.useContext)(eg);if(void 0===e)throw Error("useChatTheme must be used within a ChatThemeProvider");return e};var ef=r(3127);let em=e=>{let{theme:t,mode:r}=e,n=(0,s.useRef)(!1),i={id:"me"},o=[{id:"1",content:"Preview message!",sender:"stranger",created_at:new Date().toISOString(),session_id:"1",hasNext:!0},{id:"3",content:"I can't think of anything to put here",sender:"stranger",created_at:new Date().toISOString(),session_id:"1",hasPrevious:!0},{id:"2",content:"This looks great.",sender:"me",created_at:new Date().toISOString(),session_id:"1",hasNext:!0},{id:"8",content:"LOL! just type anything",sender:"me",created_at:new Date().toISOString(),session_id:"1",hasPrevious:!0,reactions:[{emoji:"\uD83D\uDE06",user_id:"1",message_id:"8"}]}],l=(e,s)=>"system"===e.sender||"system"===e.type?(0,a.jsx)("div",{className:"text-center my-2 mx-4",children:(0,a.jsx)("span",{style:{color:t.message.systemMessage.text[r],backgroundColor:t.message.systemMessage.background[r]},className:" box-decoration-clone  text-xs rounded-full px-3 py-1 leading-relaxed       ",children:e.content})},s):(0,a.jsx)(v,{children:(0,a.jsx)(q,{index:s,message:e,user:i,isLast:0===s,onSwipe:()=>{},onStartedSwipe:()=>{},onEndedSwipe:()=>{},onReact:async()=>{},onOpenEmojiMenu:()=>{},onResendMessage:()=>{},isEmojiMenuOpen:n,theme:t,mode:r,animate:!0,secondVisibleElement:null},s)},e.id+"listener");return(0,a.jsx)("div",{className:"w-full p-4 rounded-lg flex flex-col",style:{background:t.general.background[r]},children:(0,a.jsx)("div",{className:"flex flex-col",children:o.map((e,t)=>(0,a.jsx)("div",{className:"w-full",children:l(e,t)},e.id))})})};function eb(e){let{isOpen:t,onClose:r,themes:n,activeTheme:i,setActiveThemeAndMode:o,activeMode:l}=e,[d,c]=(0,s.useState)(i),[g,u]=(0,s.useState)(l);(0,s.useEffect)(()=>{c(i),u(l)},[t,i,l]);let h=()=>{c(i),u(l),r()};return(0,a.jsx)(p.N,{children:t&&(0,a.jsx)(x.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 p-4 pt-12 overflow-y-auto",onClick:h,children:(0,a.jsxs)(x.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-5 border-b dark:border-gray-700",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Choose Theme"})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 p-5",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{value:d.name,onChange:e=>{let t=n.find(t=>t.name===e.target.value);t&&c(t)},style:{backgroundColor:d.accent.faded[g]},className:"w-full px-4 py-2.5 rounded-lg border appearance-none transition-colors duration-300 focus:outline-none focus:ring-2",children:n.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.name))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2",style:{color:d.secondaryText[g]},children:(0,a.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Mode"}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>u("light"),className:"w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ".concat("light"===g?"bg-white dark:bg-gray-500 text-gray-800 dark:text-white shadow":"text-gray-500 dark:text-gray-400"),children:"Light"}),(0,a.jsx)("button",{onClick:()=>u("dark"),className:"w-1/2 py-2 rounded-md text-sm font-semibold transition-colors ".concat("dark"===g?"bg-black text-white shadow":"text-gray-500 dark:text-gray-400"),children:"Dark"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gray-200 dark:bg-gray-900 rounded-xl overflow-hidden shadow-inner",children:(0,a.jsx)(em,{theme:d,mode:g})})]})]}),(0,a.jsxs)("div",{className:"p-5 border-t dark:border-gray-700 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:h,className:"px-4 py-2 text-sm font-semibold bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{o(d,g),r()},className:"px-4 py-2 text-sm font-semibold bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save Changes"})]})]})})})}let ex=e=>{let{theme:t,mode:r}=e;return(0,a.jsx)("style",{children:"\n\n    #chat-container {\n      --chat-border-radius: 2rem; /* Default border radius */\n    }\n\n    @media (max-width: 640px) {\n      #chat-container {\n        --chat-border-radius: 0; /* No border radius on small screens */\n      }\n    }\n\n    #chat-messages-list::-webkit-scrollbar {\n      width: 8px;\n    }\n    #chat-messages-list::-webkit-scrollbar-track {\n      background: ".concat(t.messageList.scrollbarTrack[r],";\n    }\n    #chat-messages-list::-webkit-scrollbar-thumb {\n      background-color: ").concat(t.messageList.scrollbarThumb[r],";\n      border-radius: 4px;\n    }\n    #chat-messages-list::-webkit-scrollbar-thumb:hover {\n      background-color: ").concat(t.buttons.primary.hoverBackground[r],";\n    }\n    #chat-input:focus {\n      outline: none;\n      box-shadow: 0 0 0 2px ").concat(t.inputArea.focusRing[r],";\n    }\n    #send-button:hover {\n        background-color: ").concat(t.buttons.primary.hoverBackground[r]," !important;\n    }\n    #new-messages-button:hover {\n        background-color: ").concat(t.buttons.newMessages.hoverBackground[r]," !important;\n    }\n  ")})};function ep(e){var t,r,n,i,o;let{messages:l,goBack:d,sendMessage:c,onStartTyping:g,cancelMatchmaking:h=()=>{},onEditMessage:f,isStrangerTyping:m,onChangeTheme:k,endChat:y,newChat:F,onReact:w,peerId:j,status:N}=e,C={id:j},{theme:E,mode:A}=eh(),[S,D]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{let{data:e,error:t}=await b.from("announcements").select("*").order("created_at",{ascending:!1}).limit(1).single();if(t)return void console.error("Error fetching announcement:",t);(null==e?void 0:e.content)&&D(e.content)},t=b.channel("public:announcements");return t.on("postgres_changes",{event:"*",schema:"public",table:"announcements"},e=>{e.new&&D(e.new.content||null)}).subscribe(),e(),()=>{b.removeChannel(t)}},[]);let B=function(e){let[t,r]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(!e||0===e.length)return void r([]);let t=null,a=[];for(let r=0;r<e.length;r++){let n=e[r],s=new Date(n.created_at).getTime(),i=!1;isNaN(s)?console.warn("Invalid date encountered for message:",n.id):"system"!==n.sender&&"typing"!==n.id&&"filler"!==n.id&&(null===t||s-t>3e5)&&(i=!0,t=s),a.push({...n,showTime:i,hasPrevious:!1,hasNext:!1})}a=a.map(e=>{let t=e.replyingTo;if(t&&"string"==typeof t){let r=a.find(e=>e.id===t);if(r)return{...e,replyingTo:r}}return e});for(let e=0;e<a.length;e++){let t=a[e],r=a[e-1],n=a[e+1];if(!t)continue;t.hasPrevious=!!r&&r.sender===t.sender,t.hasNext=!!n&&n.sender===t.sender,t.showTime&&r&&(t.hasPrevious=!1,r.hasNext=!1),t.reactions&&t.reactions.length>0&&n&&(t.hasNext=!1,n.sender===t.sender&&(n.hasPrevious=!1)),t.replyingTo&&r&&(t.hasPrevious=!1,r.sender===t.sender&&(r.hasNext=!1)),t.replyingTo&&n&&(t.hasNext=!1,n.sender===t.sender&&(n.hasPrevious=!1)),r&&r.replyingTo&&(t.hasPrevious=!1,r.hasNext=!1);let s=a[e+1];s&&("system"===s.sender||"typing"===s.id||"filler"===s.id)&&(t.hasNext=!1)}let n=null,s=a.findIndex(e=>"typing"===e.id);-1!==s&&(n=a.splice(s,1)[0]);let i=new Set,o=a.filter(e=>!i.has(e.id)&&(i.add(e.id),!0));n&&o.push(n),r(o)},[e]),t}(l),T=(0,s.useRef)(null),[M,I]=(0,s.useState)(!1),_=(0,s.useRef)(B.length),[P,R]=(0,s.useState)(!1),L=(0,s.useRef)(!0),[O,z]=(0,s.useState)(""),[W,U]=(0,s.useState)(!1),Q=(0,s.useRef)(!1),[K,$]=(0,s.useState)({open:!1}),[ee,et]=(0,s.useState)(null),er=e=>{if(!e)return void $({open:!1});let t=document.querySelector('[data-message-id="'.concat(null==e?void 0:e.id,'"]'));t&&$({open:!0,message:e,messageDiv:t})};(0,s.useEffect)(()=>{if(0===B.length)return;let e=B.length>_.current,t=B[B.length-1];if("typing"===t.id){_.current=B.length;return}if(e)if(t.sender===C.id||L.current){var r;null==(r=T.current)||r.scrollToIndex(B.length-1,{align:"end",smooth:!0})}else R(!0);_.current=B.length},[B,C.id]),(0,s.useEffect)(()=>{if(L.current&&m){var e;null==(e=T.current)||e.scrollToIndex(B.length)}},[m]),(0,s.useEffect)(()=>{if(ee){let e=document.getElementById("chat-input");e&&e.focus();return}let e=document.getElementById("chat-input");e&&(e.value="",z(""))},[ee]),(0,s.useEffect)(()=>{let e=document.querySelector("#chat-messages-list");e&&(e.style.overflow=M||K.open?"hidden":"auto")},[M,K]);let ea=(e,t)=>"system"===e.sender||"system"===e.type?(0,a.jsx)("div",{className:"text-center my-2 mx-4",children:(0,a.jsx)("span",{style:{color:E.message.systemMessage.text[A],background:E.message.systemMessage.background[A]},className:"box-decoration-clone text-xs rounded-full px-3 py-1 leading-relaxed",children:e.content})},t):(0,a.jsx)(v,{children:(0,a.jsx)(q,{index:t,message:e,user:C,isLast:0===t,onSwipe:e=>{let t=l.find(t=>t.id===e);t&&et({message:t,type:"replying",title:"Replying",description:t.content})},onStartedSwipe:()=>{},onEndedSwipe:()=>{},onReact:w,onOpenEmojiMenu:()=>er(e),onResendMessage:()=>{},isEmojiMenuOpen:Q,theme:E,mode:A,animate:!0,secondVisibleElement:null},t)},e.id+"listener"),[en,el]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex,{theme:E,mode:A}),(0,a.jsx)(eb,{isOpen:en,onClose:()=>el(!1),themes:[H,J,G,Z,Y,X,V],activeTheme:E,setActiveThemeAndMode:(e,t)=>{null==k||k(t,e)},activeMode:A}),(0,a.jsx)(es,{open:K.open,message:K.message,messageDiv:K.messageDiv,user:C,onReact:w,onReply:e=>{let t=l.find(t=>t.id===e);t&&et({message:t,type:"replying",title:"Replying",description:t.content})},onEdit:e=>{let t=l.find(t=>t.id===e);t&&(z(t.content),et({message:t,type:"editing",title:"Editing",description:t.content}))},onCopy:e=>{let t=l.find(t=>t.id===e);t&&(navigator.clipboard.writeText(t.content),er(null))},onDelete:e=>{console.log("Delete message with ID: ".concat(e)),er(null)},onClose:()=>er(null)}),(0,a.jsxs)("div",{id:"chat-container",style:{fontFamily:E.typography.fontFamily,fontSize:E.typography.baseFontSize,background:E.general.background[A],backdropFilter:"blur(".concat(E.general.backdropBlur,")"),boxShadow:E.general.shadow,borderRadius:"var(--chat-border-radius, 2rem)"},className:"w-full max-w-md mx-auto h-[100dvh] flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{style:{background:E.header.background[A],borderColor:E.header.border[A]},className:"p-4 border-b flex items-center shrink-0",children:["connected"!==N&&(0,a.jsx)(u,{onClick:d,className:"rounded-full mr-2 p-1",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,a.jsxs)("div",{className:"text-left mr-auto ml-2",children:[(0,a.jsx)("p",{style:{color:E.header.statusLabel[A]},className:"text-xs font-medium",children:"Status"}),(0,a.jsx)("p",{style:{color:E.header.statusValue[A]},className:"text-sm font-semibold",children:N.charAt(0).toUpperCase()+N.slice(1)})]}),(0,a.jsx)(u,{onClick:()=>el(!0),variant:"outline",className:"mr-2 rounded-full",style:{background:E.buttons.secondary.background[A],color:E.buttons.secondary.text[A],borderColor:(null==(t=E.buttons.secondary.border)?void 0:t[A])||"transparent"},children:(0,a.jsx)(ef.A,{})}),"connected"===N&&(0,a.jsx)(u,{onClick:()=>W?(y(),U(!1)):U(!0),className:"px-3 py-1 text-sm rounded-full",style:{background:W?E.buttons.destructive.background[A]:E.buttons.secondary.background[A],color:W?E.buttons.destructive.text[A]:E.buttons.secondary.text[A],...(W?null==(r=E.buttons.destructive.border)?void 0:r[A]:null==(n=E.buttons.secondary.border)?void 0:n[A])?{border:"1px solid ".concat(W?null==(i=E.buttons.destructive.border)?void 0:i[A]:null==(o=E.buttons.secondary.border)?void 0:o[A])}:{}},children:W?"Confirm?":"End Chat"}),"connected"!==N&&(0,a.jsx)("button",{onClick:F,className:"px-3 py-1 text-sm rounded-full",style:{background:E.buttons.primary.background[A],color:E.buttons.primary.text[A]},children:"New Chat"})]}),S&&(0,a.jsx)("div",{style:{background:E.announcement.background[A],color:E.announcement.text[A],borderColor:E.announcement.border[A]},className:"p-2 text-center text-xs border-b shrink-0",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:S}})}),(0,a.jsx)(p.N,{children:("waiting_for_match"===N||"finding_match"===N||"connecting"===N)&&(0,a.jsx)(ec,{onCancel:h,theme:E,mode:A},"finding-match-animation")}),(0,a.jsxs)("div",{className:"max-h-full h-full relative",children:[(0,a.jsxs)(ei.x8,{ref:T,style:{overflowX:"hidden"},id:"chat-messages-list",onScroll:e=>{T.current&&(L.current=e-T.current.scrollSize+T.current.viewportSize>=-100,L.current&&R(!1))},reverse:!0,children:[B.map((e,t)=>ea(e,t)),(0,a.jsx)(v,{children:m&&(0,a.jsx)(eo,{theme:E,mode:A},"typing-indicator")})]}),(0,a.jsx)(p.N,{children:P&&(0,a.jsx)(x.P.div,{initial:{y:"100%"},animate:{y:"0"},exit:{y:"100%"},className:"absolute bottom-0 left-0 w-full flex items-center justify-center pb-24 pt-4",children:(0,a.jsxs)("button",{id:"new-messages-button",onClick:()=>{var e;null==(e=T.current)||e.scrollToIndex(B.length-1,{align:"end",smooth:!0}),R(!1)},style:{backgroundColor:E.buttons.newMessages.background[A],color:E.buttons.newMessages.text[A]},className:"px-4 py-2 rounded-full shadow-md flex items-center gap-2 transition-colors",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"New messages"]})},"new-messages-button")})]}),(0,a.jsx)(v,{children:(0,a.jsx)(x.P.div,{style:{paddingBottom:ee?"2rem":0,overflow:"hidden",visibility:ee?"visible":"hidden",height:ee?"auto":0,backgroundColor:E.overlays.replyingPreview.background[A],borderLeft:"4px solid ".concat(E.overlays.replyingPreview.border[A])},className:"flex items-start gap-2 px-3 py-2 relative",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{style:{color:E.overlays.replyingPreview.title[A]},className:"text-xs font-semibold",children:(null==ee?void 0:ee.type)==="replying"?"Replying to":"Editing"}),(0,a.jsx)("button",{type:"button",className:"ml-auto","aria-label":"Cancel",onClick:()=>et(null),children:(0,a.jsxs)("svg",{width:"18",height:"18",fill:"none",stroke:E.overlays.replyingPreview.closeIcon[A],strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,a.jsx)("div",{style:{color:E.overlays.replyingPreview.description[A]},className:"text-xs truncate max-w-xs",children:null==ee?void 0:ee.description})]})},"bottom-message-preview")}),(0,a.jsx)("div",{style:{backgroundColor:E.inputArea.background[A],borderColor:E.inputArea.border[A]},className:"p-4 border-t shrink-0",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=O.trim();if(t){var r;let e=null==ee||null==(r=ee.message)?void 0:r.id;if(e&&(null==ee?void 0:ee.type)==="editing"){null==f||f(e,t),et(null),z("");return}c(t,e),z(""),e&&et(null)}},className:"flex space-x-3",children:[(0,a.jsx)("input",{id:"chat-input",disabled:"connected"!==N,type:"text",value:O,onChange:e=>{z(e.target.value),g()},placeholder:"Type a message...",style:{background:E.inputArea.inputBackground[A],color:E.inputArea.inputText[A],borderColor:E.inputArea.border[A]},className:"text-[16px] flex-grow p-3 border rounded-full",autoComplete:"off",required:!0}),(0,a.jsx)(u,{id:"send-button",type:"submit",disabled:!O.trim()||"connected"!==N,style:{background:E.buttons.primary.background[A],color:E.buttons.primary.text[A],opacity:O.trim()&&"connected"===N?1:.5},className:"font-bold w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-colors",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),(0,a.jsx)("polyline",{points:"5 12 12 5 19 12"})]})})]})})]})]})}var ek=r(1368);let ey="https://animochat-turn-server.onrender.com",ev=()=>{let{setTheme:e,setMode:t}=eh(),[r,a]=(0,s.useState)("intro"),[n,i]=(0,s.useState)("initializing"),[o,l]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),[g,u]=(0,s.useState)(""),[h,f]=(0,s.useState)(!1),m=(0,s.useRef)(null),b=(0,s.useRef)(null),x=(0,s.useRef)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("animochat_user_id");if(e)c(e);else{let e=(0,ek.A)();localStorage.setItem("animochat_user_id",e),c(e)}},[]),(0,s.useEffect)(()=>{if(!d)return;let r=async e=>{let t="".concat(ey,"/sync/").concat(e);try{let e=await fetch(t);if(!e.ok)throw Error("Failed to sync messages: ".concat(e.statusText));return(await e.json()).content}catch(e){return console.error("Error syncing messages:",e),[]}};return(async()=>{let n="".concat(ey,"/session/").concat(d);try{let s=await fetch(n);if(!s.ok)return void i("ready");let o=await s.json(),{chatId:d,serverUrl:c,participants:g}=o;if(!d||!c){console.log("No existing session found."),i("ready");return}console.log("Found existing session:",o),u(o.chatId),e(H),t("light"),a("chat"),i("connecting");let h=await r(d);l(h),await S(o.chatId,[],!0)}catch(e){console.error("Error fetching existing session:",e),i("error")}})(),()=>{var e,t;console.log("Cleaning up useAnimochat hook."),null==(e=b.current)||e.close(),null==(t=m.current)||t.close()}},[d]);let p=(e,t,r)=>{console.log("Handling reaction:",{messageId:e,emoji:t,userId:r}),l(a=>a.map(a=>{let n;if(a.id!==e||"system"===a.type)return a;let s=a.reactions||[],i=s.findIndex(e=>e.user_id===r);return i>-1?t?(n=[...s])[i]={user_id:r,emoji:t,message_id:e}:n=s.filter((e,t)=>t!==i):n=t?[...s,{user_id:r,emoji:t,message_id:e}]:s,{...a,reactions:n}}))},k=(0,s.useCallback)(async e=>{m.current&&m.current.readyState===WebSocket.OPEN?m.current.send(JSON.stringify(e)):console.error("Cannot send packet, WebSocket connection is not open.")},[]),y=(0,s.useRef)(null),v=(0,s.useCallback)(()=>{if(x.current){y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{x.current=!1,k({type:"typing",content:!1,sender:d})},3e3);return}x.current=!0,k({type:"typing",content:!0,sender:d}),y.current=setTimeout(()=>{x.current=!1,y.current&&clearTimeout(y.current),k({type:"typing",content:!1,sender:d})},3e3)},[d,k]),F=(0,s.useCallback)(async(e,t)=>{d&&(p(e,t||null,d),k({type:"reaction",sender:d,content:{message_id:e,emoji:t||null,user_id:d}}))},[d,k]),w=(0,s.useCallback)((e,t)=>{t&&e&&d&&(l(r=>r.map(r=>r.id===e?{...r,content:t,edited:!0}:r)),k({type:"edit_message",content:{message_id:e,new_content:t,user_id:d},sender:d}))},[d,k]),j=(0,s.useCallback)((e,t)=>{if(!d||!g)return;k({type:"typing",content:!1,sender:d});let r={id:"msg_".concat(Date.now()),session_id:g,created_at:new Date().toISOString(),content:e,replyingTo:t,sender:d};k({type:"message",content:r,sender:d}),l(e=>[...e,r])},[d,g,k]),N=(0,s.useCallback)(()=>{var e,t;C.current=!0,E.current&&clearTimeout(E.current),(async()=>{let e="".concat(ey,"/session/disconnect?userId=").concat(d);try{let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d})});t.ok?console.log("Successfully disconnected from session."):console.error("Failed to disconnect from session:",t.statusText)}catch(e){console.error("Error disconnecting from session:",e)}})().then(()=>{console.log("Disconnected from matchmaking and chat.")});let r={id:"system_".concat(Date.now()),session_id:g,created_at:new Date().toISOString(),type:"system",content:"You have disconnected from the chat.",sender:"system"};l(e=>[...e,r]),m.current&&m.current.send(JSON.stringify({type:"disconnect",content:null,sender:d})),null==(e=m.current)||e.close(),m.current=null,null==(t=b.current)||t.close(),b.current=null,i("disconnected"),u("")},[d]),C=(0,s.useRef)(!1),E=(0,s.useRef)(null),A=(0,s.useRef)(0),S=(0,s.useCallback)(async function(r){var a,n,s;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!d)return void console.error("User ID not set, cannot connect to chat.");console.log("Attempting to connect to chat: ".concat(r,". Reconnecting: ").concat(c)),C.current=!1,E.current&&clearTimeout(E.current);try{let a="".concat(ey,"/session/").concat(d),n=await fetch(a);if(!n.ok)throw Error("Session fetch failed: ".concat(n.statusText));let s=await n.json();if(!s.chatId||!s.serverUrl||s.chatId!==r)throw Error("Invalid session data for reconnection.");let g="".concat(s.serverUrl,"?userId=").concat(d,"&chatId=").concat(s.chatId);console.log("Connecting to WebSocket server: ".concat(g));let h=new WebSocket(g);m.current=h,h.onopen=()=>{let e;console.log("WebSocket connection established."),i("connected"),A.current=0,e=c?"Reconnected to the chat successfully.":"You matched with a stranger on ".concat(o.join(", "),"! Say hi!");let t={id:"system_".concat(Date.now()),session_id:r,created_at:new Date().toISOString(),type:"system",content:e,sender:"system"};l(e=>c?e:[t]),c&&l(e=>[...e,t])},h.onmessage=async a=>{let n,s=a.data,o=n=s instanceof Blob?JSON.parse(await s.text()):JSON.parse(s);if(o.sender!==d)switch(n.type){case"change_theme":let{mode:c,theme:g}=n.content;t(c),e(g),l(e=>[...e,{id:"system_".concat(Date.now()),session_id:r,created_at:new Date().toISOString(),type:"system",content:"Theme changed to ".concat(g.name," in ").concat(c," mode."),sender:"system"}]);break;case"offline":l(e=>[...e,{id:"system_".concat(Date.now()),session_id:r,created_at:new Date().toISOString(),type:"system",content:n.content!==d?"Your partner has went offline.":"You are currently offline.",sender:"system"}]);break;case"disconnect":var x;l(e=>[...e,{id:"system_".concat(Date.now()),session_id:r,created_at:new Date().toISOString(),type:"system",content:"The other user has disconnected.",sender:"system"}]),h.close(),C.current=!0,E.current&&clearTimeout(E.current),A.current=0,m.current=null,null==(x=b.current)||x.close(),u(""),i("disconnected");break;case"STATUS":l(e=>[...e,{id:"system_".concat(Date.now()),session_id:r,created_at:new Date().toISOString(),type:"system",content:o.message,sender:"system"}]);break;case"message":l(e=>[...e,n.content]);break;case"reaction":let{message_id:k,emoji:y,user_id:v}=n.content;p(k,y,v);break;case"typing":f(n.content);break;case"edit_message":let{message_id:F,new_content:w,user_id:j}=n.content;l(e=>e.map(e=>e.id===F&&e.sender===j?{...e,content:w,edited:!0}:e));break;default:console.warn("Unknown packet type received:",n.type)}},h.onclose=()=>{if(console.log("WebSocket connection closed."),C.current)return void console.log("Intentional disconnect, not reconnecting.");m.current=null,i("reconnecting"),l(e=>[...e,{id:"system_".concat(Date.now()),session_id:r,created_at:new Date().toISOString(),type:"system",content:"Connection lost. Attempting to reconnect...",sender:"system"}]),A.current<5?(A.current++,console.log("Scheduling reconnection attempt #".concat(A.current)),E.current=setTimeout(()=>{S(r,[],!0)},4e3*A.current)):(console.error("Max reconnection attempts reached. Giving up."),l(e=>[...e,{id:"system_".concat(Date.now()),session_id:r,created_at:new Date().toISOString(),type:"system",content:"Could not reconnect to the server. Please find a new match.",sender:"system"}]),i("error"))},h.onerror=e=>{console.error("WebSocket error:",e),i("error")}}catch(e){console.error("Failed to establish connection:",e),null==(a=m.current)||a.close(),m.current?null==(n=(s=m.current).onclose)||n.call(s,new CloseEvent("close")):A.current<5&&(A.current++,E.current=setTimeout(()=>{S(r,[],!0)},4e3*A.current))}},[d,p,e,t,k,l,i]),D=(0,s.useCallback)(r=>{if(console.log("Starting matchmaking with interests:",r),!d){console.error("User ID not set yet. Cannot start matchmaking."),i("error");return}a("chat"),i("finding_match"),e(H),t("light");let n=r.join(","),s="".concat(ey,"/matchmaking?userId=").concat(d,"&interest=").concat(n);console.log("Connecting to matchmaking server: ".concat(s));let o=new EventSource(s);b.current=o,o.onmessage=e=>{let t=JSON.parse(e.data);if(console.log("Matchmaking update:",t),"MATCHED"===t.state&&t.chatId){var r;o.close(),u(t.chatId),i("connecting"),S(t.chatId,(null==(r=t.interest)?void 0:r.split(","))||[])}else"WAITING"===t.state&&i("waiting_for_match")},o.onerror=e=>{console.error("EventSource failed:",e),i("error"),o.close()}},[d,S]),B=(0,s.useCallback)(()=>{m.current?(console.log("--- SIMULATING DISCONNECT ---"),m.current.close()):console.warn("--- SIMULATE DISCONNECT: No active WebSocket connection. ---")},[]);return(0,s.useEffect)(()=>(window.simulateDisconnect=B,console.log("Disconnection test function available in console: `window.simulateDisconnect()`"),()=>{delete window.simulateDisconnect}),[B]),{screen:r,status:n,messages:o,userId:d,isStrangerTyping:h,handleGetStarted:()=>a("matchmaking"),startMatchmaking:D,onCancelMatchmaking:e=>{fetch("".concat(ey,"/cancel_matchmaking"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d,interests:e})}).then(e=>{if(!e.ok)throw Error("Failed to cancel matchmaking: ".concat(e.statusText));console.log("Matchmaking cancelled successfully."),console.log("Cancelling matchmaking..."),b.current&&(b.current.close(),b.current=null),i("ready"),a("matchmaking"),u("")}).catch(e=>{console.error("Error cancelling matchmaking:",e),i("finding_match")})},sendMessage:j,disconnect:N,onReact:F,onChangeTheme:(r,a)=>{if(console.log("THEME CHANGE REQUESTED"),!d||!g)return;k({type:"change_theme",content:{mode:r,theme:a},sender:d}),t(r),e(a);let n={id:"system_".concat(Date.now()),session_id:g,created_at:new Date().toISOString(),type:"system",content:"Theme changed to ".concat(a.name," in ").concat(r," mode."),sender:"system"};l(e=>[...e,n])},editMessage:w,onStartTyping:v}};var eF=r(6874),ew=r.n(eF),ej=r(5487);function eN(){let{screen:e,userId:t,status:r,messages:i,startMatchmaking:o,onChangeTheme:l,disconnect:d,editMessage:c,sendMessage:g,onReact:h,onCancelMatchmaking:f,onStartTyping:m,handleGetStarted:b,isStrangerTyping:k}=ev(),[y,v]=(0,s.useState)(new Set),F=e=>{if(0===e.size)return void b();o(Array.from(e))},w={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.23,ease:"easeInOut"}};return(0,a.jsx)("div",{className:"h-full overflow-y-auto overflow-x-hidden",children:(0,a.jsxs)("main",{className:"container h-full mx-auto flex flex-col ".concat("chat"===e?"p-0":"px-4 py-8 md:py-16"),children:["chat"!==e&&(0,a.jsx)(n,{}),(0,a.jsx)("div",{className:"flex-grow flex flex-col justify-center items-center",children:(0,a.jsx)(p.N,{mode:"wait",children:(()=>{switch(e){case"chat":return(0,a.jsx)(x.P.div,{...w,className:"h-full w-full flex items-center justify-center sm:p-4",children:(0,a.jsx)(ep,{goBack:()=>{b()},onEditMessage:c,onStartTyping:m,cancelMatchmaking:()=>{f(Array.from(y))},isStrangerTyping:k,onReact:h,onChangeTheme:l,messages:i,sendMessage:g,newChat:()=>{F(y)},endChat:d,peerId:t,status:r})},"chat");case"matchmaking":return(0,a.jsxs)(x.P.div,{...w,className:"w-full h-full flex flex-col justify-center items-center",children:[(0,a.jsx)("div",{className:"max-w-3xl mx-auto relative w-full",children:(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h2",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-green-600 to-green-400 bg-clip-text text-transparent",children:"Choose Your Interests"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg my-8",children:"Find someone to chat with based on what you like."})]})}),(0,a.jsx)(C,{interests:y,onInterestsChange:v,onFindMatch:F,isConnecting:!1,status:r})]},"matchmaking");default:return(0,a.jsxs)(x.P.div,{...w,className:"w-full h-full flex flex-col justify-center items-center",children:[(0,a.jsx)("div",{className:"max-w-3xl mx-auto relative w-full",children:(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsxs)("h2",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-green-600 to-green-400 bg-clip-text text-transparent",children:["Real-time",(0,a.jsx)("br",{}),"Anonymous Chat"]}),(0,a.jsx)("p",{className:"text-gray-600 text-lg my-8",children:"Connect with students anonymously and securely."})]})}),(0,a.jsx)("div",{className:"max-w-md mx-auto text-sm space-y-6 text-center",children:(0,a.jsx)("div",{className:"text-red-700 bg-red-50 p-4 rounded-2xl border border-red-200 font-medium",children:(0,a.jsx)("p",{children:"This is a test version of AnimoChat. Not all features are implemented, and you may encounter bugs."})})}),(0,a.jsx)("div",{className:"text-center mt-12",children:(0,a.jsx)(u,{onClick:b,size:"lg",className:"rounded-full py-7 px-8 bg-green-600 hover:bg-green-700 text-white font-bold text-lg",children:"Get Started"})})]},"intro")}})()})}),"chat"!==e&&(0,a.jsxs)("footer",{className:"text-xs text-gray-500 text-center py-4 shrink-0",children:[(0,a.jsxs)("h3",{className:"py-4",children:["Created by developers from"," ",(0,a.jsx)("span",{className:"text-green-700 font-semibold",children:"De La Salle Lipa"})]}),t&&(0,a.jsxs)("p",{className:"font-mono text-gray-400 text-[10px] mt-2",children:["Your User ID: ",t]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(ew(),{href:"/status",passHref:!0,children:(0,a.jsxs)(u,{variant:"ghost",className:"text-xs text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:[(0,a.jsx)(ej.A,{className:"h-4 w-4 mr-2"}),"Service Status"]})})})]})]})})}let eC=e=>{let{className:t=""}=e;return(0,a.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})},eE=e=>{let{size:t=24,className:r=""}=e;return(0,a.jsxs)("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},eA=e=>{let{size:t=32,className:r=""}=e;return(0,a.jsxs)("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1"}),(0,a.jsx)("line",{x1:"12",y1:"7",x2:"12",y2:"13"}),(0,a.jsx)("line",{x1:"9",y1:"10",x2:"15",y2:"10"})]})},eS=()=>(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),eD=e=>{let{isOpen:t,onClose:r,onSubmit:n}=e,[i,o]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),[c,g]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1),m=(0,s.useRef)(null);if((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),(0,s.useEffect)(()=>{if(t){var e;null==(e=m.current)||e.focus(),o(""),d(!1),g(null),f(!1)}},[t]),!t)return null;let b=async e=>{if(e.preventDefault(),!i.trim())return void g("Feedback cannot be empty.");d(!0),g(null);try{await n(i),f(!0),setTimeout(()=>{r()},2e3)}catch(e){g("Failed to submit feedback. Please try again."),console.error(e)}finally{d(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center","aria-modal":"true",role:"dialog",children:(0,a.jsxs)("div",{ref:m,tabIndex:-1,className:"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4 p-8 relative",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close dialog",children:(0,a.jsx)(eE,{size:24})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-full mb-4",children:(0,a.jsx)(eA,{className:"text-green-600",size:32})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Got a suggestion?"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"We'd love to hear your ideas for new features or improvements."})]}),h?(0,a.jsx)("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"font-semibold text-green-700",children:"Thank you! Your feedback has been submitted."})}):(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"feedback-content",className:"sr-only",children:"Your suggestion"}),(0,a.jsx)("textarea",{id:"feedback-content",value:i,onChange:e=>o(e.target.value),placeholder:"Type your suggestion here...",className:"w-full h-32 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",required:!0})]}),c&&(0,a.jsx)("p",{className:"text-red-600 text-sm text-center",children:c}),(0,a.jsxs)(u,{type:"submit",disabled:l,className:"w-full rounded-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold text-base disabled:bg-gray-400 disabled:cursor-wait flex items-center justify-center transition-colors",children:[l&&(0,a.jsx)(eS,{}),l?"Submitting...":"Submit Feedback"]})]})]})})},eB=()=>{let[e,t]=(0,s.useState)(!1),r=async e=>{console.log("Submitting feedback:",e),await new Promise(e=>setTimeout(e,1e3))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:"\n        @keyframes gentle-wrench-turn {\n          0%, 100% { transform: rotate(-8deg); }\n          50% { transform: rotate(8deg); }\n        }\n        .animate-wrench {\n          animation: gentle-wrench-turn 3s ease-in-out infinite;\n        }\n\n        @keyframes progress-bar-shine {\n          0% { transform: translateX(-100%) skewX(-30deg); }\n          100% { transform: translateX(350%) skewX(-30deg); }\n        }\n        .progress-shine::after {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 33%;\n          height: 100%;\n          background: rgba(255, 255, 255, 0.4);\n          animation: progress-bar-shine 2.5s infinite linear;\n        }\n      "}),(0,a.jsxs)("div",{className:"bg-gray-50 min-h-screen flex flex-col items-center justify-center text-center p-4 font-sans overflow-hidden",children:[(0,a.jsxs)("div",{className:"max-w-md w-full bg-white p-8 sm:p-10 rounded-2xl shadow-xl border border-gray-200",children:[(0,a.jsx)("div",{className:"mx-auto bg-green-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-6 animate-wrench",children:(0,a.jsx)(eC,{className:"w-10 h-10 text-green-600"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Under Maintenance"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:"We'll be back up soon!"}),(0,a.jsx)("p",{className:"text-md text-gray-500 mb-8",children:"We're just polishing things up to make your experience even better."}),(0,a.jsx)("div",{className:"w-full bg-green-200 rounded-full h-4 mb-8 overflow-hidden relative",children:(0,a.jsx)("div",{className:"bg-green-500 h-4 rounded-full w-3/4 progress-shine"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>t(!0),className:"w-full px-8 py-3 bg-green-600 text-white font-semibold rounded-full hover:bg-green-700 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Leave Feedback"}),(0,a.jsx)(ew(),{href:"/status",className:"w-full",children:(0,a.jsxs)(u,{variant:"ghost",className:"w-full text-gray-500 hover:text-green-600",children:[(0,a.jsx)(ej.A,{className:"h-4 w-4 mr-2"}),"Check Service Status"]})})]})]}),(0,a.jsx)("p",{className:"mt-8 text-sm text-gray-400",children:"Patience is a virtue, and so is great software!"})]}),(0,a.jsx)(eD,{isOpen:e,onClose:()=>t(!1),onSubmit:r})]})},eT=()=>{let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!0),[n,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("https://animochat-turn-server.onrender.com/maintenance");if(503===e.status)t(!0);else if(e.ok){let r=await e.json();"MAINTENANCE"===r.state?t(!0):t(!1)}else throw Error("Failed to fetch status: ".concat(e.statusText))}catch(r){console.error("Failed to check maintenance status:",r);let e=r instanceof Error?r.message:"An unknown error occurred.";i("Could not connect to the service. Please try again later. (".concat(e,")")),t(!0)}finally{a(!1)}})()},[]),{isMaintenanceMode:e,isLoading:r,error:n}};function eM(){let{isMaintenanceMode:e,isLoading:t,error:r}=eT();return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"Checking service status..."})}):e?(0,a.jsx)(eB,{}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eu,{children:(0,a.jsx)(eN,{})})})}},6379:(e,t,r)=>{Promise.resolve().then(r.bind(r,5909))},9732:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[817,658,441,684,358],()=>t(6379)),_N_E=e.O()}]);